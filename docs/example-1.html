<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 4 example 1: | Introdução à Análise de Dados em R utilizando Tidyverse</title>
  <meta name="description" content="Livro texto que acompanha o Curso Introdutório de Análise de Dados em R utilizando Tidyverse." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content=" 4 example 1: | Introdução à Análise de Dados em R utilizando Tidyverse" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Livro texto que acompanha o Curso Introdutório de Análise de Dados em R utilizando Tidyverse." />
  <meta name="github-repo" content="allanvc/book_IADR-T" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 4 example 1: | Introdução à Análise de Dados em R utilizando Tidyverse" />
  
  <meta name="twitter:description" content="Livro texto que acompanha o Curso Introdutório de Análise de Dados em R utilizando Tidyverse." />
  

<meta name="author" content="Allan Vieira de Castro Quadros" />


<meta name="date" content="2025-10-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="install.html"/>
<link rel="next" href="m4.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.3/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução à Análise de Dados em R utilizando Tidyverse</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bem-vindo!</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#por-que-r"><i class="fa fa-check"></i>Por que R ?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#organização-do-curso"><i class="fa fa-check"></i>Organização do Curso</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-o-autor"><i class="fa fa-check"></i>Sobre o autor</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="m1.html"><a href="m1.html"><i class="fa fa-check"></i><b>1</b> Module I</a>
<ul>
<li class="chapter" data-level="1.1" data-path="m1.html"><a href="m1.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="m1.html"><a href="m1.html#brief-history"><i class="fa fa-check"></i><b>1.1.1</b> Brief History</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>2</b> leaflet</a></li>
<li class="chapter" data-level="3" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>3</b> install.packages(“leaflet”)</a></li>
<li class="chapter" data-level="4" data-path="example-1.html"><a href="example-1.html"><i class="fa fa-check"></i><b>4</b> example 1:</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="example-1.html"><a href="example-1.html#structure-of-the-r-language"><i class="fa fa-check"></i><b>4.0.1</b> Structure of the R Language</a></li>
<li class="chapter" data-level="4.0.2" data-path="example-1.html"><a href="example-1.html#how-to-get-help"><i class="fa fa-check"></i><b>4.0.2</b> How to Get Help</a></li>
<li class="chapter" data-level="4.1" data-path="example-1.html"><a href="example-1.html#the-structure-of-r-objects"><i class="fa fa-check"></i><b>4.1</b> The Structure of R Objects</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="example-1.html"><a href="example-1.html#vectors"><i class="fa fa-check"></i><b>4.1.1</b> Vectors</a></li>
<li class="chapter" data-level="4.1.2" data-path="example-1.html"><a href="example-1.html#data-frames"><i class="fa fa-check"></i><b>4.1.2</b> Data Frames</a></li>
<li class="chapter" data-level="4.1.3" data-path="example-1.html"><a href="example-1.html#module-references"><i class="fa fa-check"></i><b>4.1.3</b> Module References</a></li>
<li class="chapter" data-level="4.1.4" data-path="example-1.html"><a href="example-1.html#exercises"><i class="fa fa-check"></i><b>4.1.4</b> Exercises</a></li>
<li class="chapter" data-level="4.1.5" data-path="example-1.html"><a href="example-1.html#installing-r"><i class="fa fa-check"></i><b>4.1.5</b> Installing <strong>R</strong></a></li>
<li class="chapter" data-level="4.1.6" data-path="example-1.html"><a href="example-1.html#installing-rstudio"><i class="fa fa-check"></i><b>4.1.6</b> Installing <strong>RStudio</strong></a></li>
<li class="chapter" data-level="4.1.7" data-path="example-1.html"><a href="example-1.html#installing-rtools-on-windows"><i class="fa fa-check"></i><b>4.1.7</b> Installing <strong>RTools</strong> on Windows</a></li>
<li class="chapter" data-level="4.1.8" data-path="example-1.html"><a href="example-1.html#basic-functionalities-of-r-and-rstudio"><i class="fa fa-check"></i><b>4.1.8</b> Basic Functionalities of R and RStudio</a></li>
<li class="chapter" data-level="4.1.9" data-path="example-1.html"><a href="example-1.html#r-language-structure"><i class="fa fa-check"></i><b>4.1.9</b> R Language Structure</a></li>
<li class="chapter" data-level="4.1.10" data-path="example-1.html"><a href="example-1.html#how-to-get-help-1"><i class="fa fa-check"></i><b>4.1.10</b> How to get help</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="example-1.html"><a href="example-1.html#r-language-object-structure"><i class="fa fa-check"></i><b>4.2</b> R Language Object Structure</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="example-1.html"><a href="example-1.html#vectors-1"><i class="fa fa-check"></i><b>4.2.1</b> Vectors</a></li>
<li class="chapter" data-level="4.2.2" data-path="example-1.html"><a href="example-1.html#dataframes"><i class="fa fa-check"></i><b>4.2.2</b> Dataframes</a></li>
<li class="chapter" data-level="4.2.3" data-path="example-1.html"><a href="example-1.html#module-references-1"><i class="fa fa-check"></i><b>4.2.3</b> Module References</a></li>
<li class="chapter" data-level="4.2.4" data-path="example-1.html"><a href="example-1.html#exercises-1"><i class="fa fa-check"></i><b>4.2.4</b> Exercises</a></li>
<li class="chapter" data-level="4.2.5" data-path="example-1.html"><a href="example-1.html#connecting-to-a-database"><i class="fa fa-check"></i><b>4.2.5</b> Connecting to a database</a></li>
<li class="chapter" data-level="4.2.6" data-path="example-1.html"><a href="example-1.html#generating-queries"><i class="fa fa-check"></i><b>4.2.6</b> Generating queries</a></li>
<li class="chapter" data-level="4.2.7" data-path="example-1.html"><a href="example-1.html#section-references"><i class="fa fa-check"></i><b>4.2.7</b> Section References</a></li>
<li class="chapter" data-level="4.2.8" data-path="example-1.html"><a href="example-1.html#exercises-2"><i class="fa fa-check"></i><b>4.2.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="example-1.html"><a href="example-1.html#data-manipulation-with-two-table-verbs---dplyr"><i class="fa fa-check"></i><b>4.3</b> Data Manipulation with <em>Two-table verbs</em> - <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="example-1.html"><a href="example-1.html#mutating-joins"><i class="fa fa-check"></i><b>4.3.1</b> <em>Mutating joins</em></a></li>
<li class="chapter" data-level="4.3.2" data-path="example-1.html"><a href="example-1.html#filtering-joins"><i class="fa fa-check"></i><b>4.3.2</b> <em>Filtering joins</em></a></li>
<li class="chapter" data-level="4.3.3" data-path="example-1.html"><a href="example-1.html#section-references-1"><i class="fa fa-check"></i><b>4.3.3</b> Section References</a></li>
<li class="chapter" data-level="4.3.4" data-path="example-1.html"><a href="example-1.html#exercises-3"><i class="fa fa-check"></i><b>4.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="example-1.html"><a href="example-1.html#geographic-data-analysis-in-r"><i class="fa fa-check"></i><b>4.4</b> Geographic Data Analysis in <strong>R</strong></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="example-1.html"><a href="example-1.html#introduction"><i class="fa fa-check"></i><b>4.4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.4.2" data-path="example-1.html"><a href="example-1.html#map-production-in-r"><i class="fa fa-check"></i><b>4.4.2</b> Map Production in R</a></li>
<li class="chapter" data-level="4.4.3" data-path="example-1.html"><a href="example-1.html#exporting-geographic-data"><i class="fa fa-check"></i><b>4.4.3</b> Exporting geographic data</a></li>
<li class="chapter" data-level="4.4.4" data-path="example-1.html"><a href="example-1.html#section-references-2"><i class="fa fa-check"></i><b>4.4.4</b> Section References</a></li>
<li class="chapter" data-level="4.4.5" data-path="example-1.html"><a href="example-1.html#exercises-4"><i class="fa fa-check"></i><b>4.4.5</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="m4.html"><a href="m4.html"><i class="fa fa-check"></i><b>5</b> Módulo IV</a>
<ul>
<li class="chapter" data-level="5.1" data-path="m4.html"><a href="m4.html#manipulação-de-strings-no-r-com-stringr"><i class="fa fa-check"></i><b>5.1</b> Manipulação de <em>strings</em> no R com <code>stringr</code></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="m4.html"><a href="m4.html#introdução"><i class="fa fa-check"></i><b>5.1.1</b> Introdução</a></li>
<li class="chapter" data-level="5.1.2" data-path="m4.html"><a href="m4.html#operações-com-caracteres-individuais"><i class="fa fa-check"></i><b>5.1.2</b> Operações com caracteres individuais</a></li>
<li class="chapter" data-level="5.1.3" data-path="m4.html"><a href="m4.html#pattern-matching"><i class="fa fa-check"></i><b>5.1.3</b> <em>Pattern matching</em></a></li>
<li class="chapter" data-level="5.1.4" data-path="m4.html"><a href="m4.html#referências-da-seção"><i class="fa fa-check"></i><b>5.1.4</b> Referências da seção</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="m4.html"><a href="m4.html#expressões-regulares-regex"><i class="fa fa-check"></i><b>5.2</b> Expressões Regulares (REGEX)</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="m4.html"><a href="m4.html#introdução-1"><i class="fa fa-check"></i><b>5.2.1</b> Introdução</a></li>
<li class="chapter" data-level="5.2.2" data-path="m4.html"><a href="m4.html#exemplos-de-regex-usando-stringr"><i class="fa fa-check"></i><b>5.2.2</b> Exemplos de REGEX usando <code>stringr</code></a></li>
<li class="chapter" data-level="5.2.3" data-path="m4.html"><a href="m4.html#referências-da-seção-1"><i class="fa fa-check"></i><b>5.2.3</b> Referências da seção</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="m4.html"><a href="m4.html#relatórios-e-pesquisa-reproduzível-com-rmarkdown"><i class="fa fa-check"></i><b>5.3</b> Relatórios e pesquisa reproduzível com <code>rmarkdown</code></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="m4.html"><a href="m4.html#introdução-2"><i class="fa fa-check"></i><b>5.3.1</b> Introdução</a></li>
<li class="chapter" data-level="5.3.2" data-path="m4.html"><a href="m4.html#cabeçalho"><i class="fa fa-check"></i><b>5.3.2</b> Cabeçalho</a></li>
<li class="chapter" data-level="5.3.3" data-path="m4.html"><a href="m4.html#formatação-de-texto"><i class="fa fa-check"></i><b>5.3.3</b> Formatação de Texto</a></li>
<li class="chapter" data-level="5.3.4" data-path="m4.html"><a href="m4.html#inserção-de-figuras-externas"><i class="fa fa-check"></i><b>5.3.4</b> Inserção de figuras externas</a></li>
<li class="chapter" data-level="5.3.5" data-path="m4.html"><a href="m4.html#inserção-de-links"><i class="fa fa-check"></i><b>5.3.5</b> Inserção de links</a></li>
<li class="chapter" data-level="5.3.6" data-path="m4.html"><a href="m4.html#fórmulas-matemáticas"><i class="fa fa-check"></i><b>5.3.6</b> Fórmulas matemáticas</a></li>
<li class="chapter" data-level="5.3.7" data-path="m4.html"><a href="m4.html#inserção-e-execução-de-códigos"><i class="fa fa-check"></i><b>5.3.7</b> Inserção e execução de códigos</a></li>
<li class="chapter" data-level="5.3.8" data-path="m4.html"><a href="m4.html#tabelas-mais-sofisticadas"><i class="fa fa-check"></i><b>5.3.8</b> Tabelas mais sofisticadas</a></li>
<li class="chapter" data-level="5.3.9" data-path="m4.html"><a href="m4.html#referências-da-seção-2"><i class="fa fa-check"></i><b>5.3.9</b> Referências da seção</a></li>
<li class="chapter" data-level="5.3.10" data-path="m4.html"><a href="m4.html#exercícios"><i class="fa fa-check"></i><b>5.3.10</b> Exercícios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="m5.html"><a href="m5.html"><i class="fa fa-check"></i><b>6</b> Extra</a>
<ul>
<li class="chapter" data-level="6.1" data-path="m5.html"><a href="m5.html#análise-econômica-regional-com-pacote-reat"><i class="fa fa-check"></i><b>6.1</b> Análise Econômica Regional com pacote <code>REAT</code></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="m5.html"><a href="m5.html#introdução-3"><i class="fa fa-check"></i><b>6.1.1</b> Introdução</a></li>
<li class="chapter" data-level="6.1.2" data-path="m5.html"><a href="m5.html#concentração-e-dispersão"><i class="fa fa-check"></i><b>6.1.2</b> Concentração e dispersão</a></li>
<li class="chapter" data-level="6.1.3" data-path="m5.html"><a href="m5.html#especialização-regional-e-concentração-espacial-industrial"><i class="fa fa-check"></i><b>6.1.3</b> Especialização regional e concentração espacial industrial</a></li>
<li class="chapter" data-level="6.1.4" data-path="m5.html"><a href="m5.html#crescimento-regional-anpalise-shift-share"><i class="fa fa-check"></i><b>6.1.4</b> Crescimento regional: anpalise <em>shift-share</em></a></li>
<li class="chapter" data-level="6.1.5" data-path="m5.html"><a href="m5.html#aplicação-2"><i class="fa fa-check"></i><b>6.1.5</b> Aplicação</a></li>
<li class="chapter" data-level="6.1.6" data-path="m5.html"><a href="m5.html#referências-da-seção-3"><i class="fa fa-check"></i><b>6.1.6</b> Referências da seção</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="conclusão.html"><a href="conclusão.html"><i class="fa fa-check"></i>Conclusão</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução à Análise de Dados em <strong>R</strong> utilizando Tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="example-1" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number"> 4</span> example 1:<a href="example-1.html#example-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>m &lt;- leaflet() m &lt;- addTiles(m) m &lt;- addMarkers(m, lng = 174.768, lat = -36.852, popup = “Where R was born!!”) m</p>
<pre><code>
****

### Installing **R**

Installing the R environment is straightforward on any operating system. On Windows, do the following:

* 1 Access https://www.r-project.org/.
* 2 Click **download R** (choose a CRAN mirror).
* 3 Choose your preferred CRAN (Comprehensive R Archive Network) repository.
* 4 Click **Download R for Windows**.
* 5 Click **base**.
* 6 Download the installer by clicking **Download R X.X.X for Windows**.
* 7 Run the downloaded file to install the software.

R’s default window on Windows is quite minimal. You’ll see a larger window called the R GUI (R Graphical User Interface)—i.e., R’s graphical interface—and an R Console window. When you start R, the console displays the version and a few tips about the language. The `&gt;` symbol indicates the command line, or prompt, where you type the commands to be run by the interpreter.

![R Graphical Interface on Windows](./fig/R_GUI.png)

Here it’s worth distinguishing R from some other programming languages: R is an **interpreted** language—execution happens together with parsing, on demand. You type some code, run it, and the interpreter immediately gathers the commands, translates them into machine (low-level) code, and sends them to the processor. Python is another example of an interpreted language.

In **compiled** languages, code analysis happens in a separate compilation phase that transforms source code into target code. The target code is usually saved to a separate executable file that will be run later.

### Installing **RStudio**

Because R’s original GUI is quite modest, there are several Integrated Development Environments (IDEs) that bundle tools to support programming and data analysis. The most widely used IDE for R is **RStudio**.

Steps to install RStudio on Windows:

* 1. Go to https://www.rstudio.com/.
* 2. Click **DOWNLOAD**.
* 3. Choose the **FREE** version and click **DOWNLOAD RStudio for Windows**.

As you’ll see, RStudio’s interface is more “user-friendly” than R’s default. The window is divided into three main regions: a **Console** pane; an **Environment, History, and Connections** pane; and a **Files, Plots, Packages, Help, and Viewer** pane. Depending on your work, other tabs can appear in these panes—for example, **Presentations** when creating slides, or **Build** when developing and testing a package. The names are largely self-explanatory; we’ll discuss them more in later modules.

![RStudio Interface](./fig/RStudio_layout1.png)

****

### Installing **RTools** on Windows

Soon we’ll install R packages—modules that can be added to your base R installation. Some packages include parts written in compiled languages such as C++ and Fortran. By default, Windows does not ship with the compilers required to build these, unlike Linux and macOS. To address this on Windows, we install **RTools**.

The Windows RTools application, also developed by the R Foundation, bundles the compilers and utilities needed to install R packages that require compilation.

Installation is simple:

* Visit https://cran.r-project.org/bin/windows/Rtools/
* Download the recommended installer (usually highlighted in green and labeled _recommended_)
* Run the installer and keep the default options

### Basic Features of R and RStudio

#### R as a Calculator

The most basic way to use R is as a calculator. Arithmetic operations use the following operators:

Operator | Operation
---------|----------
+        | addition
-        | subtraction
*        | multiplication
/        | division
^ or **  | exponentiation
x%%y     | modulus (remainder)
x%/%y    | integer division

Here are some examples. Type the operations at the console next to the `&gt;` prompt:


``` r
2+1</code></pre>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="example-1.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4-2</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="example-1.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span><span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="example-1.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">/</span><span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="example-1.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="example-1.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">**</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="example-1.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">%%</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="example-1.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">%/%</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Notice the <code>[1]</code> printed at the start of each output line. The number in brackets indicates that the value to its right is the first element of the output object. R works vector-wise whenever possible, and the bracketed number shows the position in the result vector of the first value printed on that line. Because each operation above returns a single value, they all start at position 1 of the (length-1) result vector.</p>
<p>This is helpful when you apply an operation to all entries of a column in a table and print the result. R breaks long outputs across multiple lines; the bracketed index helps you identify the position of the first value on each printed line.</p>
<p>Try:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="example-1.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>##   [1]   2   4   6   8  10  12  14  16  18  20  22  24  26  28  30  32  34  36  38  40  42  44  46  48
##  [25]  50  52  54  56  58  60  62  64  66  68  70  72  74  76  78  80  82  84  86  88  90  92  94  96
##  [49]  98 100 102 104 106 108 110 112 114 116 118 120 122 124 126 128 130 132 134 136 138 140 142 144
##  [73] 146 148 150 152 154 156 158 160 162 164 166 168 170 172 174 176 178 180 182 184 186 188 190 192
##  [97] 194 196 198 200</code></pre>
<p>In this example, R chose to print the 100 numbers in groups—17 per line for the first lines and 15 on the last. On the first line, <strong>2</strong> is the element at position <code>[1]</code>; on the second line, <strong>36</strong> is the element at position <code>[18]</code>, and so on, until the last line that begins at position <code>[86]</code>.</p>
<div id="precedence-and-order-of-operations" class="section level5 hasAnchor" number="4.0.0.0.1">
<h5><span class="header-section-number">4.0.0.0.1</span> Precedence and Order of Operations<a href="example-1.html#precedence-and-order-of-operations" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>As in MS Excel, parentheses are useful for arithmetic, comparisons, and sequencing function calls in R. They set the <strong>order</strong> in which calculations should be carried out. Try:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="example-1.html#cb19-1" aria-hidden="true" tabindex="-1"></a>((<span class="dv">1007</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="dv">8</span>)<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 15876</code></pre>
<p>The interpreter works from the inside out: it computes <code>(1007+1)</code>, then divides by 8 (<code>/8</code>), and only then raises the result to the second power (<code>^2</code>).</p>
<p>Without parentheses, the result would be quite different:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="example-1.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1007</span><span class="sc">+</span><span class="dv">1</span><span class="sc">/</span><span class="dv">8</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 1007.016</code></pre>
</div>
<div id="logical-operators" class="section level4 hasAnchor" number="4.0.0.1">
<h4><span class="header-section-number">4.0.0.1</span> Logical Operators<a href="example-1.html#logical-operators" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can also perform logical comparisons in R. Some operators we’ll use early in the course are:</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<blockquote>
<pre><code>   | greater than</code></pre>
<p>= | greater than or equal to &lt; | less than &lt;= | less than or equal to == | equal to != | not equal to x &amp;&amp; y | x AND y x || y | x OR y</p>
</blockquote>
<p>Examples:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="example-1.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="example-1.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1009</span> <span class="sc">&gt;=</span> <span class="dv">1009</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="example-1.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;</span> <span class="fl">0.7</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="example-1.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;=</span> <span class="fl">3.0001</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="example-1.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span> <span class="sc">==</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="example-1.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4353.789</span> <span class="sc">==</span> <span class="fl">4353.7891</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="example-1.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span> <span class="sc">!=</span> <span class="dv">13</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="example-1.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4353.789</span> <span class="sc">!=</span> <span class="fl">4353.7891</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="example-1.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;&amp;</span> <span class="dv">7</span> <span class="sc">!=</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="example-1.html#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">&amp;&amp;</span> (<span class="dv">7</span> <span class="sc">!=</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="example-1.html#cb44-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span> <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">||</span> (<span class="dv">7</span> <span class="sc">&lt;=</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="example-1.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4353.789</span> <span class="sc">!=</span> <span class="fl">4353.7891</span> <span class="sc">||</span> <span class="dv">7</span> <span class="sc">&gt;=</span> <span class="fl">0.7</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>In these examples, outputs are <strong>logical vectors</strong>: <code>TRUE</code> or <code>FALSE</code>. We’ll see other vector types shortly.</p>
</div>
<div id="saving-your-code-in-a-script" class="section level4 hasAnchor" number="4.0.0.2">
<h4><span class="header-section-number">4.0.0.2</span> Saving Your Code in a Script<a href="example-1.html#saving-your-code-in-a-script" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In RStudio you can add a <strong>source pane</strong>—a panel where you create scripts to store multiple lines of code and run them all at once or line by line. If you want to keep your earlier arithmetic and comparisons so you can run them later, put them in a script. A script window lets you keep a record of the commands you used.</p>
<p>This is important: it lets you rerun the same code on different files and occasions instead of rewriting everything whenever your inputs change. You can open multiple scripts side by side and navigate between them, like browser tabs. In this course we’ll do lectures and exercises using script files.</p>
<p>To add a script window (source pane), create a new file by clicking under <strong>File</strong>, then click . Your RStudio window should look like this:</p>
<p>Now add all the lines of code you ran earlier to the new script:</p>
<p><strong>TIP:</strong> You can include comments in your scripts to document steps for future reference. In R, comments start with <code>#</code>.</p>
<p>To save the script, press <code>Ctrl+S</code> or click the disk icon on the menu bar. The file is saved with the <code>.R</code> extension, indicating R code.</p>
<p><strong>TIP:</strong> We recommend creating and saving one or more scripts for each lesson/section. It helps organize your material and makes it easy to revisit important concepts during and after the course.</p>
<p>You can run all lines in a script or only a few selected lines. Select the region you want and press <code>Ctrl+Enter</code>. You’ll see the code execute in the console (the pane below the script). Alternatively, select the lines and click .</p>
<p>Often, code can take a while to complete. To check whether the interpreter is still busy, look at the right side of the <strong>Console</strong> pane. If you see , it’s still working on the last sequence of commands, and the <code>&gt;</code> prompt won’t be idle. You can try to stop execution by clicking the stop icon, though it won’t always be possible.</p>
<p>Try generating a normal distribution with 100 million entries:</p>
<pre class="{r,"><code>rnorm(1:100000000)</code></pre>
<p><strong>TIP:</strong> Sometimes the <code>&gt;</code> prompt doesn’t show even though there’s no stop icon. This usually happens when you forgot to close a parenthesis, brace, or bracket in your code. Try:</p>
<pre class="{r,"><code>((1007+1)/8^2</code></pre>
<p>The console will wait for you to complete the code. You have two options: add the missing parenthesis directly in the console (if feasible), or press <code>Esc</code>, fix the code, and run it again.</p>
</div>
<div id="the-environment-tab" class="section level4 hasAnchor" number="4.0.0.3">
<h4><span class="header-section-number">4.0.0.3</span> The <strong>Environment</strong> Tab<a href="example-1.html#the-environment-tab" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>All objects created in your R/RStudio session are automatically stored in the <strong>Global Environment</strong>, represented by the <strong>Environment</strong> tab in RStudio.</p>
<p>So far our <strong>Environment</strong> is empty because we haven’t “saved” any objects from earlier operations.</p>
<div id="assigning-objects-in-r" class="section level5 hasAnchor" number="4.0.0.3.1">
<h5><span class="header-section-number">4.0.0.3.1</span> Assigning Objects in R<a href="example-1.html#assigning-objects-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>To create an object in R—either to store a specific value or the result of an operation—we use R’s assignment operator <code>&lt;-</code>, as in <code>a &lt;- b</code> (read “a gets b”). You can also write <code>b -&gt; a</code> or use <code>=</code>, but those are less conventional. We recommend <code>a &lt;- b</code> so you don’t confuse object creation with named function arguments later on.</p>
<p>To create a variable <strong>x</strong> that contains <strong>2</strong>, run:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="example-1.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># x gets 2</span></span>
<span id="cb50-2"><a href="example-1.html#cb50-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb50-3"><a href="example-1.html#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="example-1.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># view x</span></span>
<span id="cb50-5"><a href="example-1.html#cb50-5" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p><strong>TIP:</strong> The shortcut for <code>&lt;-</code> is <code>Alt + -</code>.</p>
<p>Now the <strong>Environment</strong> is no longer empty:</p>
<p>Let’s save the results of some arithmetic and logical comparisons:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="example-1.html#cb52-1" aria-hidden="true" tabindex="-1"></a>out1 <span class="ot">&lt;-</span> <span class="dv">789</span><span class="sc">/</span><span class="fl">34.5</span></span>
<span id="cb52-2"><a href="example-1.html#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="example-1.html#cb52-3" aria-hidden="true" tabindex="-1"></a>out2 <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">^</span><span class="dv">2</span></span>
<span id="cb52-4"><a href="example-1.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="example-1.html#cb52-5" aria-hidden="true" tabindex="-1"></a>out3 <span class="ot">&lt;-</span> out1 <span class="sc">&gt;</span> out2</span></code></pre></div>
<p>Here is the <strong>Environment</strong> with the new objects:</p>
<p>R is quite permissive with object names. The restrictions are:</p>
<ul>
<li>a name cannot start with a digit, e.g., <code>1out &lt;- 2</code>;</li>
<li>a name cannot contain only digits, e.g., <code>01 &lt;- 2</code>;</li>
<li>a name cannot contain special characters <strong>except</strong> <code>.</code> or <code>_</code>, e.g., <code>out#01 &lt;- 2</code> is invalid;</li>
<li>a name cannot be identical to a reserved keyword/token, e.g., <code>TRUE &lt;- 2</code> or <code>for &lt;- 2</code>.</li>
</ul>
<p><strong>TIP:</strong> R is <strong>case sensitive</strong>: it distinguishes uppercase and lowercase. Thus <code>Nome_do_Objeto != nome_do_objeto</code>.</p>
</div>
</div>
<div id="saving-objects-from-the-environment" class="section level4 hasAnchor" number="4.0.0.4">
<h4><span class="header-section-number">4.0.0.4</span> Saving Objects from the Environment<a href="example-1.html#saving-objects-from-the-environment" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Want to save the objects from your R session to continue later? Easy.</p>
<p>To save <strong>all</strong> objects in your Environment, click <strong>Session</strong> → <strong>Save Workspace As…</strong> in RStudio. This writes an <code>.RData</code> file with your chosen name and path.</p>
<p>Alternatively:</p>
<pre class="{r,"><code>save.image(&quot;C:\\path_to_folder\\my_workspace.RData&quot;)

# or

save.image(&quot;C:/path_to_folder/my_workspace.RData&quot;)</code></pre>
<p><strong>TIP:</strong> The backslash <code>\</code> has a special role in R as an escape character (we’ll cover this later). To make a backslash literal, escape it with another backslash—hence the double backslashes in Windows paths. An alternative is to use forward slashes <code>/</code>, which R understands even on Windows.</p>
<p>To load the saved workspace in a future session, either use <strong>Session</strong> → <strong>Load Workspace…</strong> in RStudio, or:</p>
<pre class="{r,"><code>load(&quot;C:\\path_to_folder\\my_workspace.RData&quot;)</code></pre>
<p>If you want to save specific elements instead of the whole environment, you can do:</p>
<pre class="{r,"><code>save(out1, out2, file = &quot;C:\\path_to_folder\\my_objects.RData&quot;)</code></pre>
<p>To load these objects, use <code>load()</code> again.</p>
<p><strong>TIP:</strong> To save and load a <strong>single</strong> object—such as a dataset (table) you worked on but want to reuse later—use <code>saveRDS()</code> and <code>readRDS()</code>. This is a more optimized format for large objects.</p>
</div>
<div id="structure-of-the-r-language" class="section level3 hasAnchor" number="4.0.1">
<h3><span class="header-section-number">4.0.1</span> Structure of the R Language<a href="example-1.html#structure-of-the-r-language" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>R</strong> can be considered a functional programming language because most procedures are carried out through <strong>functions</strong> that receive arguments as input, perform actions, and return an output. Roughly speaking, function calls follow this structure:</p>
<pre class="{r,"><code>function_name(argument1 = value1, argument2 = value2, ...)</code></pre>
<p>Although the arithmetic and logical <strong>operators</strong> seen earlier don’t look like this functional structure, they operate internally like functions.</p>
<p>As you’ll see later, any user can create functions in R—not just the ones bundled with base R.</p>
<p><strong>TIP:</strong> You don’t always need to use <code>name = value</code> for arguments, because R can match arguments by <strong>position</strong> (<code>function_name(value1, value2)</code>) or by the <strong>initial letters</strong> of the argument name.</p>
<p>Here are some built‑in functions in <strong>base R</strong> that perform mathematical operations:</p>
<p><strong>TIP:</strong> RStudio has <strong>autocomplete</strong> for objects and functions. Try typing the first letters of each function below and press <code>TAB</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="example-1.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># square root</span></span>
<span id="cb57-2"><a href="example-1.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">81</span>)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="example-1.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combined with operation precedence</span></span>
<span id="cb59-2"><a href="example-1.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>((<span class="dv">3</span><span class="sc">*</span><span class="dv">3</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="example-1.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="do">## product</span></span>
<span id="cb61-2"><a href="example-1.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prod</span>(<span class="dv">2</span>,<span class="dv">2</span>) <span class="co"># 2x2</span></span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="example-1.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prod</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>) <span class="co"># 2x3x5x7x8</span></span></code></pre></div>
<pre><code>## [1] 1680</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="example-1.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="do">## logarithm</span></span>
<span id="cb65-2"><a href="example-1.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># log of 3 in base e</span></span>
<span id="cb65-3"><a href="example-1.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">3</span>) <span class="co"># natural log</span></span></code></pre></div>
<pre><code>## [1] 1.098612</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="example-1.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># log of 3 in base 10</span></span>
<span id="cb67-2"><a href="example-1.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">3</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 0.4771213</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="example-1.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shorthand for base-10 log</span></span>
<span id="cb69-2"><a href="example-1.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log10</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 0.4771213</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="example-1.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># abs = modulus, |3 - 9|</span></span>
<span id="cb71-2"><a href="example-1.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abs</span>(<span class="dv">3-9</span>)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="example-1.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># factorial</span></span>
<span id="cb73-2"><a href="example-1.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 factorial</span></span>
<span id="cb73-3"><a href="example-1.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">factorial</span>(<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 24</code></pre>
<div id="pkg" class="section level4 hasAnchor" number="4.0.1.1">
<h4><span class="header-section-number">4.0.1.1</span> Packages in R<a href="example-1.html#pkg" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One reason for R’s success is that <strong>any user</strong> can develop a suite of functions to perform tasks and distribute it as a <strong>package</strong> for others to install and use. After meeting strict requirements, packages are typically made available on the <a href="https://cran.r-project.org">Comprehensive R Archive Network (CRAN)</a>.</p>
<p>CRAN has a rigorous package review policy. To be accepted, a package must meet several criteria and pass tests focused on user safety, building without errors on at least two operating systems, and thorough documentation (including bibliographic references) of its functionality.</p>
<p>As a result, packages on CRAN are highly reliable, making it the <strong>official</strong> distribution channel for R packages.</p>
<p>To find how many packages are currently on CRAN, run:</p>
<pre class="{r,"><code>dim(available.packages(contrib.url(getOption(&quot;repos&quot;)), filters = list()))[1]</code></pre>
<p>As of March 2020 there are over 15,000 packages on CRAN for a wide range of purposes. To explore package categories, visit CRAN’s <a href="https://cran.r-project.org/web/views/"><em>Task Views</em></a>. You’ll find packages for Econometrics, Regional Economic Analysis, Statistics, Clustering, Clinical Trials, Time Series, Optimization, Data Wrangling, Machine Learning, and many more.</p>
</div>
<div id="installing-packages" class="section level4 hasAnchor" number="4.0.1.2">
<h4><span class="header-section-number">4.0.1.2</span> Installing Packages<a href="example-1.html#installing-packages" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To install CRAN packages, use <code>install.packages("package_name")</code> with the package name in quotes.</p>
<p>Let’s install <code>REAT — Regional Economic Analysis Toolbox</code>, a package you’ll likely use frequently:</p>
<pre class="{r,"><code>install.packages(&quot;REAT&quot;)</code></pre>
<p>If installation succeeded, you’ll see a message like:</p>
<pre class="{sh,"><code>package ‘REAT’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
    C:\Users\...\downloaded_packages
&gt;</code></pre>
<p>Don’t be surprised if additional packages were installed: packages often depend on others.</p>
<p>To <strong>attach</strong> a package in your R session so you can use its functions, call <code>library(package_name)</code> or <code>require(package_name)</code>. In this case the package name may be quoted or unquoted:</p>
<pre class="{r,"><code>library(REAT)</code></pre>
<p>If you don’t want to attach a whole package because you’ll use just one function, you can refer to it explicitly using <code>package::function(args)</code>.</p>
</div>
<div id="other-package-sources" class="section level4 hasAnchor" number="4.0.1.3">
<h4><span class="header-section-number">4.0.1.3</span> Other Package Sources<a href="example-1.html#other-package-sources" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Base R (the default installation) already includes some packages such as <code>stats</code>, <code>MASS</code>, <code>foreign</code>, <code>graphics</code>, and <code>base</code> itself. To list all packages installed on your machine:</p>
<pre class="{r,"><code>installed.packages()</code></pre>
<p>Although CRAN is the official repository, there are other important sources.</p>
<p>The first is <a href="https://www.bioconductor.org/"><strong>Bioconductor</strong></a>, an open-source project focused on software for analyzing and understanding genomic data generated in molecular biology experiments. It’s a key repository for <strong>Bioinformatics</strong> and <strong>Biostatistics</strong> packages.</p>
<p>The second is <a href="https://www.github.com"><strong>GitHub</strong></a>, a code hosting and version control platform. Anyone can create an account and share code, which others can access and improve (with the author’s consent). For R, packages often have a <strong>stable</strong> version on CRAN and a <strong>development</strong> version on GitHub, where authors and contributors work on improvements and bug fixes. Once a GitHub version is stable, the author may submit it to CRAN.</p>
<p>See the repository of my package <strong>emstreeR</strong> on GitHub: <a href="https://www.github.com/allanvc/emstreeR">https://www.github.com/allanvc/emstreeR</a>.</p>
<p>You can install packages directly from GitHub—useful when a feature exists only in the development version and hasn’t reached CRAN yet. To do that you’ll first need the <code>devtools</code> package.</p>
<p>Let’s install the development version of <code>emstreeR</code>:</p>
<pre class="{r,"><code>install.packages(&quot;devtools&quot;) # if you don’t have it installed yet

# option 1
devtools::install_github(repo = &quot;allanvc/emstreeR&quot;)

# or
# option 2
library(devtools)
install_github(repo = &quot;allanvc/emstreeR&quot;)</code></pre>
<p>Note that we pass the repository path via the <code>repo</code> argument.</p>
</div>
</div>
<div id="how-to-get-help" class="section level3 hasAnchor" number="4.0.2">
<h3><span class="header-section-number">4.0.2</span> How to Get Help<a href="example-1.html#how-to-get-help" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This might be the most important part of the material. Knowing <strong>how</strong> and <strong>where</strong> to seek help can turn hours (or days) of work into minutes. Throughout this course—and in real work—you’ll have questions about programming logic, data analysis, or whether a package already exists for what you need.</p>
<div id="rs-built-in-help" class="section level4 hasAnchor" number="4.0.2.1">
<h4><span class="header-section-number">4.0.2.1</span> R’s Built-in <strong>Help</strong><a href="example-1.html#rs-built-in-help" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first place to look for help is within R/RStudio itself. As mentioned in Section <span class="citation">@ref</span>(pkg), CRAN requires packages to be well documented, which greatly helps users and developers. Beyond the documentation for base R and its standard packages, installing a new package adds its documentation to your <strong>Help</strong> pane.</p>
<p>In the lower-right panel you’ll find several tabs: the third one is the <strong>Help</strong> tab. You can search there or query from the console.</p>
<p>Example: suppose you want to know whether R has a function that computes the natural logarithm (base $e$). Use <code>help.search()</code> with a quoted keyword. All R help is in English; so to find logarithm-related functions, run <code>help.search("logarithm")</code> or <code>??logarithm</code>.</p>
<pre class="{r,"><code># option 1
help.search(&quot;logarithm&quot;)

# or
# option 2
??logarithm</code></pre>
<p>In RStudio’s <strong>Help</strong> pane you’ll see functions and packages matching your search. In this case you’ll find <code>log()</code> in base R:</p>
<p>If you already know the exact function or object name, use <code>help("name")</code> or <code>?name</code>:</p>
<pre class="{r,"><code># option 1
help(&quot;log&quot;)

# or
# option 2
?log</code></pre>
<p>The most important sections of a help page are usually <strong>Description</strong>, <strong>Usage</strong>, <strong>Arguments</strong>, and <strong>Examples</strong>. <strong>Value</strong> is also useful—it tells you what the function returns.</p>
<div id="vignettes" class="section level5 hasAnchor" number="4.0.2.1.1">
<h5><span class="header-section-number">4.0.2.1.1</span> <strong>Vignettes</strong><a href="example-1.html#vignettes" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Many packages ship with <strong>vignettes</strong>—tutorial-style documents that go beyond the basic help pages to show how to use the package or specific functions. Some packages have none; others have many. To check a package’s vignettes, use:</p>
<pre class="{r,"><code>vignette(&quot;package_name&quot;)</code></pre>
</div>
</div>
<div id="online-help" class="section level4 hasAnchor" number="4.0.2.2">
<h4><span class="header-section-number">4.0.2.2</span> Online Help<a href="example-1.html#online-help" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R is known for an extremely active community. Sometimes a problem goes beyond the internal documentation. In these cases it’s valuable to learn from other users who’ve faced the same issue. After 20+ years of R, it’s rare that no one has encountered your problem. The internet is your friend—there are free books, blogs with great tutorials, forums, and Q&amp;A sites.</p>
<p>A key site is <a href="http://www.stackoverflow.com">Stack Overflow</a>, a Q&amp;A site for programming. The R community there is very active and among the largest on the site. You’ll find beginners, intermediate users, advanced users, package authors, and even contributors to R and RStudio. There are Portuguese and English versions, but prefer the English site because it’s far more active.</p>
<p>Before posting a question, <strong>search first</strong> with your terms, e.g., <em>“How do I make a scatter plot in R?”</em>. If you type that in Stack Overflow’s search field—or in Google—the top results will include answers showing at least three different ways to make a scatter plot in R using different packages.</p>
<p>Example Q&amp;A on Stack Overflow:</p>
<hr />
<hr />
</div>
</div>
<div id="the-structure-of-r-objects" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> The Structure of R Objects<a href="example-1.html#the-structure-of-r-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Understanding how to create and manipulate objects in R is essential to accelerate your learning in the practical topics. Good performance in later sections depends on a solid grasp of R’s object system.</p>
<p>Everything (or almost everything) in R is an object. The most important are:</p>
<ul>
<li><strong>Vectors</strong>: a one-dimensional array (sequence) of values that can be numeric, character strings, or logical (TRUE/FALSE). A vector’s elements must all be of the <strong>same</strong> type.</li>
</ul>
<p>Example:</p>
<pre><code>## [1] 5.1 4.9 4.7 4.6 5.0 5.4</code></pre>
<ul>
<li><strong>Matrices</strong>: multidimensional arrays built from vectors arranged in rows and columns. All vectors in the collection have the same type and length.</li>
</ul>
<p>Example:</p>
<pre class="{r,"><code>m2 &lt;- matrix(rep(c(&quot;R&quot;, &quot;IPEA&quot;), 5), ncol = 2); m2</code></pre>
<ul>
<li><strong>Data frames</strong>: visually similar to matrices, but a data frame can contain a <strong>collection of vectors of different types</strong> (e.g., one numeric vector and one character vector). Because of this, data frames are the principal object for storing tabular data in R.</li>
</ul>
<p>Example:</p>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
<ul>
<li><strong>Lists</strong>: the most general object type, a list can hold data frames, vectors, matrices—or any combination of these. Since elements need not share type or length, lists are very flexible for data manipulation.</li>
</ul>
<p>Example:</p>
<pre><code>## [[1]]
## [1] &quot;R&quot;    &quot;IPEA&quot; &quot;2020&quot;
## 
## [[2]]
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 
## [[3]]
##           [,1]      [,2]
## [1,] 0.9282461 0.7984968
## [2,] 0.8716624 0.3217342</code></pre>
<ul>
<li><strong>Functions</strong>: procedures that take zero or more parameters as input, perform calculations, and return a result. Functions are objects in R too.</li>
</ul>
<p>Example:</p>
<pre class="{r,"><code>log</code></pre>
<p>In this section we’ll dive deeper into <strong>vectors</strong> and <strong>data frames</strong>, which are the most important objects for this course. Function creation will be covered in Module </p>
<div id="vectors" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Vectors<a href="example-1.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="how-to-create-a-vector" class="section level4 hasAnchor" number="4.1.1.1">
<h4><span class="header-section-number">4.1.1.1</span> How to Create a Vector<a href="example-1.html#how-to-create-a-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R has three main vector types: <strong>numeric</strong> (<code>numeric</code>), <strong>character</strong> (strings; <code>character</code>), and <strong>logical</strong> (<code>logical</code>). All are created with <code>c()</code> (for <strong>c</strong>oncatenate), which concatenates elements of the same type to produce a vector. Pass the elements as arguments separated by commas.</p>
<p><strong>Numeric vector:</strong></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="example-1.html#cb89-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="dv">2</span>, <span class="fl">2.8</span>); v1</span></code></pre></div>
<pre><code>## [1] 1.0 0.2 0.3 2.0 2.8</code></pre>
<p><strong>TIP:</strong> Using <code>;</code> lets you put two commands on one line—one to create the vector and another to print it by typing the object’s name.</p>
<p><strong>TIP:</strong> Numeric vectors can be <strong>integer</strong> or <strong>double</strong> (floating point). To check a vector’s type, use <code>typeof(vector_name)</code>.</p>
<p><strong>Character vector (strings):</strong></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="example-1.html#cb91-1" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;R&quot;</span>, <span class="st">&quot;IPEA&quot;</span>, <span class="st">&quot;2020&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="st">&quot;IPEA&quot;</span>, <span class="st">&quot;2020&quot;</span>); v2</span></code></pre></div>
<pre><code>## [1] &quot;R&quot;    &quot;IPEA&quot; &quot;2020&quot; &quot;R&quot;    &quot;IPEA&quot; &quot;2020&quot;</code></pre>
<p><strong>TIP:</strong> Strings must be in quotes.</p>
<p><strong>Logical vector:</strong></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="example-1.html#cb93-1" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>); v3</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE</code></pre>
<p>Try mixing vectors. Because a vector can only have one type, R will coerce the result to a single common type.</p>
<p>Example:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="example-1.html#cb95-1" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">&lt;-</span> <span class="fu">c</span>(v1, v2); v4</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;    &quot;0.2&quot;  &quot;0.3&quot;  &quot;2&quot;    &quot;2.8&quot;  &quot;R&quot;    &quot;IPEA&quot; &quot;2020&quot; &quot;R&quot;    &quot;IPEA&quot; &quot;2020&quot;</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="example-1.html#cb97-1" aria-hidden="true" tabindex="-1"></a>v5 <span class="ot">&lt;-</span> <span class="fu">c</span>(v1, v3); v5</span></code></pre></div>
<pre><code>##  [1] 1.0 0.2 0.3 2.0 2.8 1.0 0.0 0.0 1.0 1.0 0.0 0.0 1.0</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="example-1.html#cb99-1" aria-hidden="true" tabindex="-1"></a>v6 <span class="ot">&lt;-</span> <span class="fu">c</span>(v2, v3); v6</span></code></pre></div>
<pre><code>##  [1] &quot;R&quot;     &quot;IPEA&quot;  &quot;2020&quot;  &quot;R&quot;     &quot;IPEA&quot;  &quot;2020&quot;  &quot;TRUE&quot;  &quot;FALSE&quot; &quot;FALSE&quot; &quot;TRUE&quot;  &quot;TRUE&quot;  &quot;FALSE&quot;
## [13] &quot;FALSE&quot; &quot;TRUE&quot;</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="example-1.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1]  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10</code></pre>
<p>Use <code>typeof(vector_name)</code> to confirm the types of the vectors you created.</p>
<div id="other-ways-to-create-a-vector" class="section level5 hasAnchor" number="4.1.1.1.1">
<h5><span class="header-section-number">4.1.1.1.1</span> Other Ways to Create a Vector<a href="example-1.html#other-ways-to-create-a-vector" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Useful functions for vector creation:</p>
<ul>
<li><code>:</code> e.g., <code>1:100</code> creates the sequence 1 to 100.</li>
<li><code>seq()</code> e.g., <code>seq(-10, -1)</code> creates the sequence −10 to −1.</li>
<li><code>rep()</code> e.g., <code>rep("IPEA", 10)</code> creates a vector with the string <code>"IPEA"</code> repeated 10 times.</li>
</ul>
</div>
</div>
<div id="how-to-extract-elements-from-a-vector" class="section level4 hasAnchor" number="4.1.1.2">
<h4><span class="header-section-number">4.1.1.2</span> How to Extract Elements from a Vector<a href="example-1.html#how-to-extract-elements-from-a-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Extract elements using brackets: <code>vector_name[position]</code>. You can provide a single position, a set of positions, or a range of positions:</p>
<p><strong>Single element:</strong></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="example-1.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3rd element of v1</span></span>
<span id="cb103-2"><a href="example-1.html#cb103-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 0.3</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="example-1.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st element of v2</span></span>
<span id="cb105-2"><a href="example-1.html#cb105-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;R&quot;</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="example-1.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5th element of v3</span></span>
<span id="cb107-2"><a href="example-1.html#cb107-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Multiple elements:</strong></p>
<p>Here you’ll put a <strong>vector inside a vector</strong>. The vector inside the brackets <code>[]</code> contains the indices to extract. Remember to create that index vector with <code>c()</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="example-1.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st and 3rd elements of v1</span></span>
<span id="cb109-2"><a href="example-1.html#cb109-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [1] 1.0 0.3</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="example-1.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb111-2"><a href="example-1.html#cb111-2" aria-hidden="true" tabindex="-1"></a>pos1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb111-3"><a href="example-1.html#cb111-3" aria-hidden="true" tabindex="-1"></a>v1[pos1]</span></code></pre></div>
<pre><code>## [1] 1.0 0.3</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="example-1.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2nd and 4th elements of v2</span></span>
<span id="cb113-2"><a href="example-1.html#cb113-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;IPEA&quot; &quot;R&quot;</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="example-1.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb115-2"><a href="example-1.html#cb115-2" aria-hidden="true" tabindex="-1"></a>pos2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb115-3"><a href="example-1.html#cb115-3" aria-hidden="true" tabindex="-1"></a>v2[pos2]</span></code></pre></div>
<pre><code>## [1] &quot;IPEA&quot; &quot;R&quot;</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="example-1.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st, 2nd, and 5th elements of v3</span></span>
<span id="cb117-2"><a href="example-1.html#cb117-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="example-1.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb119-2"><a href="example-1.html#cb119-2" aria-hidden="true" tabindex="-1"></a>pos3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb119-3"><a href="example-1.html#cb119-3" aria-hidden="true" tabindex="-1"></a>v3[pos3]</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<p><strong>Ranges:</strong></p>
<p>Again, vector inside vector—but now using <code>:</code> to create a sequence, or <code>seq(a, b)</code>:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="example-1.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st to 3rd elements of v1</span></span>
<span id="cb121-2"><a href="example-1.html#cb121-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 1.0 0.2 0.3</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="example-1.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb123-2"><a href="example-1.html#cb123-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [1] 1.0 0.2 0.3</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="example-1.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2nd to 5th elements of v2</span></span>
<span id="cb125-2"><a href="example-1.html#cb125-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] &quot;IPEA&quot; &quot;2020&quot; &quot;R&quot;    &quot;IPEA&quot;</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="example-1.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb127-2"><a href="example-1.html#cb127-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;IPEA&quot; &quot;2020&quot; &quot;R&quot;    &quot;IPEA&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="example-1.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3rd to 6th elements of v3</span></span>
<span id="cb129-2"><a href="example-1.html#cb129-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="example-1.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb131-2"><a href="example-1.html#cb131-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="fu">seq</span>(<span class="dv">3</span>, <span class="dv">6</span>)]</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE</code></pre>
</div>
<div id="how-to-get-a-vectors-length" class="section level4 hasAnchor" number="4.1.1.3">
<h4><span class="header-section-number">4.1.1.3</span> How to Get a Vector’s Length<a href="example-1.html#how-to-get-a-vectors-length" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>TIP:</strong> Use <code>length(vector_name)</code>:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="example-1.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(v6)</span></code></pre></div>
<pre><code>## [1] 14</code></pre>
</div>
<div id="how-to-modify-elements-of-a-vector" class="section level4 hasAnchor" number="4.1.1.4">
<h4><span class="header-section-number">4.1.1.4</span> How to Modify Elements of a Vector<a href="example-1.html#how-to-modify-elements-of-a-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once you understand indexing, you can replace elements using bracket indexing plus assignment.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="example-1.html#cb135-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fl">450.78</span></span>
<span id="cb135-2"><a href="example-1.html#cb135-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-3"><a href="example-1.html#cb135-3" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">2021</span></span>
<span id="cb135-4"><a href="example-1.html#cb135-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-5"><a href="example-1.html#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="co"># the replacement vector must match the indexed length</span></span>
<span id="cb135-6"><a href="example-1.html#cb135-6" aria-hidden="true" tabindex="-1"></a>v3[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
<div id="data-frames" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Data Frames<a href="example-1.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data frames are R’s <strong>tables</strong> and one of the objects you’ll use most. A data frame has rows and columns. Think of columns as vectors where each position indicates a row. A data frame is a collection of vectors that <strong>must</strong> have the same length, though they can be different types (numeric, character, etc.).</p>
<div id="how-to-create-a-data-frame" class="section level4 hasAnchor" number="4.1.2.1">
<h4><span class="header-section-number">4.1.2.1</span> How to Create a Data Frame<a href="example-1.html#how-to-create-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We create a data frame with <code>data.frame()</code>, though more often data frames are created by <strong>reading data</strong> from files (see Module <span class="citation">@ref</span>(m2)).</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="example-1.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: all vectors must have the same length</span></span>
<span id="cb136-2"><a href="example-1.html#cb136-2" aria-hidden="true" tabindex="-1"></a>v6 <span class="ot">&lt;-</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">15</span></span>
<span id="cb136-3"><a href="example-1.html#cb136-3" aria-hidden="true" tabindex="-1"></a>v7 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.3</span>, <span class="fl">0.7</span>, <span class="at">by =</span> <span class="fl">0.1</span>)</span>
<span id="cb136-4"><a href="example-1.html#cb136-4" aria-hidden="true" tabindex="-1"></a>v8 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;IPEA&quot;</span>, <span class="dv">5</span>)</span>
<span id="cb136-5"><a href="example-1.html#cb136-5" aria-hidden="true" tabindex="-1"></a>v9 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">length.out =</span> <span class="dv">5</span>)</span>
<span id="cb136-6"><a href="example-1.html#cb136-6" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(v6, v7, v8, v9)</span>
<span id="cb136-7"><a href="example-1.html#cb136-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-8"><a href="example-1.html#cb136-8" aria-hidden="true" tabindex="-1"></a>df1</span></code></pre></div>
<pre><code>##   v6  v7   v8    v9
## 1 11 0.3 IPEA  TRUE
## 2 12 0.4 IPEA FALSE
## 3 13 0.5 IPEA  TRUE
## 4 14 0.6 IPEA FALSE
## 5 15 0.7 IPEA  TRUE</code></pre>
<p><strong>TIP:</strong> There are other useful arguments; see the function’s structure and help page:</p>
<pre class="{r,"><code>data.frame
help(&quot;data.frame&quot;)</code></pre>
<p>You can name the columns during creation:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="example-1.html#cb139-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> v6, <span class="at">col2 =</span> v7, <span class="at">col3 =</span> v8, <span class="at">col4 =</span> v9)</span>
<span id="cb139-2"><a href="example-1.html#cb139-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-3"><a href="example-1.html#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb139-4"><a href="example-1.html#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="co"># df1 &lt;- data.frame(&quot;col1&quot; = v6, &quot;col2&quot; = v7, &quot;col3&quot; = v8, &quot;col4&quot; = v9)</span></span>
<span id="cb139-5"><a href="example-1.html#cb139-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-6"><a href="example-1.html#cb139-6" aria-hidden="true" tabindex="-1"></a>df1</span></code></pre></div>
<pre><code>##   col1 col2 col3  col4
## 1   11  0.3 IPEA  TRUE
## 2   12  0.4 IPEA FALSE
## 3   13  0.5 IPEA  TRUE
## 4   14  0.6 IPEA FALSE
## 5   15  0.7 IPEA  TRUE</code></pre>
<p>You’ll notice a leftmost column with row numbers or names—these are the <code>rownames</code>.</p>
<p><strong>TIP:</strong> To check a data frame’s <strong>structure</strong> (types of each column), use <code>str(data_frame_name)</code>:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="example-1.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ col1: int  11 12 13 14 15
##  $ col2: num  0.3 0.4 0.5 0.6 0.7
##  $ col3: chr  &quot;IPEA&quot; &quot;IPEA&quot; &quot;IPEA&quot; &quot;IPEA&quot; ...
##  $ col4: logi  TRUE FALSE TRUE FALSE TRUE</code></pre>
<p>Note that column 2 <code>col2</code> was treated as a <strong>factor</strong> instead of <strong>character</strong>. A factor is R’s memory-efficient representation for categorical variables, internally mapping categories to integers. To ensure <code>col2</code> is <strong>character</strong>, set <code>stringsAsFactors = FALSE</code> when creating the data frame. Keep this in mind when reading external data into data frames as well.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="example-1.html#cb143-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> v6, <span class="at">col2 =</span> v7, <span class="at">col3 =</span> v8, <span class="at">col4 =</span> v9, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb143-2"><a href="example-1.html#cb143-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-3"><a href="example-1.html#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ col1: int  11 12 13 14 15
##  $ col2: num  0.3 0.4 0.5 0.6 0.7
##  $ col3: chr  &quot;IPEA&quot; &quot;IPEA&quot; &quot;IPEA&quot; &quot;IPEA&quot; ...
##  $ col4: logi  TRUE FALSE TRUE FALSE TRUE</code></pre>
<p><strong>TIP:</strong> Since R <strong>4.0.0</strong>, <code>data.frame()</code> no longer converts strings to factors by default; you don’t need <code>stringsAsFactors = FALSE</code>.</p>
<p>Unlike one‑dimensional vectors, data frames are <strong>two‑dimensional</strong>. To get their dimensions:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="example-1.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rows and columns</span></span>
<span id="cb145-2"><a href="example-1.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df1)</span></code></pre></div>
<pre><code>## [1] 5 4</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="example-1.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows</span></span>
<span id="cb147-2"><a href="example-1.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df1)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="example-1.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of columns</span></span>
<span id="cb149-2"><a href="example-1.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(df1)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
</div>
<div id="how-to-subset-a-data-frame" class="section level4 hasAnchor" number="4.1.2.2">
<h4><span class="header-section-number">4.1.2.2</span> How to Subset a Data Frame<a href="example-1.html#how-to-subset-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Use bracket indexing <code>[]</code> just like vectors, but now with two dimensions separated by a comma: <code>df[row_index, column_index]</code>.</p>
<p>It’s like Battleship: the values you pass indicate rows and columns.</p>
<p><strong>TIP:</strong> To select entire <strong>rows</strong>, leave the column index blank: <code>df[row_X, ]</code>. To select entire <strong>columns</strong>, leave the row index blank: <code>df[, column_Y]</code>.</p>
<p><strong>Rows:</strong></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="example-1.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single row</span></span>
<span id="cb151-2"><a href="example-1.html#cb151-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##   col1 col2 col3 col4
## 3   13  0.5 IPEA TRUE</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="example-1.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specific rows (note the comma placement)</span></span>
<span id="cb153-2"><a href="example-1.html#cb153-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>), ]</span></code></pre></div>
<pre><code>##   col1 col2 col3  col4
## 1   11  0.3 IPEA  TRUE
## 2   12  0.4 IPEA FALSE
## 5   15  0.7 IPEA  TRUE</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="example-1.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># row range</span></span>
<span id="cb155-2"><a href="example-1.html#cb155-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, ]</span></code></pre></div>
<pre><code>##   col1 col2 col3  col4
## 3   13  0.5 IPEA  TRUE
## 4   14  0.6 IPEA FALSE
## 5   15  0.7 IPEA  TRUE</code></pre>
<p><strong>Columns:</strong></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="example-1.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single column</span></span>
<span id="cb157-2"><a href="example-1.html#cb157-2" aria-hidden="true" tabindex="-1"></a>df1[, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 0.3 0.4 0.5 0.6 0.7</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="example-1.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specific columns</span></span>
<span id="cb159-2"><a href="example-1.html#cb159-2" aria-hidden="true" tabindex="-1"></a>df1[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>##   col2 col3
## 1  0.3 IPEA
## 2  0.4 IPEA
## 3  0.5 IPEA
## 4  0.6 IPEA
## 5  0.7 IPEA</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="example-1.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># column range</span></span>
<span id="cb161-2"><a href="example-1.html#cb161-2" aria-hidden="true" tabindex="-1"></a>df1[, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##   col2 col3  col4
## 1  0.3 IPEA  TRUE
## 2  0.4 IPEA FALSE
## 3  0.5 IPEA  TRUE
## 4  0.6 IPEA FALSE
## 5  0.7 IPEA  TRUE</code></pre>
<p><strong>Elements (row x column):</strong></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="example-1.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single element: row 2, column 3</span></span>
<span id="cb163-2"><a href="example-1.html#cb163-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;IPEA&quot;</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="example-1.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsets: rows 2 &amp; 5 vs. columns 1 &amp; 4</span></span>
<span id="cb165-2"><a href="example-1.html#cb165-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>##   col1  col4
## 2   12 FALSE
## 5   15  TRUE</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="example-1.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsets: rows 1–3 vs. columns 2–4</span></span>
<span id="cb167-2"><a href="example-1.html#cb167-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##   col2 col3  col4
## 1  0.3 IPEA  TRUE
## 2  0.4 IPEA FALSE
## 3  0.5 IPEA  TRUE</code></pre>
<p><strong>TIP:</strong> You can mix approaches, e.g., <code>df1[2, 2:4]</code>.</p>
</div>
<div id="other-ways-to-index-data-frame-columns" class="section level4 hasAnchor" number="4.1.2.3">
<h4><span class="header-section-number">4.1.2.3</span> Other Ways to Index Data Frame Columns<a href="example-1.html#other-ways-to-index-data-frame-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Two alternatives use <strong>column names</strong> instead of indices.</p>
<p><strong>Alternative 1:</strong></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="example-1.html#cb169-1" aria-hidden="true" tabindex="-1"></a>df1[, <span class="st">&quot;col2&quot;</span>]</span></code></pre></div>
<pre><code>## [1] 0.3 0.4 0.5 0.6 0.7</code></pre>
<p><strong>Alternative 2:</strong></p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="example-1.html#cb171-1" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>col3</span></code></pre></div>
<pre><code>## [1] &quot;IPEA&quot; &quot;IPEA&quot; &quot;IPEA&quot; &quot;IPEA&quot; &quot;IPEA&quot;</code></pre>
<p>Note that the output prints horizontally because a single extracted column is a vector, and vectors print on one line.</p>
<hr />
</div>
</div>
<div id="module-references" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Module References<a href="example-1.html#module-references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><em>Estatística Computacional 2</em> (2015). Lecture notes. Departamento de Estatística, UnB, 1st semester, 2015.</li>
<li>Nyffenegger, R. (2020). <em>R: a computer language for statistical data analysis</em>. URL <a href="https://renenyffenegger.ch/notes/development/languages/R/">https://renenyffenegger.ch/notes/development/languages/R/</a>.</li>
<li>Wickham, H. (2014). <em>Advanced R</em>. Chapman and Hall/CRC. 476 pages. Available at: <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.</li>
<li>R Core Team (2020). <em>R: A language and environment for statistical computing</em>. R Foundation for Statistical Computing, Vienna, Austria. URL <a href="http://www.R-project.org/">http://www.R-project.org/</a>.</li>
</ul>
</div>
<div id="exercises" class="section level3 hasAnchor" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Exercises<a href="example-1.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>1) Vectors</strong></p>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Create two numeric vectors (A and B) of length 10 with random numbers of your choice.</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Multiply all items of vector A by $$ and items of vector B by $$.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Create a new vector (C) resulting from $$, where $|A|$ is the length of A.</li>
</ol></li>
<li><ol start="4" style="list-style-type: lower-alpha">
<li>Create a new logical vector (D) indicating which values of A are greater than the corresponding values of B.</li>
</ol></li>
<li><ol start="5" style="list-style-type: lower-alpha">
<li>Append 3 names of your choice to the end of each vector. Do the vectors change type?</li>
</ol></li>
</ul>
<p><strong>2) Data Frames</strong></p>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Create a data frame with 10 rows and 5 columns, with at least 3 columns of different types, including at least two numeric columns.</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Create a 6th column equal to the sum of two numeric columns in the data frame.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Choose two numeric columns A and B, and create a 7th column equal to $$, where $|A|$ is the length of column A.</li>
</ol></li>
</ul>

<pre class="rmd"><code># Module I {#m1}

## First Steps

### Brief History

**R** is a language and environment for statistical programming that runs on various *NIX platforms, Windows and MacOS ([R-project.org](https://www.r-project.org)), and can be downloaded and distributed freely according to the General Public License (GPL).

The origin of the name **R** goes back to the **S** language, developed by John Chambers between 1975 and 76 at Bell Labs (former AT&amp;T and current Lucent Technologies) – the same place where important innovations in computing originated, such as the UNIX operating system, the C programming language, transistors, among others.

In contrast to the commercial implementation of the S language – **S-PLUS**, Ross Ihaka and Robert Gentleman, from the Department of Statistics at Auckland - New Zealand created, in 1995, R as a free and open-source alternative to the S language. The name R itself comes from a play on the S language and the initials of the authors&#39; names, Ross and Robert.

&lt;div class=&quot;figure&quot;&gt;

```{=html}
&lt;div class=&quot;leaflet html-widget html-fill-item&quot; id=&quot;htmlwidget-e20eef6003530f6898bd&quot; style=&quot;width:672px;height:480px;&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;application/json&quot; data-for=&quot;htmlwidget-e20eef6003530f6898bd&quot;&gt;{&quot;x&quot;:{&quot;options&quot;:{&quot;crs&quot;:{&quot;crsClass&quot;:&quot;L.CRS.EPSG3857&quot;,&quot;code&quot;:null,&quot;proj4def&quot;:null,&quot;projectedBounds&quot;:null,&quot;options&quot;:{}}},&quot;calls&quot;:[{&quot;method&quot;:&quot;addTiles&quot;,&quot;args&quot;:[&quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,null,null,{&quot;minZoom&quot;:0,&quot;maxZoom&quot;:18,&quot;tileSize&quot;:256,&quot;subdomains&quot;:&quot;abc&quot;,&quot;errorTileUrl&quot;:&quot;&quot;,&quot;tms&quot;:false,&quot;noWrap&quot;:false,&quot;zoomOffset&quot;:0,&quot;zoomReverse&quot;:false,&quot;opacity&quot;:1,&quot;zIndex&quot;:1,&quot;detectRetina&quot;:false,&quot;attribution&quot;:&quot;&amp;copy; &lt;a href=\&quot;https://openstreetmap.org/copyright/\&quot;&gt;OpenStreetMap&lt;\/a&gt;,  &lt;a href=\&quot;https://opendatacommons.org/licenses/odbl/\&quot;&gt;ODbL&lt;\/a&gt;&quot;}]},{&quot;method&quot;:&quot;addMarkers&quot;,&quot;args&quot;:[-36.852,174.768,null,null,null,{&quot;interactive&quot;:true,&quot;draggable&quot;:false,&quot;keyboard&quot;:true,&quot;title&quot;:&quot;&quot;,&quot;alt&quot;:&quot;&quot;,&quot;zIndexOffset&quot;:0,&quot;opacity&quot;:1,&quot;riseOnHover&quot;:false,&quot;riseOffset&quot;:250},&quot;Where R was born!!&quot;,null,null,null,null,{&quot;interactive&quot;:false,&quot;permanent&quot;:false,&quot;direction&quot;:&quot;auto&quot;,&quot;opacity&quot;:1,&quot;offset&quot;:[0,0],&quot;textsize&quot;:&quot;10px&quot;,&quot;textOnly&quot;:false,&quot;className&quot;:&quot;&quot;,&quot;sticky&quot;:true},null]}],&quot;limits&quot;:{&quot;lat&quot;:[-36.852,-36.852],&quot;lng&quot;:[174.768,174.768]}},&quot;evals&quot;:[],&quot;jsHooks&quot;:[]}&lt;/script&gt;</code></pre>
<p class="caption">
Figure 4.1: Birthplace of R indicated with the <code>leaflet</code> package. Click on the blue pin
</p>
</div>
<hr />
</div>
<div id="installing-r" class="section level3 hasAnchor" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Installing <strong>R</strong><a href="example-1.html#installing-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Installing the R environment is easy to do on any operating system. On Windows, the steps are:</p>
<ul>
<li>1 Access the website <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>.</li>
<li>2 Click on download R or CRAN mirror.</li>
<li>3 Choose the repository (Comprehensive R Archive Network - CRAN) of your preference.</li>
<li>4 Click on Download R for Windows.</li>
<li>5 Click on base.</li>
<li>6 Download the installation executable by clicking on Download R X.X.X for Windows.</li>
<li>7 Run the downloaded file to install the software.</li>
</ul>
<p>The default R window on Windows is quite simple. You can see it’s divided into a larger window, called R GUI (R Graphical User Interface) – that is, the R graphical interface; and an R Console window. In this last window, when starting R, there’s a description about the version used and some tips about the language. The <code>&gt;</code> sign indicates the command line or prompt, which is where you type the commands to be run by the interpreter.</p>
<div class="figure">
<img src="fig/R_GUI.png" alt="" />
<p class="caption">R Graphical Interface on Windows</p>
</div>
<p>Here, it’s worth making a distinction between the R language and some other programming languages: the R language is an interpreted language, that is, code execution occurs together with code analysis, as if it were <em>on-demand</em>. You type the code, give the execution command and immediately the interpreter gathers the commands, translates them to machine language (or low-level language) and transfers them to the processor for execution. Another example of an interpreted language would be Python.</p>
<p>In compiled languages, code analysis occurs in only one phase – compilation – when data is analyzed and source code is transformed into target code. The target code usually stays separate, in an executable file, which will be executed at a later time.</p>
</div>
<div id="installing-rstudio" class="section level3 hasAnchor" number="4.1.6">
<h3><span class="header-section-number">4.1.6</span> Installing <strong>RStudio</strong><a href="example-1.html#installing-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Considering that R’s original graphical interface is quite modest, there are several Integrated Development Environments (IDEs) that gather various tools to support programming and data analysis, with the goal of making users’ lives easier. The most used IDE for the R language is RStudio.</p>
<p>See below steps to install RStudio on Windows:</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>Access the website <a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a>.</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>Click on DOWNLOAD.</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Choose the FREE version and click on DOWNLOAD RStudio for Windows.</li>
</ol></li>
</ul>
<p>As you can see, RStudio’s graphical interface is more “friendly” than R’s <em>default</em>. The window is divided into three parts: one for <em>Console</em>, another for <em>Environment, History and Connections</em> and another for <em>Files, Plots, Packages, Help and Viewer</em>. Other tabs can be added to the <em>Environment, History and Connections</em> panel, depending on the type of work you’re developing in R, such as the <em>Presentations</em> tab when producing slides or the <em>Build</em> tab when building and testing a package. The names in general are self-explanatory, but we’ll talk more about them in the next modules.</p>
<div class="figure">
<img src="fig/RStudio_layout1.png" alt="" />
<p class="caption">RStudio Interface</p>
</div>
<hr />
</div>
<div id="installing-rtools-on-windows" class="section level3 hasAnchor" number="4.1.7">
<h3><span class="header-section-number">4.1.7</span> Installing <strong>RTools</strong> on Windows<a href="example-1.html#installing-rtools-on-windows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Later on, we’ll see how to install packages in R, which are nothing more than modules that can be added to your standard R installation. It happens that some of these modules have parts written in other languages, such as C++ and Fortran, which are compiled languages. By <em>default</em>, Windows doesn’t come with compilers that can perform this task, unlike Linux and Mac. To work around this problem on Windows, we install <strong>RTools</strong>.</p>
<p>The Windows RTools application, also developed by the R Foundation, contains compilers and other tools necessary to install R packages that require compilation.</p>
<p>Installation is quite simple:</p>
<ul>
<li>Access <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a></li>
<li>Download the recommended executable, usually marked in green with the observation <em>recommended</em>;</li>
<li>Run the application keeping the default options suggested during installation.</li>
</ul>
</div>
<div id="basic-functionalities-of-r-and-rstudio" class="section level3 hasAnchor" number="4.1.8">
<h3><span class="header-section-number">4.1.8</span> Basic Functionalities of R and RStudio<a href="example-1.html#basic-functionalities-of-r-and-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="r-as-a-calculator" class="section level4 hasAnchor" number="4.1.8.1">
<h4><span class="header-section-number">4.1.8.1</span> R as a Calculator<a href="example-1.html#r-as-a-calculator" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The most basic way to use R is as a calculator. Basic arithmetic operations are performed with the following operators in R:</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+</td>
<td>addition</td>
</tr>
<tr class="even">
<td>-</td>
<td>subtraction</td>
</tr>
<tr class="odd">
<td>*</td>
<td>multiplication</td>
</tr>
<tr class="even">
<td>/</td>
<td>division</td>
</tr>
<tr class="odd">
<td>^ or **</td>
<td>exponentiation</td>
</tr>
<tr class="even">
<td>x%%y</td>
<td>modulo remainder</td>
</tr>
<tr class="odd">
<td>x%/%y</td>
<td>integer quotient</td>
</tr>
</tbody>
</table>
<p>Let’s see some examples, typing in our console, right next to <code>&gt;</code>, the following operations:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="example-1.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">+</span><span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="example-1.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4-2</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="example-1.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span><span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="example-1.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">/</span><span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="example-1.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="example-1.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">**</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="example-1.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">%%</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="example-1.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">%/%</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Notice that next to all answers, <code>[1]</code> appeared. The <em>brackets</em> and the number <em>1</em> inside indicate that in that line is the first element of the resulting object. This happens because R, whenever possible, works in a vectorized way. The value inside <code>[ ]</code> indicates the position within the answer vector of the number right after it (result). Since in each operation, the answer is unique, all values were located in the first position of our answer <em>vector</em>.</p>
<p>This will be very useful when you want, for example, to apply a mathematical operation or any other transformation to all entries in a column in a table and print the result in the console. In the <em>output</em>, R will break the result into some lines and these numbers in brackets will help us identify which position in the answer vector the first number of each line in the output printed in the console belongs to.</p>
<p>Try for example:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="example-1.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>##   [1]   2   4   6   8  10  12  14  16  18  20  22  24  26  28  30  32  34  36  38  40  42  44  46  48
##  [25]  50  52  54  56  58  60  62  64  66  68  70  72  74  76  78  80  82  84  86  88  90  92  94  96
##  [49]  98 100 102 104 106 108 110 112 114 116 118 120 122 124 126 128 130 132 134 136 138 140 142 144
##  [73] 146 148 150 152 154 156 158 160 162 164 166 168 170 172 174 176 178 180 182 184 186 188 190 192
##  [97] 194 196 198 200</code></pre>
<p>In our example, R chose to break the multiplication of 100 numbers into groups of 17 numbers in the first 4 lines and a group of 15 values in the last. In the first line of our <em>output</em>, <strong>2</strong> is the element at position 1 (<code>[1]</code>) of the answer vector; in the second line, the number <strong>36</strong> is the element that refers to position 18 (<code>[18]</code>) of the answer vector and so on, until the last line that starts at element at position 86.</p>
<div id="prioritization-and-hierarchy-of-operations" class="section level5 hasAnchor" number="4.1.8.1.1">
<h5><span class="header-section-number">4.1.8.1.1</span> Prioritization and Hierarchy of Operations<a href="example-1.html#prioritization-and-hierarchy-of-operations" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Just like in MS Excel, parentheses will also be very useful for performing both arithmetic operations and comparisons and sequential execution of functions in R. With them, we can indicate the “priority” or order in which calculations/computations should be performed. Try the example below:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="example-1.html#cb192-1" aria-hidden="true" tabindex="-1"></a>((<span class="dv">1007</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="dv">8</span>)<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 15876</code></pre>
<p>Note that the operation is done from the inside out. First the interpreter executes <code>(1007+1)</code>, then divides this result by 8 (<code>/8</code>), to only then square everything (<code>^2</code>).</p>
<p>Without parentheses, the result would be quite different:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="example-1.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1007</span><span class="sc">+</span><span class="dv">1</span><span class="sc">/</span><span class="dv">8</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 1007.016</code></pre>
</div>
</div>
<div id="logical-operators-1" class="section level4 hasAnchor" number="4.1.8.2">
<h4><span class="header-section-number">4.1.8.2</span> Logical Operators<a href="example-1.html#logical-operators-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can also perform logical comparisons in R. Below are some of the logical operators that will be important in the first modules of the course. Others will be presented in the remaining modules:</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&gt;</td>
<td>greater than</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td>&lt;</td>
<td>less than</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>less than or equal to</td>
</tr>
<tr class="odd">
<td>==</td>
<td>equal to</td>
</tr>
<tr class="even">
<td>!=</td>
<td>different from</td>
</tr>
<tr class="odd">
<td>x&amp;&amp;y</td>
<td>x AND y</td>
</tr>
<tr class="even">
<td>x||y</td>
<td>x OR y</td>
</tr>
</tbody>
</table>
<p>Let’s see some examples:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="example-1.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="example-1.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1009</span> <span class="sc">&gt;=</span> <span class="dv">1009</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="example-1.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;</span> <span class="fl">0.7</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="example-1.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;=</span> <span class="fl">3.0001</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="example-1.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span> <span class="sc">==</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="example-1.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4353.789</span> <span class="sc">==</span> <span class="fl">4353.7891</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="example-1.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span> <span class="sc">!=</span> <span class="dv">13</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="example-1.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4353.789</span> <span class="sc">!=</span> <span class="fl">4353.7891</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="example-1.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;&amp;</span> <span class="dv">7</span> <span class="sc">!=</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="example-1.html#cb214-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">&amp;&amp;</span> (<span class="dv">7</span> <span class="sc">!=</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="example-1.html#cb216-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span> <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">||</span> (<span class="dv">7</span> <span class="sc">&lt;=</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="example-1.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4353.789</span> <span class="sc">!=</span> <span class="fl">4353.7891</span> <span class="sc">||</span> <span class="dv">7</span> <span class="sc">&gt;=</span> <span class="fl">0.7</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Note that the answers are, in these examples, always a logical vector: <code>TRUE</code> or <code>FALSE</code>. Later on, we’ll see the other types of vectors existing in R.</p>
</div>
<div id="saving-your-code-in-a-script-1" class="section level4 hasAnchor" number="4.1.8.3">
<h4><span class="header-section-number">4.1.8.3</span> Saving your code in a script<a href="example-1.html#saving-your-code-in-a-script-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In RStudio, you can add a small panel, which will make your work even easier. This is the <em>source pane</em>, a panel where you can create scripts to store multiple lines of code, so you can execute them all at once or line-by-line. If you want to save the calculations and logical comparisons you did earlier in a file so you can execute them later, you can do it through a script. In the script window, you can keep a trail of all commands used.</p>
<p>This is important because it optimizes the use of R by allowing running the same code for different files and different occasions, instead of having to redo all the programming every time our input data changes.
You can open several script windows, side by side, and navigate between them, as you do with browser tabs. In this course, we’ll do all classes and exercises using script files.</p>
<p>To add the script window (<em>source pane</em>), just create a new file by clicking on <img src="fig/add_icon.png" />, just below <em>File</em>, and then on <img src="fig/script_file.png" />. Our RStudio window should look like the following figure.</p>
<p><img src="fig/RStudio_layout2.png" /></p>
<p>Let’s add all the lines of code we executed earlier to our newly created script.</p>
<p><img src="fig/script_filled.png" /></p>
<p><strong>TIP:</strong> You can insert comments in your scripts as a way to document the steps of your work for future reference. In R, comments are included with the <code>#</code> character.</p>
<p>To save the script file, just press <code>Ctrl+S</code> or click on the single diskette in the menu bar. This file will be saved with extension <em>.R</em>, indicating it’s a file with R language code.</p>
<p><strong>TIP:</strong> We suggest you create and save one or more scripts for each class/section. This will help you organize your material and recover important concepts and examples during and after the course.</p>
<p>You can execute all lines of a script or choose to execute only a few lines or specific parts of this code. Select the part you want to execute and press <code>Ctrl+Enter</code>. You’ll see, in the console (window below the script), your code being executed. An alternative to <code>Ctrl+Enter</code> is to select the part or line(s) and click on <img src="fig/run_icon.png" />.</p>
<p>Most of the time, our code can take considerable time to be executed completely. To know if the interpreter is still busy executing your code, just look at the right corner of the <em>Console</em> panel. If you see the symbol <img src="fig/stop_icon.png" />, the interpreter is still busy executing the last sequence of commands. The <code>"&gt;"</code> symbol will also not appear free in the console. You can try to stop execution by clicking on the <em>stop</em> icon. However, it won’t always be possible to interrupt it.</p>
<p>Try generating a normal distribution with 100 million entries:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="example-1.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100000000</span>)</span></code></pre></div>
<p><strong>TIP:</strong> It can also happen that you look at the console and don’t see the <code>&gt;</code> symbol, without the <em>stop</em> icon appearing in the right corner of the panel. This usually happens when we forget to close some parenthesis, brace or bracket opened at the beginning of a code line. Do a test:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="example-1.html#cb221-1" aria-hidden="true" tabindex="-1"></a>((<span class="dv">1007</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="dv">8</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<p>The console will be waiting for you to complete the code. You have two options: add the missing parenthesis (if possible) directly in the console, or press <code>Esc</code>, fix the code and execute it again.</p>
</div>
<div id="environment-tab" class="section level4 hasAnchor" number="4.1.8.4">
<h4><span class="header-section-number">4.1.8.4</span> <em>Environment</em> Tab<a href="example-1.html#environment-tab" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>All objects that are created in your R/RStudio session will be automatically stored in what we call the <em>Global Environment</em>, represented by the <em>Environment</em> tab in RStudio.</p>
<div class="figure">
<img src="fig/aba_env1.png" alt="" />
<p class="caption">Environment Tab</p>
</div>
<p>Note that so far, our <em>Environment</em> is empty. This is because we haven’t “saved” any objects or results from the operations we performed earlier.</p>
<div id="object-assignment-in-r" class="section level5 hasAnchor" number="4.1.8.4.1">
<h5><span class="header-section-number">4.1.8.4.1</span> Object Assignment in R<a href="example-1.html#object-assignment-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>To create an object in R, whether to store a specific value or the result of an operation, we use R’s characteristic assignment sign <code>&lt;-</code>, i.e. <code>a &lt;- b</code> (read <em>a receives the value of b</em>). You can also use the reverse direction: <code>b -&gt; a</code> (<em>a receives the value of b</em>), or even the equals sign <code>=</code>. These alternatives are less conventional. We suggest using <code>a &lt;- b</code> so as not to confuse object creation with passing parameters in function arguments later on.</p>
<p>To create an object/variable <strong>x</strong> that contains the value <strong>2</strong>, execute:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="example-1.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># x receives 2</span></span>
<span id="cb222-2"><a href="example-1.html#cb222-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb222-3"><a href="example-1.html#cb222-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-4"><a href="example-1.html#cb222-4" aria-hidden="true" tabindex="-1"></a><span class="co"># to see the value of x:</span></span>
<span id="cb222-5"><a href="example-1.html#cb222-5" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p><strong>TIP:</strong> The shortcut for the assignment operator <code>&lt;-</code> is <code>Alt+-</code>.</p>
<p>Note now that our <em>Environment</em> tab is no longer empty:</p>
<p><img src="fig/aba_env2.png" /></p>
<p>Now let’s save the results of some arithmetic operations and logical comparisons:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="example-1.html#cb224-1" aria-hidden="true" tabindex="-1"></a>out1 <span class="ot">&lt;-</span> <span class="dv">789</span><span class="sc">/</span><span class="fl">34.5</span></span>
<span id="cb224-2"><a href="example-1.html#cb224-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-3"><a href="example-1.html#cb224-3" aria-hidden="true" tabindex="-1"></a>out2 <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">^</span><span class="dv">2</span></span>
<span id="cb224-4"><a href="example-1.html#cb224-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-5"><a href="example-1.html#cb224-5" aria-hidden="true" tabindex="-1"></a>out3 <span class="ot">&lt;-</span> out1 <span class="sc">&gt;</span> out2</span></code></pre></div>
<p>Let’s see how our <em>Environment</em> looks with the new objects created:</p>
<p><img src="fig/aba_env3.png" /></p>
<p>R is quite liberal regarding its object naming policy. The prohibitions are only the following:</p>
<ul>
<li>a name cannot start with a digit, e.g.: <code>1out &lt;- 2</code>;</li>
<li>a name cannot contain only digits, e.g.: <code>01 &lt;- 2</code>;</li>
<li>a name cannot contain special characters, <strong>except</strong> <code>.</code> or <code>_</code>, e.g.: <code>out#01 &lt;- 2</code></li>
<li>a name cannot be identical to a word used as a <em>token</em> of the R language, e.g.: <code>TRUE &lt;- 2</code>; <code>for &lt;- 2</code>, etc.</li>
</ul>
<p><strong>TIP:</strong> The R language is <em>case sensitive</em>, that is, it distinguishes between uppercase and lowercase letters in a name. Therefore <code>Object_Name != object_name</code>!</p>
</div>
</div>
<div id="saving-environment-objects" class="section level4 hasAnchor" number="4.1.8.5">
<h4><span class="header-section-number">4.1.8.5</span> Saving Environment objects<a href="example-1.html#saving-environment-objects" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>What if you want to save these objects created in your R session, to continue working on them later? It’s possible to do it and it’s simple.</p>
<p>To save all objects from your Environment, click on <code>Session</code> and <code>Save Workspace As...</code> in RStudio. A file with extension <code>.RData</code> will be saved with the name and path you specify.</p>
<p>An alternative would also be:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="example-1.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">path_to_preferred_folder</span><span class="sc">\\</span><span class="st">my_workspace.RData&quot;</span>)</span>
<span id="cb225-2"><a href="example-1.html#cb225-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-3"><a href="example-1.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb225-4"><a href="example-1.html#cb225-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-5"><a href="example-1.html#cb225-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="st">&quot;C:/path_to_preferred_folder/my_workspace.RData&quot;</span>)</span></code></pre></div>
<p><strong>TIP:</strong> The backslash <code>\</code> has a special function in R, it functions as an escape character, which we’ll see more in depth in future sessions. Therefore, for a backslash to stop having its special function, we need to “escape it” with another backslash. That’s why we use two slashes in Windows addresses. One way to work around this is to use forward slashes, as in Linux. Even on Windows, R will know you’re specifying a Windows path.</p>
<p>To load the saved file in future sessions, you again have two alternatives. The first is to click on <code>Session</code> and <code>Load Workspace...</code> in RStudio. The second is:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="example-1.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">path_to_preferred_folder</span><span class="sc">\\</span><span class="st">my_workspace.RData&quot;</span>)</span></code></pre></div>
<p>If you want to save specific elements and not the entire environment, you can do it as follows:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="example-1.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(out1, out2, <span class="at">file=</span><span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">path_to_preferred_folder</span><span class="sc">\\</span><span class="st">my_objects.RData&quot;</span>)</span></code></pre></div>
<p>To load these objects, you can also use the <code>load()</code> function.</p>
<p><strong>TIP:</strong> To save and load a single element, such as a dataset (table) that was worked on but should still be loaded in a new session, you can use the <code>saveRDS()</code> and <code>readRDS()</code> functions. This is a more optimized format for saving large objects.</p>
</div>
</div>
<div id="r-language-structure" class="section level3 hasAnchor" number="4.1.9">
<h3><span class="header-section-number">4.1.9</span> R Language Structure<a href="example-1.html#r-language-structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>R</strong> can be considered a functional programming language, since most procedures and routines are performed through functions that receive some arguments as <em>input</em>, perform some actions on these arguments and return an output. Roughly speaking, function usage happens as follows:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="example-1.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">function_name</span>(<span class="at">argument1 =</span> value1, <span class="at">argument2 =</span> value2, ...)</span></code></pre></div>
<p>Although the arithmetic and logical operators seen earlier don’t fit the functional structure described above, they end up operating internally as functions.</p>
<p>As you’ll see later on, any user can create a function in R and not only use those made available by the language’s default distribution.</p>
<p><strong>TIP:</strong> We don’t always need to use the <code>argument_name=value</code> format inside functions, because R is smart enough to match arguments by the position they’re passed (<code>function_name(value1, value2)</code>) or even by the initial letters of the informed argument.</p>
<p>Let’s see some examples of functions that perform mathematical operations and that come <em>factory-installed</em> in <em>base R</em> (R’s basic distribution):</p>
<p><strong>TIP:</strong> RStudio has the functionality of autocompleting the words you type with objects created during your R session or already existing in memory. When typing the functions below, test by typing the first two letters of each function and pressing <code>TAB</code>.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="example-1.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># square root</span></span>
<span id="cb229-2"><a href="example-1.html#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">81</span>)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="example-1.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combining with operation prioritization</span></span>
<span id="cb231-2"><a href="example-1.html#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>((<span class="dv">3</span><span class="sc">*</span><span class="dv">3</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="example-1.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="do">## product</span></span>
<span id="cb233-2"><a href="example-1.html#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prod</span>(<span class="dv">2</span>,<span class="dv">2</span>) <span class="co"># 2x2</span></span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="example-1.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prod</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>) <span class="co"># 2x3x5x7x8</span></span></code></pre></div>
<pre><code>## [1] 1680</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="example-1.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="do">## logarithm</span></span>
<span id="cb237-2"><a href="example-1.html#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="co"># log of 3 in base e</span></span>
<span id="cb237-3"><a href="example-1.html#cb237-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">3</span>) <span class="co"># natural log</span></span></code></pre></div>
<pre><code>## [1] 1.098612</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="example-1.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># log of 3 in base 10</span></span>
<span id="cb239-2"><a href="example-1.html#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">3</span>,<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 0.4771213</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="example-1.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># log3 in base 10</span></span>
<span id="cb241-2"><a href="example-1.html#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log10</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 0.4771213</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="example-1.html#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co"># abs = modulus, |3 - 9|</span></span>
<span id="cb243-2"><a href="example-1.html#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abs</span>(<span class="dv">3-9</span>)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="example-1.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># factorial</span></span>
<span id="cb245-2"><a href="example-1.html#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 factorial</span></span>
<span id="cb245-3"><a href="example-1.html#cb245-3" aria-hidden="true" tabindex="-1"></a><span class="fu">factorial</span>(<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 24</code></pre>
<div id="pkg" class="section level4 hasAnchor" number="4.1.9.1">
<h4><span class="header-section-number">4.1.9.1</span> Packages in R<a href="example-1.html#pkg" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One of the reasons for the great success of the R language is due to the fact that any user can develop a “suite” containing various functions to perform one or several tasks. This set or suite of functions can be made available in the form of a package, which other users can install and also benefit from. After meeting a series of demanding requirements, these packages are usually made available on the <a href="https://cran.r-project.org">Comprehensive R Archive Network (CRAN)</a>.</p>
<p>CRAN has a quite serious package review policy. For an R package to be part of the CRAN repository, it must meet a series of requirements and be approved in several tests focused essentially on the following factors: user safety; error-free functioning on at least two operating systems; dense documentation (including bibliographic citations) about the package’s functionalities.</p>
<p>All this makes packages made available on CRAN quite reliable, thus becoming the official source for package distribution of the language.</p>
<p>If you want to know the number of packages available on CRAN today, execute:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="example-1.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(<span class="fu">available.packages</span>(<span class="fu">contrib.url</span>(<span class="fu">getOption</span>(<span class="st">&quot;repos&quot;</span>)), <span class="at">filters=</span><span class="fu">list</span>()))[<span class="dv">1</span>]</span></code></pre></div>
<p>In March 2020 numbers, as you must have noticed, we have more than 15 thousand packages on CRAN for the most diverse purposes. To know the types of packages existing in the repository, a visit to CRAN’s <a href="https://cran.r-project.org/web/views/"><em>Task Views</em></a> is recommended. There are packages for Econometrics, Regional Economic Analysis, Statistics, Clustering, Clinical Trials, Time Series, Optimization, Data Processing, Machine Learning and many others.</p>
</div>
<div id="installing-packages-1" class="section level4 hasAnchor" number="4.1.9.2">
<h4><span class="header-section-number">4.1.9.2</span> Installing packages<a href="example-1.html#installing-packages-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To install packages available on CRAN, use the <code>install.packages("package_name")</code> function, passing the desired package name in quotes as a function argument.</p>
<p>Let’s test this functionality by installing the <code>ggplot2</code> package, which is a package you’ll probably use a lot in your analyses:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="example-1.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
<p>If the package was correctly installed, you should see something similar to the following message in the console:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb249-1"><a href="example-1.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> <span class="st">&#39;ggplot2&#39;</span> successfully unpacked and MD5 sums checked</span>
<span id="cb249-2"><a href="example-1.html#cb249-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-3"><a href="example-1.html#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> downloaded binary packages are in</span>
<span id="cb249-4"><a href="example-1.html#cb249-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">C:\Users\...\...\...\...\...\downloaded_packages</span></span>
<span id="cb249-5"><a href="example-1.html#cb249-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span></span></code></pre></div>
<p>Don’t be alarmed if other packages were also installed. This is very common, since some packages may resort to functions present in other libraries.</p>
<p>To load or attach the package to your R session, so you can use the functions available in it, we use the <code>library(package_name)</code> or <code>require(package_name)</code> function. In this case, the package name can come with or without quotes.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="example-1.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>If you don’t want to load a package completely in your R session, because you’ll only use a specific function, instead of <code>library()</code>, you can use the format <code>package_name::function_name(parameter)</code>.</p>
</div>
<div id="other-package-sources-1" class="section level4 hasAnchor" number="4.1.9.3">
<h4><span class="header-section-number">4.1.9.3</span> Other package sources<a href="example-1.html#other-package-sources-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>It’s worth noting that the basic installed version of R, which we call <code>base R</code>, already comes with some packages installed, such as the <code>stats</code>, <code>MASS</code>, <code>foreign</code>, <code>graphics</code>, <code>base</code> itself, among others. To list all packages installed on your machine, execute:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="example-1.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()</span></code></pre></div>
<p>Although CRAN is the official R package repository, it’s important to mention the existence of other important sources for obtaining packages as well.</p>
<p>The first of alternative sources is <a href="https://www.bioconductor.org/"><strong>Bioconductor</strong></a>, which is an <em>open source</em> software development project related to analysis and understanding of genomic data generated in laboratory experiments related to molecular biology. It’s therefore an important package repository for those working with <em>Bioinformatics</em> or <em>Biostatistics</em>.</p>
<p>The second source would be <a href="https://www.github.com"><strong>Github</strong></a> which is a system for code management and versioning. Anyone can create a github account and start sharing their code, which can be accessed and modified/improved (with the original author’s consent). In R’s case, packages usually have a <em>stable</em> version on CRAN and a <em>development</em> version on Github, where authors and other collaborators are working on improving and resolving package <em>bugs</em>. Once the GitHub version is stable and ready for release, the author can send it to CRAN.</p>
<p>Access the repository of the <strong>emstreeR</strong> package on Github: <a href="https://www.github.com/allanvc/emstreeR" class="uri">https://www.github.com/allanvc/emstreeR</a>.</p>
<p>You can install R packages from their versions on Github. This is relatively common and occurs when a new functionality you want to test was implemented only in the package’s development version and isn’t yet available on CRAN. To install packages from their versions on Github, you need another package first, <code>devtools</code>.</p>
<p>Let’s install the development version of the <code>emstreeR</code> package:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="example-1.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>) <span class="co"># if you don&#39;t have it installed on your machine</span></span>
<span id="cb252-2"><a href="example-1.html#cb252-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-3"><a href="example-1.html#cb252-3" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative 1</span></span>
<span id="cb252-4"><a href="example-1.html#cb252-4" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo=</span><span class="st">&quot;allanvc/emstreeR&quot;</span>)</span>
<span id="cb252-5"><a href="example-1.html#cb252-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-6"><a href="example-1.html#cb252-6" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb252-7"><a href="example-1.html#cb252-7" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative 2</span></span>
<span id="cb252-8"><a href="example-1.html#cb252-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb252-9"><a href="example-1.html#cb252-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install_github</span>(<span class="at">repo=</span><span class="st">&quot;allanvc/emstreeR&quot;</span>)</span></code></pre></div>
<p>Note that we passed the repository path in the <code>repo</code> argument.</p>
</div>
</div>
<div id="how-to-get-help-1" class="section level3 hasAnchor" number="4.1.10">
<h3><span class="header-section-number">4.1.10</span> How to get help<a href="example-1.html#how-to-get-help-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is perhaps the most important part of all the material. Knowing <strong>how</strong> and <strong>where</strong> to seek help can mean spending just a few minutes instead of hours or even days solving a problem involving data analysis and programming. Throughout this course and when using R in a work activity, you’ll encounter various questions involving programming logic, data analysis, or even trying to know if there’s already an implemented package that performs the task you need.</p>
<div id="rs-help" class="section level4 hasAnchor" number="4.1.10.1">
<h4><span class="header-section-number">4.1.10.1</span> R’s <em>Help</em><a href="example-1.html#rs-help" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first place to seek help about something related to R is usually within R or RStudio itself. As we mentioned in section @ref(#pkg), CRAN’s policy requires packages to be very well documented. And this helps users and developers a lot. In addition to <code>base R</code> documentation and other packages that already accompany the standard installation, when installing a new package, this new library’s documentation becomes part of R’s <em>help</em> installed on your machine. So, when we want to understand a function, that is, know its input parameters, what it does and what it returns, it’s recommended to use R’s own <em>help</em>.</p>
<p>In the lower right panel, you’ll find a series of tabs, the 3rd of which is the tab that displays help material. You can do searches using the search field in the tab itself, or through commands inserted in the console.</p>
<div class="figure">
<img src="fig/help1.png" alt="" />
<p class="caption">R/Rstudio help panel</p>
</div>
<p>An example: imagine you’d like to know if R has any function that calculates the logarithm (base <span class="math inline">\(e\)</span>) of a number. For this, we have the <code>help.search()</code> function, which receives as a parameter (“in quotes”) the topic you want to search about. All R help is in English; therefore, if you want to find something related to logarithm, you should execute the <code>help.search("logarithm")</code> or <code>??logarithm</code> command.</p>
<p>Let’s see:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="example-1.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative 1</span></span>
<span id="cb253-2"><a href="example-1.html#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help.search</span>(<span class="st">&quot;logarithm&quot;</span>)</span>
<span id="cb253-3"><a href="example-1.html#cb253-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-4"><a href="example-1.html#cb253-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb253-5"><a href="example-1.html#cb253-5" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative 2</span></span>
<span id="cb253-6"><a href="example-1.html#cb253-6" aria-hidden="true" tabindex="-1"></a>??logarithm</span></code></pre></div>
<p>In RStudio’s <em>Help</em> tab the results of packages and respective functions containing the words you searched for will appear. In this case, therefore, we have the <code>log()</code> function from the base package to calculate logarithms. See:</p>
<div class="figure">
<img src="fig/help2.png" alt="" />
<p class="caption">Search results</p>
</div>
<p>If you already know exactly the name of the R function or object you want to get help about, you can also use <code>help("word")</code> or <code>?word</code>.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="example-1.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative 1</span></span>
<span id="cb254-2"><a href="example-1.html#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;log&quot;</span>)</span>
<span id="cb254-3"><a href="example-1.html#cb254-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-4"><a href="example-1.html#cb254-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb254-5"><a href="example-1.html#cb254-5" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative 2</span></span>
<span id="cb254-6"><a href="example-1.html#cb254-6" aria-hidden="true" tabindex="-1"></a>?log</span></code></pre></div>
<div class="figure">
<img src="fig/help3.png" alt="" />
<p class="caption"><code>log()</code> function documentation</p>
</div>
<p>Generally, the most important topics in help files are <em>Description</em>, <em>Usage</em>, <em>Arguments</em> and <em>Examples</em>. The first shows what the function does, the second how the function should be used, the third what arguments it receives and, in the fourth, you find examples of how it works. <em>Value</em> can also be interesting, as it informs what type of object the function returns.</p>
<div id="vignettes-1" class="section level5 hasAnchor" number="4.1.10.1.1">
<h5><span class="header-section-number">4.1.10.1.1</span> <em>Vignettes</em><a href="example-1.html#vignettes-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Later on, we’ll see how to install new packages in R. These packages are like additional modules that allow the user to perform more operations and activities in the language. Many of these packages bring with them, in addition to basic documentation, true tutorials on how to use the package itself or specific functions of these packages. They’re much more detailed than the simple <em>Help</em> documentation of the package or a function. While some don’t provide any <em>vignette</em>, others can bring more than one <em>vignette</em>. If you want to check, use:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="example-1.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;package_name&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="help-via-internet" class="section level4 hasAnchor" number="4.1.10.2">
<h4><span class="header-section-number">4.1.10.2</span> Help via Internet<a href="example-1.html#help-via-internet" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R is well known for its extremely active community. Often, when analyzing data, problems arise that cannot be solved only with the language’s internal documentation. In these cases, it’s necessary to resort to the experience of other users who have experienced the problem and can give tips on how to reach the desired point. In R’s 20 years, it will be difficult not to find someone who experienced the same problem as you. At this point the internet is our best friend and it’s no shame to look for help there. From the most inexperienced language users to the most talented R developers, everyone, without exception, ends up resorting to the internet as a valuable source of information and help. There are free books, blogs with excellent tutorials, forums and Q&amp;A (questions and answers) sites.</p>
<p>In the latter case, there’s no way not to mention <a href="http://www.stackoverflow.com">StackOverflow</a>, which is a questions and answers website specialized in programming in general. The R community on StackOverflow is extremely active and one of the largest on the site. There you’ll find beginner, intermediate, advanced users, package developers and even people who work on updating the language and RStudio. There’s a Portuguese version and an English one. Resort to the English version of the site, as it’s obviously much more active.</p>
<p>Before posting a question there, do a search with the terms you want, for example: <em>“How do I make a scatter plot in R?”</em>. If you type this in the site’s search or even on Google, in the first results you’ll already have the necessary answers from StackOverflow to make a <em>scatterplot</em> in R, in at least 3 different ways, using different packages.</p>
<p>See an example of a question and answer on StackOverflow:</p>
<div class="figure">
<img src="fig/stack1.png" alt="" />
<p class="caption">Question</p>
</div>
<div class="figure">
<img src="fig/stack2.png" alt="" />
<p class="caption">Answer</p>
</div>
<hr />
<hr />
</div>
</div>
</div>
<div id="r-language-object-structure" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> R Language Object Structure<a href="example-1.html#r-language-object-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Understanding the structure of creating and manipulating objects in R will be essential to boost your learning speed in the remaining course sessions. Good use of more practical topics depends a lot on a solid understanding of R language objects.</p>
<p>Everything (or almost everything) in R is objects. The most important are:</p>
<ul>
<li><strong>Vectors</strong>: are a kind of one-dimensional array. They consist of a sequence of values that can be: numeric, characters or logical expressions (like TRUE or FALSE). It’s emphasized that vector entries can be of only one single type.</li>
</ul>
<p>Example:</p>
<pre><code>## [1] 5.1 4.9 4.7 4.6 5.0 5.4</code></pre>
<ul>
<li><strong>Matrices</strong>: are multidimensional arrays with a collection of vectors in rows or columns, with all vectors in the collection having the same type and size.</li>
</ul>
<p>Example:</p>
<pre><code>##      [,1]  [,2] 
## [1,] &quot;R&quot;   &quot;UNF&quot;
## [2,] &quot;UNF&quot; &quot;R&quot;  
## [3,] &quot;R&quot;   &quot;UNF&quot;
## [4,] &quot;UNF&quot; &quot;R&quot;  
## [5,] &quot;R&quot;   &quot;UNF&quot;</code></pre>
<ul>
<li><strong>Dataframes</strong>: in terms of appearance, they’re practically identical to matrices, but with the possibility of having a collection of vectors (columns) of different types (e.g.: a numeric vector and another character vector). Because of this characteristic, it’s the main object used to store data tables in R.</li>
</ul>
<p>Example:</p>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
<ul>
<li><strong>Lists</strong>: is the broadest type of object, which can gather collections of dataframes, vectors and/or matrices, or even all of them. A list characteristic is that, since objects inside it don’t need to be of the same type, there’s also no need for them to be of the same size. This is often very helpful in data manipulation.</li>
</ul>
<p>Example:</p>
<pre><code>## [[1]]
## [1] &quot;R&quot;    &quot;UNF&quot;  &quot;2020&quot;
## 
## [[2]]
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 
## [[3]]
##           [,1]      [,2]
## [1,] 0.4253284 0.8942737
## [2,] 0.3713107 0.9311671</code></pre>
<ul>
<li><strong>Functions</strong>: are a set of procedures that receive zero, one or more parameters as <em>input</em>, perform a calculation or procedure and return a result to the user. As you can see, even functions are considered objects in R.</li>
</ul>
<p>Example:</p>
<pre><code>## function (x, base = exp(1))  .Primitive(&quot;log&quot;)</code></pre>
<p>In this section, we’ll study more in depth the creation and manipulation of vectors and Dataframes, which we judge to be the most important objects for this course. Function creation will be the object of study in a future module.</p>
<div id="vectors-1" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Vectors<a href="example-1.html#vectors-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="how-to-create-a-vector-1" class="section level4 hasAnchor" number="4.2.1.1">
<h4><span class="header-section-number">4.2.1.1</span> How to create a vector<a href="example-1.html#how-to-create-a-vector-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In R there are 3 types of vectors: numeric (<em>numeric</em>), character or <em>strings</em> (<em>character</em>) and logical vectors (<em>logic</em>). They’re all created through the <code>c()</code> function, the “c” standing for <em>concatenate</em>. This function concatenates elements of the same type, thus producing a vector. The parameters to be passed are the elements that will compose the vector and must be separated by commas.</p>
<p><strong>Numeric vector:</strong></p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="example-1.html#cb261-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="dv">2</span>, <span class="fl">2.8</span>); v1</span></code></pre></div>
<pre><code>## [1] 1.0 0.2 0.3 2.0 2.8</code></pre>
<p><strong>TIP:</strong> When using <code>;</code>, you indicate to R that you’re separating code execution, although there are two operations on the same line - one that creates the vector and another that prints the result in the console by calling the object name.</p>
<p><strong>TIP:</strong> Numeric vectors can be of two types: <em>integer</em>, for integers or <em>double</em>, for floating point (decimal numbers). To know a vector’s type, use the <code>typeof(vector_name)</code> function</p>
<p><strong>Character or <em>strings</em> vector:</strong></p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="example-1.html#cb263-1" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;R&quot;</span>, <span class="st">&quot;UNF&quot;</span>, <span class="st">&quot;2020&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="st">&quot;UNF&quot;</span>, <span class="st">&quot;2020&quot;</span>); v2</span></code></pre></div>
<pre><code>## [1] &quot;R&quot;    &quot;UNF&quot;  &quot;2020&quot; &quot;R&quot;    &quot;UNF&quot;  &quot;2020&quot;</code></pre>
<p><strong>TIP:</strong> Note that strings must be passed <code>"in quotes"</code>.</p>
<p><strong>Logical vector:</strong></p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="example-1.html#cb265-1" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>); v3</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE</code></pre>
<p>Try mixing two vectors. Since vectors can only be of one single type, R will automatically force the final result to a single type.</p>
<p>Example:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="example-1.html#cb267-1" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">&lt;-</span> <span class="fu">c</span>(v1, v2); v4</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;    &quot;0.2&quot;  &quot;0.3&quot;  &quot;2&quot;    &quot;2.8&quot;  &quot;R&quot;    &quot;UNF&quot;  &quot;2020&quot; &quot;R&quot;    &quot;UNF&quot;  &quot;2020&quot;</code></pre>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="example-1.html#cb269-1" aria-hidden="true" tabindex="-1"></a>v5 <span class="ot">&lt;-</span> <span class="fu">c</span>(v1, v3); v5</span></code></pre></div>
<pre><code>##  [1] 1.0 0.2 0.3 2.0 2.8 1.0 0.0 0.0 1.0 1.0 0.0 0.0 1.0</code></pre>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="example-1.html#cb271-1" aria-hidden="true" tabindex="-1"></a>v6 <span class="ot">&lt;-</span> <span class="fu">c</span>(v2, v3); v6</span></code></pre></div>
<pre><code>##  [1] &quot;R&quot;     &quot;UNF&quot;   &quot;2020&quot;  &quot;R&quot;     &quot;UNF&quot;   &quot;2020&quot;  &quot;TRUE&quot;  &quot;FALSE&quot; &quot;FALSE&quot; &quot;TRUE&quot;  &quot;TRUE&quot;  &quot;FALSE&quot;
## [13] &quot;FALSE&quot; &quot;TRUE&quot;</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="example-1.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1]  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10</code></pre>
<p>The <code>typeof(vector_name)</code> function can be used to confirm the types of vectors you created.</p>
<div id="other-ways-to-create-a-vector-1" class="section level5 hasAnchor" number="4.2.1.1.1">
<h5><span class="header-section-number">4.2.1.1.1</span> Other ways to create a vector<a href="example-1.html#other-ways-to-create-a-vector-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>There are other interesting functions that make it possible to create vectors:</p>
<ul>
<li><code>:</code>, example: <code>1:100</code>, creates a numeric vector composed of the sequence from 1 to 100;</li>
<li><code>seq()</code>, example: <code>seq(-10, -1)</code>, creates a numeric vector composed of the sequence from -10 to -1;</li>
<li><code>rep()</code>, example: <code>rep("UNF", 10)</code>, creates a vector composed of the <em>string</em> <code>"UNF"</code> repeated 10 times.</li>
</ul>
</div>
</div>
<div id="how-to-extract-elements-from-a-vector-1" class="section level4 hasAnchor" number="4.2.1.2">
<h4><span class="header-section-number">4.2.1.2</span> How to extract elements from a vector<a href="example-1.html#how-to-extract-elements-from-a-vector-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To extract elements from a vector (and from any object in R), we use indexing through brackets <code>vector_name[position]</code>. You can inform a single position, a set of positions or even a range of positions to extract:</p>
<p><strong>Extracting a single element:</strong></p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="example-1.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3rd element of vector v1</span></span>
<span id="cb275-2"><a href="example-1.html#cb275-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 0.3</code></pre>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="example-1.html#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st element of vector v2</span></span>
<span id="cb277-2"><a href="example-1.html#cb277-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;R&quot;</code></pre>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="example-1.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5th element of vector v3</span></span>
<span id="cb279-2"><a href="example-1.html#cb279-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Extracting more than one element:</strong></p>
<p>Here you’ll use a vector inside another vector. The idea is that the vector inside the brackets <code>[]</code> contains the positions (indices) to be extracted from the original vector. Remember that the vector containing the positions must be created and, to create a vector, we use the <code>c()</code> function.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="example-1.html#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st and 3rd elements of vector v1</span></span>
<span id="cb281-2"><a href="example-1.html#cb281-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [1] 1.0 0.3</code></pre>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="example-1.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb283-2"><a href="example-1.html#cb283-2" aria-hidden="true" tabindex="-1"></a>pos1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb283-3"><a href="example-1.html#cb283-3" aria-hidden="true" tabindex="-1"></a>v1[pos1]</span></code></pre></div>
<pre><code>## [1] 1.0 0.3</code></pre>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="example-1.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2nd and 4th element of vector v2</span></span>
<span id="cb285-2"><a href="example-1.html#cb285-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;UNF&quot; &quot;R&quot;</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="example-1.html#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb287-2"><a href="example-1.html#cb287-2" aria-hidden="true" tabindex="-1"></a>pos2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb287-3"><a href="example-1.html#cb287-3" aria-hidden="true" tabindex="-1"></a>v2[pos2]</span></code></pre></div>
<pre><code>## [1] &quot;R&quot;    &quot;2020&quot;</code></pre>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="example-1.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st, 2nd and 5th element of vector v3</span></span>
<span id="cb289-2"><a href="example-1.html#cb289-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="example-1.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb291-2"><a href="example-1.html#cb291-2" aria-hidden="true" tabindex="-1"></a>pos3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>)</span>
<span id="cb291-3"><a href="example-1.html#cb291-3" aria-hidden="true" tabindex="-1"></a>v3[pos3]</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<p><strong>Extracting elements in a range:</strong></p>
<p>Once again we’ll use vector inside vector. The difference is that we’ll create a vector using the <code>:</code> function, which creates a sequence of values or range. We can also use the <code>seq(a,b)</code> function</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="example-1.html#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from 1st to 3rd elements of vector v1</span></span>
<span id="cb293-2"><a href="example-1.html#cb293-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 1.0 0.2 0.3</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="example-1.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb295-2"><a href="example-1.html#cb295-2" aria-hidden="true" tabindex="-1"></a>v1[<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [1] 1.0 0.2 0.3</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="example-1.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from 2nd to 5th element of vector v2</span></span>
<span id="cb297-2"><a href="example-1.html#cb297-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] &quot;UNF&quot;  &quot;2020&quot; &quot;R&quot;    &quot;UNF&quot;</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="example-1.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb299-2"><a href="example-1.html#cb299-2" aria-hidden="true" tabindex="-1"></a>v2[<span class="fu">seq</span>(<span class="dv">2</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;UNF&quot;  &quot;2020&quot; &quot;R&quot;    &quot;UNF&quot;</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="example-1.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from 3rd to 6th element of vector v3</span></span>
<span id="cb301-2"><a href="example-1.html#cb301-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="example-1.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb303-2"><a href="example-1.html#cb303-2" aria-hidden="true" tabindex="-1"></a>v3[<span class="fu">seq</span>(<span class="dv">2</span>,<span class="dv">6</span>)]</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE</code></pre>
</div>
<div id="how-to-calculate-a-vectors-size" class="section level4 hasAnchor" number="4.2.1.3">
<h4><span class="header-section-number">4.2.1.3</span> How to calculate a vector’s size?<a href="example-1.html#how-to-calculate-a-vectors-size" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>TIP:</strong> To calculate a vector’s size, use the <code>length(vector_name)</code> function:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="example-1.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(v6)</span></code></pre></div>
<pre><code>## [1] 14</code></pre>
</div>
<div id="how-to-modify-vector-elements" class="section level4 hasAnchor" number="4.2.1.4">
<h4><span class="header-section-number">4.2.1.4</span> How to modify vector elements<a href="example-1.html#how-to-modify-vector-elements" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once you understood the vector indexing process. You can modify or replace one or more elements of a vector, using indexing and assignment.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="example-1.html#cb307-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fl">450.78</span></span>
<span id="cb307-2"><a href="example-1.html#cb307-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-3"><a href="example-1.html#cb307-3" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">2021</span></span>
<span id="cb307-4"><a href="example-1.html#cb307-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb307-5"><a href="example-1.html#cb307-5" aria-hidden="true" tabindex="-1"></a>v3[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="co"># the replacement must be the same size as the indexing result</span></span></code></pre></div>
</div>
</div>
<div id="dataframes" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Dataframes<a href="example-1.html#dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Dataframes are R’s “tables”. It will probably be one of the objects you’ll use most to do data analysis. The Dataframe has rows and columns. Think of columns as vectors, where each of these vector positions indicates a row. We can think of Dataframes, then, as a collection of vectors, which can even be of different types, but necessarily must have the same size. This makes perfect sense, because in a table we have numeric variables, names, and other types that won’t be covered in this course, such as dates, for example.</p>
<div id="how-to-create-a-dataframe" class="section level4 hasAnchor" number="4.2.2.1">
<h4><span class="header-section-number">4.2.2.1</span> How to create a Dataframe<a href="example-1.html#how-to-create-a-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To create a dataframe, we use the <code>data.frame()</code> function. However, the most common is for the dataframe to be created from reading some database, through reading functions that will be presented mainly in Module <a href="#m2"><strong>??</strong></a>.</p>
<p>Let’s create a dataframe with 3 columns. The main arguments are the vectors that compose the columns.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="example-1.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: all vectors need to have the same size</span></span>
<span id="cb308-2"><a href="example-1.html#cb308-2" aria-hidden="true" tabindex="-1"></a>v6 <span class="ot">&lt;-</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">15</span></span>
<span id="cb308-3"><a href="example-1.html#cb308-3" aria-hidden="true" tabindex="-1"></a>v7 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.3</span>, <span class="fl">0.7</span>, <span class="at">by=</span><span class="fl">0.1</span>)</span>
<span id="cb308-4"><a href="example-1.html#cb308-4" aria-hidden="true" tabindex="-1"></a>v8 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;UNF&quot;</span>, <span class="dv">5</span>)</span>
<span id="cb308-5"><a href="example-1.html#cb308-5" aria-hidden="true" tabindex="-1"></a>v9 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="dv">5</span>)</span>
<span id="cb308-6"><a href="example-1.html#cb308-6" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(v6, v7, v8, v9)</span>
<span id="cb308-7"><a href="example-1.html#cb308-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-8"><a href="example-1.html#cb308-8" aria-hidden="true" tabindex="-1"></a>df1</span></code></pre></div>
<pre><code>##    v6  v7  v8    v9
## 1  11 0.3 UNF  TRUE
## 2  12 0.4 UNF FALSE
## 3  13 0.5 UNF  TRUE
## 4  14 0.6 UNF FALSE
## 5  15 0.7 UNF  TRUE
## 6  11 0.3 UNF FALSE
## 7  12 0.4 UNF  TRUE
## 8  13 0.5 UNF FALSE
## 9  14 0.6 UNF  TRUE
## 10 15 0.7 UNF FALSE</code></pre>
<p><strong>TIP:</strong> There are several other arguments that can also be used. Let’s see the structure of the <code>data.frame()</code> function. It’s worth consulting the help of the <code>data.frame</code> function too (<code>help(data.frame)</code>).</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="example-1.html#cb310-1" aria-hidden="true" tabindex="-1"></a>data.frame</span>
<span id="cb310-2"><a href="example-1.html#cb310-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;data.frame&quot;</span>)</span></code></pre></div>
<p>During dataframe creation, we can choose other names for the columns:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="example-1.html#cb311-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> v6, <span class="at">col2 =</span> v7, <span class="at">col3 =</span> v8, <span class="at">col4 =</span> v9)</span>
<span id="cb311-2"><a href="example-1.html#cb311-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb311-3"><a href="example-1.html#cb311-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb311-4"><a href="example-1.html#cb311-4" aria-hidden="true" tabindex="-1"></a><span class="co"># df1 &lt;- data.frame(&quot;col1&quot; = v6, &quot;col2&quot; = v7, &quot;col3&quot; = v8, &quot;col4&quot; = v9)</span></span>
<span id="cb311-5"><a href="example-1.html#cb311-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb311-6"><a href="example-1.html#cb311-6" aria-hidden="true" tabindex="-1"></a>df1</span></code></pre></div>
<pre><code>##    col1 col2 col3  col4
## 1    11  0.3  UNF  TRUE
## 2    12  0.4  UNF FALSE
## 3    13  0.5  UNF  TRUE
## 4    14  0.6  UNF FALSE
## 5    15  0.7  UNF  TRUE
## 6    11  0.3  UNF FALSE
## 7    12  0.4  UNF  TRUE
## 8    13  0.5  UNF FALSE
## 9    14  0.6  UNF  TRUE
## 10   15  0.7  UNF FALSE</code></pre>
<p>You must have noticed there’s always a column on the left that contains the numbering or names of your dataframe’s rows. This is what we call <code>rownames</code>.</p>
<p><strong>TIP:</strong> If you want to confirm your dataframe’s <strong>structure</strong>, that is, know the type of its columns, use the <code>str(dataframe_name)</code> function</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="example-1.html#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  4 variables:
##  $ col1: int  11 12 13 14 15 11 12 13 14 15
##  $ col2: num  0.3 0.4 0.5 0.6 0.7 0.3 0.4 0.5 0.6 0.7
##  $ col3: chr  &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; ...
##  $ col4: logi  TRUE FALSE TRUE FALSE TRUE FALSE ...</code></pre>
<p>Note that column 3 <code>col3</code> was treated as <em>factor</em> and not as <em>character</em>, as we expected. <em>factor</em> is an abstraction that R uses to save categorical variables in memory in order to occupy less space. Basically, it converts categories to a number, in order to optimize memory use. If the variable is printed in the console, it does a reconversion just to present it to the user. For <code>col3</code> to be really created as a <code>character</code> type column, we must set the <code>stringsAsFactors = FALSE</code> parameter. Keep this tip well, because you’ll use this same parameter when reading external data, transforming them into dataframes in R.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="example-1.html#cb315-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> v6, <span class="at">col2 =</span> v7, <span class="at">col3 =</span> v8, <span class="at">col4 =</span> v9, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb315-2"><a href="example-1.html#cb315-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-3"><a href="example-1.html#cb315-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  4 variables:
##  $ col1: int  11 12 13 14 15 11 12 13 14 15
##  $ col2: num  0.3 0.4 0.5 0.6 0.7 0.3 0.4 0.5 0.6 0.7
##  $ col3: chr  &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; ...
##  $ col4: logi  TRUE FALSE TRUE FALSE TRUE FALSE ...</code></pre>
<p><strong>TIP:</strong> Starting from version <strong>4.0.0</strong>, it’s no longer necessary to declare <code>stringsAsFactors = FALSE</code> in the data.frame function. This has become the default behavior of the function: <strong>not</strong> transforming string columns into factors.</p>
<p>Note that, unlike vectors which were one-dimensional, dataframes are two-dimensional. We have one dimension represented by rows and another dimension represented by columns. To calculate your dataframe’s dimensions you can use the following functions:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="example-1.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rows vs columns</span></span>
<span id="cb317-2"><a href="example-1.html#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df1)</span></code></pre></div>
<pre><code>## [1] 10  4</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="example-1.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows</span></span>
<span id="cb319-2"><a href="example-1.html#cb319-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df1)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="example-1.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of columns</span></span>
<span id="cb321-2"><a href="example-1.html#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(df1)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
</div>
<div id="how-to-extract-elements-from-a-dataframe" class="section level4 hasAnchor" number="4.2.2.2">
<h4><span class="header-section-number">4.2.2.2</span> How to extract elements from a Dataframe<a href="example-1.html#how-to-extract-elements-from-a-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To extract Dataframe elements, we’ll use the same vector indexing technique, using brackets <code>[]</code>. The difference is that, since the Dataframe has two dimensions, we need to work with both, separating each dimension’s indices with a comma inside the brackets <code>df_name[row_index, column_index]</code>.</p>
<p>Now, the values we pass inside the brackets refer to a Dataframe’s rows or columns. It’s like playing battleship.</p>
<p><strong>TIP:</strong> If you want to extract only entire row(s), leave the column dimension blank, e.g.: <code>df_name[row_X, ]</code>. If you want to extract only column(s), leave the row dimension blank, e.g.: <code>df_name[, column_Y]</code>.</p>
<p><strong>Extracting one or more rows:</strong></p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="example-1.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single row</span></span>
<span id="cb323-2"><a href="example-1.html#cb323-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##   col1 col2 col3 col4
## 3   13  0.5  UNF TRUE</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="example-1.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some rows</span></span>
<span id="cb325-2"><a href="example-1.html#cb325-2" aria-hidden="true" tabindex="-1"></a><span class="co"># note comma positioning</span></span>
<span id="cb325-3"><a href="example-1.html#cb325-3" aria-hidden="true" tabindex="-1"></a>df1[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>), ]</span></code></pre></div>
<pre><code>##   col1 col2 col3  col4
## 1   11  0.3  UNF  TRUE
## 2   12  0.4  UNF FALSE
## 5   15  0.7  UNF  TRUE</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="example-1.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a sequence of rows</span></span>
<span id="cb327-2"><a href="example-1.html#cb327-2" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, ]</span></code></pre></div>
<pre><code>##   col1 col2 col3  col4
## 3   13  0.5  UNF  TRUE
## 4   14  0.6  UNF FALSE
## 5   15  0.7  UNF  TRUE</code></pre>
<p><strong>Extracting one or more columns:</strong></p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="example-1.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single column</span></span>
<span id="cb329-2"><a href="example-1.html#cb329-2" aria-hidden="true" tabindex="-1"></a>df1[ ,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>##  [1] 0.3 0.4 0.5 0.6 0.7 0.3 0.4 0.5 0.6 0.7</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="example-1.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some columns</span></span>
<span id="cb331-2"><a href="example-1.html#cb331-2" aria-hidden="true" tabindex="-1"></a><span class="co"># note comma positioning</span></span>
<span id="cb331-3"><a href="example-1.html#cb331-3" aria-hidden="true" tabindex="-1"></a>df1[, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>##    col2 col3
## 1   0.3  UNF
## 2   0.4  UNF
## 3   0.5  UNF
## 4   0.6  UNF
## 5   0.7  UNF
## 6   0.3  UNF
## 7   0.4  UNF
## 8   0.5  UNF
## 9   0.6  UNF
## 10  0.7  UNF</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="example-1.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a sequence of columns</span></span>
<span id="cb333-2"><a href="example-1.html#cb333-2" aria-hidden="true" tabindex="-1"></a>df1[, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##    col2 col3  col4
## 1   0.3  UNF  TRUE
## 2   0.4  UNF FALSE
## 3   0.5  UNF  TRUE
## 4   0.6  UNF FALSE
## 5   0.7  UNF  TRUE
## 6   0.3  UNF FALSE
## 7   0.4  UNF  TRUE
## 8   0.5  UNF FALSE
## 9   0.6  UNF  TRUE
## 10  0.7  UNF FALSE</code></pre>
<p><strong>Extracting specific elements, crossing rows and columns</strong></p>
<p>You can mix indices from both dimensions, to extract specific subsets from your Dataframe. It’s like playing battleship:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="example-1.html#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single element</span></span>
<span id="cb335-2"><a href="example-1.html#cb335-2" aria-hidden="true" tabindex="-1"></a><span class="co"># element at the intersection of 2nd row and 3rd column</span></span>
<span id="cb335-3"><a href="example-1.html#cb335-3" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;UNF&quot;</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="example-1.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsets</span></span>
<span id="cb337-2"><a href="example-1.html#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="co"># elements at the intersection of 2nd and 5th row vs 1st and 4th column</span></span>
<span id="cb337-3"><a href="example-1.html#cb337-3" aria-hidden="true" tabindex="-1"></a>df1[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)]</span></code></pre></div>
<pre><code>##   col1  col4
## 2   12 FALSE
## 5   15  TRUE</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="example-1.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsets</span></span>
<span id="cb339-2"><a href="example-1.html#cb339-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sequence from 2nd to 4th row vs sequence from 3rd to 5th row</span></span>
<span id="cb339-3"><a href="example-1.html#cb339-3" aria-hidden="true" tabindex="-1"></a>df1[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##   col2 col3  col4
## 1  0.3  UNF  TRUE
## 2  0.4  UNF FALSE
## 3  0.5  UNF  TRUE</code></pre>
<p><strong>TIP:</strong> You can also mix previous examples, for example: <code>df1[2, 2:4]</code>.</p>
</div>
<div id="other-ways-to-index-dataframe-columns" class="section level4 hasAnchor" number="4.2.2.3">
<h4><span class="header-section-number">4.2.2.3</span> Other ways to index Dataframe columns<a href="example-1.html#other-ways-to-index-dataframe-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are two more ways to index Dataframe columns. Both use column names and not indices.</p>
<p><strong>First alternative way:</strong></p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="example-1.html#cb341-1" aria-hidden="true" tabindex="-1"></a>df1[, <span class="st">&quot;col2&quot;</span>]</span></code></pre></div>
<pre><code>##  [1] 0.3 0.4 0.5 0.6 0.7 0.3 0.4 0.5 0.6 0.7</code></pre>
<p><strong>Second alternative way:</strong></p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="example-1.html#cb343-1" aria-hidden="true" tabindex="-1"></a>df1<span class="sc">$</span>col3</span></code></pre></div>
<pre><code>##  [1] &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot; &quot;UNF&quot;</code></pre>
<p>Note that the output is printed horizontally. This occurs because, when we extract only one column, we’re extracting a vector. And a vector’s output form is horizontal, as we saw earlier.</p>
<hr />
</div>
</div>
<div id="module-references-1" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Module References<a href="example-1.html#module-references-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><em>Computational Statistics 2</em> (2015). Class notes. Statistics Course, UnB, 1st semester, 2015.</p></li>
<li><p>Nyffenegger, R. (2020). <em>R: a computer language for statistical data analysis</em>. URL <a href="https://renenyffenegger.ch/notes/development/languages/R/">https://renenyffenegger.ch/notes/development/languages/R/</a>.</p></li>
<li><p>Wickham, H. (2014). <em>Advanced R</em>. September 25, 2014. Chapman and Hall/CRC. 476 Pages. Available at: <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.</p></li>
<li><p>R Core Team (2020). <em>R: A language and environment for statistical computing</em>. R Foundation for Statistical Computing, Vienna, Austria. URL <a href="http://www.R-project.org/">http://www.R-project.org/</a>.</p></li>
</ul>
</div>
<div id="exercises-1" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Exercises<a href="example-1.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>1) Vectors</strong></p>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Create two numeric vectors (A and B) of size 10 with random numbers chosen by you.</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Multiply all items of vector A by <span class="math inline">\(\times3\)</span> and items of vector B by <span class="math inline">\(\times4\)</span>.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Create a new vector (C) resulting from the operation <span class="math inline">\(\frac{log(B)}{|A| + (A+B)}\)</span>, where <span class="math inline">\(|A|\)</span> is the size of vector A.</li>
</ol></li>
<li><ol start="4" style="list-style-type: lower-alpha">
<li>Create a new logical vector (D), checking which values of A are greater than the respective values of B.</li>
</ol></li>
<li><ol start="5" style="list-style-type: lower-alpha">
<li>Add 3 names chosen by you to the end of each vector. Do the vectors change type?</li>
</ol></li>
</ul>
<p><strong>2) Dataframes</strong></p>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Create a Dataframe with 10 rows and 5 columns, with at least 3 columns of different types, at least two being numeric.</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Create a 6th column resulting from the sum between two numeric columns of the Dataframe.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Choose two numeric columns A and B, and create a 7th column resulting from the operation <span class="math inline">\(\frac{log(B)}{|A| + (A+B)}\)</span>, where <span class="math inline">\(|A|\)</span> is the size of column A.</li>
</ol></li>
</ul>
<p><strong>3) UNF Practice</strong></p>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Create a character vector with the names of 5 courses offered at UNF (University of North Florida).</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Create a numeric vector with hypothetical enrollment numbers for each of these courses.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Combine these vectors into a dataframe with appropriate column names.</li>
</ol></li>
<li><ol start="4" style="list-style-type: lower-alpha">
<li>Extract the course with the highest enrollment using vector indexing.</li>
</ol></li>
<li><ol start="5" style="list-style-type: lower-alpha">
<li>Calculate the total enrollment across all courses.</li>
</ol></li>
</ul>
<pre><code>
Este arquivo .Rmd está completo com:

1. **Tudo em inglês** - Todo o conteúdo traduzido
2. **UNF substituindo IPEA** - Todos os exemplos com University of North Florida
3. **Contexto americano** - Adaptado para estudantes americanos
4. **Exercícios adicionais** - Incluí um exercício extra específico sobre UNF
5. **Estrutura mantida** - Mesma organização e hierarquia do original

O módulo está pronto para uso no curso da UNF!

&lt;!--chapter:end:02-modulo02.Rmd--&gt;

# Module III {#m3}

## Accessing Relational Databases with `dbplyr`

### Introduction

The content of this chapter was adapted from the `dbplyr` _vignette_ and the article _Databases using R_ by Edgar Ruiz, package author and member of **RStudio**. `dbplyr` allows combining the easy data manipulation grammar provided by `dplyr` with access to SQL relational databases without actually needing to use **SQL** commands.

Using databases is inevitable for those whose work involves data analysis. At this point, as users of the `R` language, instinct leads us to adopt an _approach_ with databases in the same way we would read a `.txt` or `.csv` data file: we would try to read all the data at once or parts of it until forming the entire dataset. The goal would be to &quot;return&quot; to the database as little as possible, so that our _queries_ would extract as much data as possible. After that, we would spend several cycles analyzing that data saved in our computer&#39;s memory. We would follow roughly this scheme:

&lt;!-- \newline --&gt;

![R &amp; Database Access NOT optimized](./fig/todaydb.png)
Source: _Databases using R_, Edgar Ruiz

This approach has some problems:

- the volume of data we would have to work with would be very large. Therefore, we would spend some time thinking about how to minimize resource consumption and time to arrive at the subset of data we actually need to work with;

- to save resources, we would opt to directly use an external SQL client, work the data as much as possible to then extract what interests us and only then use **R**;

- we would need to know SQL in depth to make as many queries as possible using a &quot;_client_&quot; of _SQL Server_ for example. We would save different scripts so we could repeat the queries again;

What would be the best approach then?

![R &amp; Database Access optimized](./fig/betterdb.png)
Source: _Databases using R_, Edgar Ruiz

With `dbplyr`, the task of accessing relational databases would be **EXTREMELY** optimized, because:

- 1st) You don&#39;t need to know SQL syntax to access data. Just knowing **R** and having a slight notion of SQL and you can already make a considerable number of data manipulations;

- 2nd) You will only need RStudio and no longer an external SQL client to make _queries_;

- 3rd) The code you would need in the first approach will be cut in half with the second

- 4th) Instead of spending hours thinking about which database you really need to import, we can analyze the data within the SQL server;

- 5th) Instead of using your computer&#39;s memory, you&#39;ll use the SQL server _engine_, because `dbplyr` together with `dplyr` will send _queries_ to the server;

- 6) Manipulating data with **R** commands (and even more with `dplyr`) is much easier than manipulating data with SQL commands. So, you can investigate and manipulate data much more easily just with R to only save the result on your computer at the end

Before we start, you need to install and load the following packages: `DBI` and `dbplyr`. `DBI` is a _backend_ that allows `dplyr` to communicate with various types of SQL databases using the same code. However, when installing and loading `dbplyr`, the `DBI` package will also be automatically loaded.


``` r
# install.packages(&quot;dbplyr&quot;)
library(dbplyr)</code></pre>
<p>In addition to <code>dbplyr</code> (and <code>DBI</code>), we’ll need a specific <em>backend</em> or <em>driver</em> for the type of SQL server we’re going to access. The most common are:</p>
<ul>
<li><strong>RMySQL</strong> connects to MySQL and MariaDB;</li>
<li><strong>RPostgreSQL</strong> connects to Postgres and Redshift;</li>
<li><strong>RSQLite</strong> embeds an embedded SQLite database (very useful for training);</li>
<li><strong>odbc</strong> connects to various commercial databases (SQL Server, for example) using the <em>open connectivity protocol</em>;</li>
<li><strong>bigrquery</strong> connects to Google’s BigQuery.</li>
</ul>
<p>These <em>backends</em> are also implemented as R packages.</p>
<p>For the examples in this handout, we’ll use <code>RSQLite</code>, because we’ll need to emulate a SQL-type database.</p>
</div>
<div id="connecting-to-a-database" class="section level3 hasAnchor" number="4.2.5">
<h3><span class="header-section-number">4.2.5</span> Connecting to a database<a href="example-1.html#connecting-to-a-database" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To be able to work with a database together with <code>dplyr</code>, we must first establish a connection with this database, using <code>DBI::dbConnect()</code>. We thus create a connection object within R that will make the link in our RStudio session and the database.</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="example-1.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;RSQLite&quot;)</span></span>
<span id="cb346-2"><a href="example-1.html#cb346-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb346-3"><a href="example-1.html#cb346-3" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(<span class="at">drv =</span> RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="at">path =</span> <span class="st">&quot;:memory:&quot;</span>)</span></code></pre></div>
<p>The <code>drv</code> argument of <em>DBI::dbConnect()</em> can vary from database to database, but the first argument is always the <em>driver</em> of the type of database to which you will connect. It would be <code>RSQLite::SQLite()</code> for SQLite, <code>RMySQL::MySQL()</code> for MySQL, <code>RPostgreSQL::PostgreSQL()</code> for PostgreSQL, <code>odbc::odbc()</code> for SQL Server and <code>bigrquery::bigquery()</code> for Google BigQuery. SQLite only needs one more argument: the path to the database. In our case, we use the special <em>string</em> <code>[:memory:]</code> which will make SQLite build a temporary database in our computer’s memory.</p>
<p>However, most databases don’t “live” in a file, but on a server. This means that in real life your code would be more like:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="example-1.html#cb347-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(), </span>
<span id="cb347-2"><a href="example-1.html#cb347-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> <span class="st">&quot;database.company.com&quot;</span>,</span>
<span id="cb347-3"><a href="example-1.html#cb347-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">user =</span> <span class="st">&quot;username&quot;</span>,</span>
<span id="cb347-4"><a href="example-1.html#cb347-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">password =</span> rstudioapi<span class="sc">::</span><span class="fu">askForPassword</span>(<span class="st">&quot;Database password&quot;</span>)</span>
<span id="cb347-5"><a href="example-1.html#cb347-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>TIP:</strong> In real life, when creating the connection object with the actual relational server, you would see a connections tab in RStudio, with the respective <em>schemas</em> and/or tables present on the server. It’s like a <em>Global Environment</em> of the database:</p>
<div class="figure">
<img src="fig/rstudio_connections.png" alt="" />
<p class="caption">RStudio <em>Connections</em> Tab</p>
</div>
<p>The temporary database we created earlier doesn’t have any data tables yet. Let’s start by copying a sample dataset. We’ll use the <code>mtcars</code> dataset that comes built-in with R, using the <code>copy_to()</code> function. Although this isn’t the most recommended way to put data into a database, it’s quite useful and easy to use in demonstrations:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="example-1.html#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb348-2"><a href="example-1.html#cb348-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-3"><a href="example-1.html#cb348-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the built-in mtcars dataset</span></span>
<span id="cb348-4"><a href="example-1.html#cb348-4" aria-hidden="true" tabindex="-1"></a>cars_data <span class="ot">&lt;-</span> mtcars</span></code></pre></div>
<p>Once done, we can add the data to our fictional relational database:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="example-1.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="fu">copy_to</span>(con, cars_data, <span class="st">&quot;cars_db&quot;</span>,</span>
<span id="cb349-2"><a href="example-1.html#cb349-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">temporary =</span> <span class="cn">FALSE</span>, </span>
<span id="cb349-3"><a href="example-1.html#cb349-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">indexes =</span> <span class="fu">list</span>(</span>
<span id="cb349-4"><a href="example-1.html#cb349-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;cyl&quot;</span>, </span>
<span id="cb349-5"><a href="example-1.html#cb349-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;gear&quot;</span></span>
<span id="cb349-6"><a href="example-1.html#cb349-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb349-7"><a href="example-1.html#cb349-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The <code>copy_to()</code> function has some additional arguments that allow us to provide indexes for the table. We then create indexes that will allow us to quickly process data by <code>cyl</code> and <code>gear</code>. Creating write indexes is a key point for good database performance when sending <em>queries</em>. However, this is beyond the scope of this course.</p>
<p>Once we’ve copied the data to the server, we can reference (we’re not importing yet) this table in <strong>R</strong> using the <code>tbl()</code> function, which extracts the table called <code>"cars_db"</code> from the database.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="example-1.html#cb350-1" aria-hidden="true" tabindex="-1"></a>cars_db <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">&quot;cars_db&quot;</span>)</span></code></pre></div>
<p>If we print the newly created reference, we’ll see it looks like a <em>tibble</em>, although it’s portrayed as a list in the <em>Global Environment</em>.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="example-1.html#cb351-1" aria-hidden="true" tabindex="-1"></a>cars_db </span></code></pre></div>
<pre><code>## # Source:   table&lt;`cars_db`&gt; [?? x 11]
## # Database: sqlite 3.46.0 []
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # ℹ more rows</code></pre>
<p>The only difference is the reference that the data is in a SQLite database.</p>
</div>
<div id="generating-queries" class="section level3 hasAnchor" number="4.2.6">
<h3><span class="header-section-number">4.2.6</span> Generating queries<a href="example-1.html#generating-queries" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To interact with a database we usually use <em>SQL - Structured Query Language</em>. SQL is over 40 years old and is used in practically all existing databases. The goal of <code>dbplyr</code> is to automatically generate code in <em>SQL</em> so that we’re not forced to use it. However, <code>dbplyr</code> doesn’t do everything that SQL language does. It focuses on the declarative <strong>SELECT</strong> and derivatives, which we consider sufficient for the scope of this course.</p>
<p>See how, most of the time, we don’t need to know anything about SQL and can continue using the <code>dplyr</code> verbs we’re already familiar with.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="example-1.html#cb353-1" aria-hidden="true" tabindex="-1"></a>cars_db <span class="sc">%&gt;%</span> <span class="fu">select</span>(mpg, cyl, hp)</span></code></pre></div>
<pre><code>## # Source:   SQL [?? x 3]
## # Database: sqlite 3.46.0 []
##      mpg   cyl    hp
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6   110
##  2  21       6   110
##  3  22.8     4    93
##  4  21.4     6   110
##  5  18.7     8   175
##  6  18.1     6   105
##  7  14.3     8   245
##  8  24.4     4    62
##  9  22.8     4    95
## 10  19.2     6   123
## # ℹ more rows</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="example-1.html#cb355-1" aria-hidden="true" tabindex="-1"></a>cars_db <span class="sc">%&gt;%</span> <span class="fu">filter</span>(mpg <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code></pre></div>
<pre><code>## # Source:   SQL [?? x 11]
## # Database: sqlite 3.46.0 []
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6 160     110  3.9   2.62  16.5     0     1     4     4
##  2  21       6 160     110  3.9   2.88  17.0     0     1     4     4
##  3  22.8     4 108      93  3.85  2.32  18.6     1     1     4     1
##  4  21.4     6 258     110  3.08  3.22  19.4     1     0     3     1
##  5  24.4     4 147.     62  3.69  3.19  20       1     0     4     2
##  6  22.8     4 141.     95  3.92  3.15  22.9     1     0     4     2
##  7  32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1
##  8  30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2
##  9  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1
## 10  21.5     4 120.     97  3.7   2.46  20.0     1     0     3     1
## # ℹ more rows</code></pre>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="example-1.html#cb357-1" aria-hidden="true" tabindex="-1"></a>cars_db <span class="sc">%&gt;%</span> </span>
<span id="cb357-2"><a href="example-1.html#cb357-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb357-3"><a href="example-1.html#cb357-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_mpg =</span> <span class="fu">mean</span>(mpg, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # Source:   SQL [3 x 2]
## # Database: sqlite 3.46.0 []
##     cyl avg_mpg
##   &lt;dbl&gt;   &lt;dbl&gt;
## 1     4    26.7
## 2     6    19.7
## 3     8    15.1</code></pre>
<p>However, in the long run it’s highly recommended that you learn at least the basics of SQL. SQL is a quite important <em>skill</em> for any data scientist or people who deal with data routinely.</p>
<p>The most important difference between ordinary dataframes and <em>queries</em> to remote databases is that our <strong>R</strong> code is translated to <em>SQL</em> language and <strong>executed in the database</strong>, not in <strong>R</strong>. When working with <em>databases</em>, <code>dplyr</code> tries to be as lazy as possible. <code>dplyr</code> relies on a concept widely used in R, which is <em>lazy evaluation</em>:</p>
<ul>
<li><p>It never brings data to <strong>R</strong> unless we explicitly request it to do so;</p></li>
<li><p>It “delays” doing any task until the last moment: it collects all commands and sends to the database in a single step.</p></li>
</ul>
<p>See the following example:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="example-1.html#cb359-1" aria-hidden="true" tabindex="-1"></a>by_cyl_db <span class="ot">&lt;-</span> cars_db <span class="sc">%&gt;%</span> </span>
<span id="cb359-2"><a href="example-1.html#cb359-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb359-3"><a href="example-1.html#cb359-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb359-4"><a href="example-1.html#cb359-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_mpg =</span> <span class="fu">mean</span>(mpg, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb359-5"><a href="example-1.html#cb359-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb359-6"><a href="example-1.html#cb359-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb359-7"><a href="example-1.html#cb359-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_mpg)) <span class="sc">%&gt;%</span></span>
<span id="cb359-8"><a href="example-1.html#cb359-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">5</span>)</span></code></pre></div>
<p>It’s surprising what we’re going to say now, but all this code doesn’t touch the database at any time; not until we request it, for example by doing a <strong>printing</strong> of the created object <code>by_cyl_db</code>. Only then does <code>dplyr</code> generate the <em>SQL</em> code and request the results from the database on the SQL server. Still, it tries to minimize what will be printed, bringing only a few lines and not everything. See:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="example-1.html#cb360-1" aria-hidden="true" tabindex="-1"></a>by_cyl_db</span></code></pre></div>
<pre><code>## # Source:     SQL [3 x 3]
## # Database:   sqlite 3.46.0 []
## # Ordered by: desc(avg_mpg)
##     cyl avg_mpg     n
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
## 1     4    26.7    11
## 2     6    19.7     7
## 3     8    15.1    14</code></pre>
<p>Behind the scenes, <code>dbplyr</code>/<code>dplyr</code> is translating the code in <strong>R</strong> to <em>SQL</em> code. If you want to see (and learn) the SQL code being sent to the server, use <code>show_query()</code>:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="example-1.html#cb362-1" aria-hidden="true" tabindex="-1"></a>by_cyl_db <span class="sc">%&gt;%</span> <span class="fu">show_query</span>()</span></code></pre></div>
<pre><code>## &lt;SQL&gt;
## SELECT `cyl`, AVG(`mpg`) AS `avg_mpg`, COUNT(*) AS `n`
## FROM `cars_db`
## GROUP BY `cyl`
## HAVING (COUNT(*) &gt; 5.0)
## ORDER BY `avg_mpg` DESC</code></pre>
<p>For those more familiar with SQL, the code above probably wouldn’t be what you would write, but it accomplishes the mission. See <code>vignette("SQL-translation")</code>.</p>
<p>Even with <code>dbplyr</code>/<code>dplyr</code>, we’ll still do some iterations and attempts until we discover what we’ll really need from the data. However, we’ll do it much faster. Once we know exactly our goal, we can use <code>collect()</code> to bring all the data into a (local) <em>tibble</em> on our machine:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="example-1.html#cb364-1" aria-hidden="true" tabindex="-1"></a>by_cyl_final <span class="ot">&lt;-</span> by_cyl_db <span class="sc">%&gt;%</span> <span class="fu">collect</span>()</span>
<span id="cb364-2"><a href="example-1.html#cb364-2" aria-hidden="true" tabindex="-1"></a>by_cyl_final</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##     cyl avg_mpg     n
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
## 1     4    26.7    11
## 2     6    19.7     7
## 3     8    15.1    14</code></pre>
<p><code>collect()</code> requires the database to work and therefore the operation may take some time to complete. On the other hand, <code>dbplyr</code> tries to prevent you from accidentally making computationally expensive <em>queries</em>:</p>
<ul>
<li><p>There’s usually no way to determine how many rows a <em>query</em> will return until we actually execute it. Unlike when working with databases on our PC, the <code>nrow()</code> command always returns <code>NA</code> when firing against relational databases;</p></li>
<li><p>Since we can’t find the last few rows without executing the query of all data, we can’t use <code>tail()</code>, which prints the <span class="math inline">\(n\)</span> last rows of a tibble or dataframe.</p></li>
</ul>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="example-1.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(by_cyl_db)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="example-1.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(by_cyl_db)</span></code></pre></div>
<pre><code>## Error in `tail()`:
## ! `tail()` is not supported on database backends.</code></pre>
<hr />
</div>
<div id="section-references" class="section level3 hasAnchor" number="4.2.7">
<h3><span class="header-section-number">4.2.7</span> Section References<a href="example-1.html#section-references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Wickham, H.; Ruiz, E. (2019). <em>dbplyr: A ‘dplyr’ Back End for Databases</em>. R package version 1.4.0. URL <a href="https://CRAN.R-project.org/package=dbplyr">https://CRAN.R-project.org/package=dbplyr</a>.</p></li>
<li><p>____. (2020). <em>dbplyr vignette: Introduction</em>. URL <a href="http://dbplyr.tidyverse.org">http://dbplyr.tidyverse.org</a>.</p></li>
<li><p>Ruiz, E. (2017). <em>Databases using R</em>. RViews-RStudio. May 05, 2017. Available at: <a href="https://rviews.rstudio.com/2017/05/17/databases-using-r/">https://rviews.rstudio.com/2017/05/17/databases-using-r/</a></p></li>
</ul>
</div>
<div id="exercises-2" class="section level3 hasAnchor" number="4.2.8">
<h3><span class="header-section-number">4.2.8</span> Exercises<a href="example-1.html#exercises-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Practice using the database connection skills learned with a local SQLite database. Create your own sample dataset, upload it to the database, and practice writing queries using <code>dplyr</code> verbs.</p></li>
<li><p>Explore the SQL code generated by <code>dbplyr</code> for different operations. Use <code>show_query()</code> to see how your R code is translated to SQL.</p></li>
</ol>
<hr />
<hr />
</div>
</div>
<div id="data-manipulation-with-two-table-verbs---dplyr" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Data Manipulation with <em>Two-table verbs</em> - <code>dplyr</code><a href="example-1.html#data-manipulation-with-two-table-verbs---dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data analysis, most of the time, involves more than one database. In practice, they are databases from different sources that contribute to reaching a final result. Thus, we need flexible tools to combine them. In the <code>dplyr</code> package, there are three families of verbs that work with two tables at once:</p>
<ul>
<li><em>mutating joins</em>, which add new variables to a table from matching rows in another;</li>
<li><em>filtering joins</em>, which filter observations from a table if these observations match an observation in another table;</li>
<li><em>set operations</em>, which combine observations in datasets if they are elements of the informed set.</li>
</ul>
<p>These items assume your data is in <em>tidy data</em> format, i.e., rows are observations and columns are variables.</p>
<p>All <em>two-table verbs</em> (or two-table functions) work similarly: the first two arguments are <code>x</code> and <code>y</code> and provide the two tables we want to compare and combine. The <em>output</em> will always be a new table with the same object type as <code>x</code>.</p>
<div id="mutating-joins" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> <em>Mutating joins</em><a href="example-1.html#mutating-joins" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>Mutating joins</em> allow us to combine variables from multiple tables. We’ll use some datasets from the <code>nycflights13</code> package which includes data from 336,776 flights (tibble <code>flights</code>), weather conditions (tibble <code>weather</code>) and aircraft (tibble <code>planes</code>) that landed and took off from 3 airports (tibble <code>airports</code>) in New York in 2013. The data comes from the <em>US Bureau of Transportation Statistics</em>.</p>
<p>Initially we’ll use the <code>flights</code> dataset. Let’s separate some columns from the original tibble into another. Then we’ll try to join the two based on the airline name.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="example-1.html#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;nycflights13&quot;</span>)</span>
<span id="cb370-2"><a href="example-1.html#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb370-3"><a href="example-1.html#cb370-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-4"><a href="example-1.html#cb370-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop unimportant variables so it&#39;s easier to understand the join results.</span></span>
<span id="cb370-5"><a href="example-1.html#cb370-5" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year<span class="sc">:</span>day, hour, origin, dest, tailnum, carrier)</span>
<span id="cb370-6"><a href="example-1.html#cb370-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-7"><a href="example-1.html#cb370-7" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb370-8"><a href="example-1.html#cb370-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(airlines)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 9
##     year month   day  hour origin dest  tailnum carrier name                    
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;                   
##  1  2013     1     1     5 EWR    IAH   N14228  UA      United Air Lines Inc.   
##  2  2013     1     1     5 LGA    IAH   N24211  UA      United Air Lines Inc.   
##  3  2013     1     1     5 JFK    MIA   N619AA  AA      American Airlines Inc.  
##  4  2013     1     1     5 JFK    BQN   N804JB  B6      JetBlue Airways         
##  5  2013     1     1     6 LGA    ATL   N668DN  DL      Delta Air Lines Inc.    
##  6  2013     1     1     5 EWR    ORD   N39463  UA      United Air Lines Inc.   
##  7  2013     1     1     6 EWR    FLL   N516JB  B6      JetBlue Airways         
##  8  2013     1     1     6 LGA    IAD   N829AS  EV      ExpressJet Airlines Inc.
##  9  2013     1     1     6 JFK    MCO   N593JB  B6      JetBlue Airways         
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA      American Airlines Inc.  
## # ℹ 336,766 more rows</code></pre>
<div id="controlling-how-tables-match-in-mutating-joins" class="section level4 hasAnchor" number="4.3.1.1">
<h4><span class="header-section-number">4.3.1.1</span> Controlling how tables match in <em>mutating joins</em><a href="example-1.html#controlling-how-tables-match-in-mutating-joins" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Along with the <code>x</code> and <code>y</code> arguments, each <em>mutating join</em> also receives a <code>by</code> argument which is used as an index to match between tables. There are several ways to specify this argument.
Let’s see examples of how to specify the <code>by</code> parameter, using some tables from <code>nycflights13</code>.</p>
<ul>
<li>1st way) <code>NULL</code>: the <em>default</em>. <code>dplyr</code> will use all variables that appear in both tables. We call this a <strong>natural join</strong>. In the following example, the <code>flights</code> and <code>weather</code> tables will be “joined” based on common variables: <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code> and <code>origin</code>.</li>
</ul>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="example-1.html#cb372-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(weather)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(year, month, day, hour, origin)`</code></pre>
<pre><code>## # A tibble: 336,776 × 18
##     year month   day  hour origin dest  tailnum carrier  temp  dewp humid wind_dir wind_speed
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1  2013     1     1     5 EWR    IAH   N14228  UA       39.0  28.0  64.4      260       12.7
##  2  2013     1     1     5 LGA    IAH   N24211  UA       39.9  25.0  54.8      250       15.0
##  3  2013     1     1     5 JFK    MIA   N619AA  AA       39.0  27.0  61.6      260       15.0
##  4  2013     1     1     5 JFK    BQN   N804JB  B6       39.0  27.0  61.6      260       15.0
##  5  2013     1     1     6 LGA    ATL   N668DN  DL       39.9  25.0  54.8      260       16.1
##  6  2013     1     1     5 EWR    ORD   N39463  UA       39.0  28.0  64.4      260       12.7
##  7  2013     1     1     6 EWR    FLL   N516JB  B6       37.9  28.0  67.2      240       11.5
##  8  2013     1     1     6 LGA    IAD   N829AS  EV       39.9  25.0  54.8      260       16.1
##  9  2013     1     1     6 JFK    MCO   N593JB  B6       37.9  27.0  64.3      260       13.8
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA       39.9  25.0  54.8      260       16.1
## # ℹ 336,766 more rows
## # ℹ 5 more variables: wind_gust &lt;dbl&gt;, precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ul>
<li>2nd way) <code>by = "var1"</code> or <code>by = c("var1", "var2", "var3")</code>: a character vector. Operates as if it were a <em>natural join</em>, but uses only some of the common variables. For example, <code>flights</code> and <code>planes</code> have a <code>year</code> variable, but they mean different things in each tibble/dataframe. So, we want to specify a column we know means the same thing in both tibbles and can serve as an index for <em>matching</em>. Let’s use <code>tailnum</code> which is the plane’s (tail) number.</li>
</ul>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="example-1.html#cb375-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(planes, <span class="at">by =</span> <span class="st">&quot;tailnum&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 16
##    year.x month   day  hour origin dest  tailnum carrier year.y type  manufacturer model engines seats
##     &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;   &lt;int&gt; &lt;int&gt;
##  1   2013     1     1     5 EWR    IAH   N14228  UA        1999 Fixe… BOEING       737-…       2   149
##  2   2013     1     1     5 LGA    IAH   N24211  UA        1998 Fixe… BOEING       737-…       2   149
##  3   2013     1     1     5 JFK    MIA   N619AA  AA        1990 Fixe… BOEING       757-…       2   178
##  4   2013     1     1     5 JFK    BQN   N804JB  B6        2012 Fixe… AIRBUS       A320…       2   200
##  5   2013     1     1     6 LGA    ATL   N668DN  DL        1991 Fixe… BOEING       757-…       2   178
##  6   2013     1     1     5 EWR    ORD   N39463  UA        2012 Fixe… BOEING       737-…       2   191
##  7   2013     1     1     6 EWR    FLL   N516JB  B6        2000 Fixe… AIRBUS INDU… A320…       2   200
##  8   2013     1     1     6 LGA    IAD   N829AS  EV        1998 Fixe… CANADAIR     CL-6…       2    55
##  9   2013     1     1     6 JFK    MCO   N593JB  B6        2004 Fixe… AIRBUS       A320…       2   200
## 10   2013     1     1     6 LGA    ORD   N3ALAA  AA          NA &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt;       NA    NA
## # ℹ 336,766 more rows
## # ℹ 2 more variables: speed &lt;int&gt;, engine &lt;chr&gt;</code></pre>
<p>Note that when joining all columns from both tibbles, <code>dplyr</code> adds a suffix to the second <code>year</code> variable.</p>
<ul>
<li>3rd way) <code>by = c("var1" = "var3")</code>: a named character vector. This will match variable <code>var1</code> in table <code>x</code> with variable <code>var3</code> in table <code>y</code>. Variables from source table <code>x</code> will be used in the <em>output</em>.</li>
</ul>
<p>Each flight has an origin and destination airport. So we need to specify which of these variables from the <code>flights</code> dataset we want to match with the <code>faa</code> column from the <code>airports</code> dataset.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="example-1.html#cb377-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(airports, <span class="fu">c</span>(<span class="st">&quot;dest&quot;</span> <span class="ot">=</span> <span class="st">&quot;faa&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 15
##     year month   day  hour origin dest  tailnum carrier name         lat   lon   alt    tz dst   tzone
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
##  1  2013     1     1     5 EWR    IAH   N14228  UA      George Bu…  30.0 -95.3    97    -6 A     Amer…
##  2  2013     1     1     5 LGA    IAH   N24211  UA      George Bu…  30.0 -95.3    97    -6 A     Amer…
##  3  2013     1     1     5 JFK    MIA   N619AA  AA      Miami Intl  25.8 -80.3     8    -5 A     Amer…
##  4  2013     1     1     5 JFK    BQN   N804JB  B6      &lt;NA&gt;        NA    NA      NA    NA &lt;NA&gt;  &lt;NA&gt; 
##  5  2013     1     1     6 LGA    ATL   N668DN  DL      Hartsfiel…  33.6 -84.4  1026    -5 A     Amer…
##  6  2013     1     1     5 EWR    ORD   N39463  UA      Chicago O…  42.0 -87.9   668    -6 A     Amer…
##  7  2013     1     1     6 EWR    FLL   N516JB  B6      Fort Laud…  26.1 -80.2     9    -5 A     Amer…
##  8  2013     1     1     6 LGA    IAD   N829AS  EV      Washingto…  38.9 -77.5   313    -5 A     Amer…
##  9  2013     1     1     6 JFK    MCO   N593JB  B6      Orlando I…  28.4 -81.3    96    -5 A     Amer…
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA      Chicago O…  42.0 -87.9   668    -6 A     Amer…
## # ℹ 336,766 more rows</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="example-1.html#cb379-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(airports, <span class="fu">c</span>(<span class="st">&quot;origin&quot;</span> <span class="ot">=</span> <span class="st">&quot;faa&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 15
##     year month   day  hour origin dest  tailnum carrier name         lat   lon   alt    tz dst   tzone
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
##  1  2013     1     1     5 EWR    IAH   N14228  UA      Newark Li…  40.7 -74.2    18    -5 A     Amer…
##  2  2013     1     1     5 LGA    IAH   N24211  UA      La Guardia  40.8 -73.9    22    -5 A     Amer…
##  3  2013     1     1     5 JFK    MIA   N619AA  AA      John F Ke…  40.6 -73.8    13    -5 A     Amer…
##  4  2013     1     1     5 JFK    BQN   N804JB  B6      John F Ke…  40.6 -73.8    13    -5 A     Amer…
##  5  2013     1     1     6 LGA    ATL   N668DN  DL      La Guardia  40.8 -73.9    22    -5 A     Amer…
##  6  2013     1     1     5 EWR    ORD   N39463  UA      Newark Li…  40.7 -74.2    18    -5 A     Amer…
##  7  2013     1     1     6 EWR    FLL   N516JB  B6      Newark Li…  40.7 -74.2    18    -5 A     Amer…
##  8  2013     1     1     6 LGA    IAD   N829AS  EV      La Guardia  40.8 -73.9    22    -5 A     Amer…
##  9  2013     1     1     6 JFK    MCO   N593JB  B6      John F Ke…  40.6 -73.8    13    -5 A     Amer…
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA      La Guardia  40.8 -73.9    22    -5 A     Amer…
## # ℹ 336,766 more rows</code></pre>
</div>
<div id="types-of-mutating-joins" class="section level4 hasAnchor" number="4.3.1.2">
<h4><span class="header-section-number">4.3.1.2</span> Types of <em>mutating joins</em><a href="example-1.html#types-of-mutating-joins" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are 4 types of <em>mutating join</em>, which differ by behavior in rows where <strong>no</strong> <em>matching</em> occurs between databases.</p>
<p>Let’s create two dataframes and then we’ll see examples of each case.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="example-1.html#cb381-1" aria-hidden="true" tabindex="-1"></a>(df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">y =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">1</span>))</span></code></pre></div>
<pre><code>##   x y
## 1 1 2
## 2 2 1</code></pre>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="example-1.html#cb383-1" aria-hidden="true" tabindex="-1"></a>(df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="at">a =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="st">&quot;a&quot;</span>))</span></code></pre></div>
<pre><code>##   x  a b
## 1 1 10 a
## 2 3 10 a</code></pre>
<ul>
<li><code>inner_join(x, y)</code>: includes only observations that have correspondence in both <code>x</code> and <code>y</code> (i.e., equal rows in dataframes).</li>
</ul>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="example-1.html#cb385-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(df2)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(x)`</code></pre>
<pre><code>##   x y  a b
## 1 1 2 10 a</code></pre>
<p>Note that the <code>by</code> argument was omitted. Thus, the function’s behavior was the <em>default</em>. Column <code>x</code> was used as an index to join the two data frames. Equal rows for variable <code>x</code> in both dataframes are brought in full (i.e., all columns are presented).</p>
<ul>
<li><code>left_join(x, y)</code>: includes all observations in <code>x</code>, regardless of whether there’s <em>matching</em> between tables. This is the most used type of <em>join</em>, because it guarantees we won’t lose any information from our primary table <code>x</code>.</li>
</ul>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="example-1.html#cb388-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df2)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(x)`</code></pre>
<pre><code>##   x y  a    b
## 1 1 2 10    a
## 2 2 1 NA &lt;NA&gt;</code></pre>
<ul>
<li><code>right_join(x, y)</code>: includes all observations from table <code>y</code>. It’s equivalent to <code>left_join(**y**, **x**)</code>, but variable ordering will be different in the latter case:</li>
</ul>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="example-1.html#cb391-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(df2)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(x)`</code></pre>
<pre><code>##   x  y  a b
## 1 1  2 10 a
## 2 3 NA 10 a</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="example-1.html#cb394-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df1)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(x)`</code></pre>
<pre><code>##   x  a b  y
## 1 1 10 a  2
## 2 3 10 a NA</code></pre>
<ul>
<li><code>full_join()</code>: includes all observations from table <code>x</code> and <code>y</code>:</li>
</ul>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="example-1.html#cb397-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(df2)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(x)`</code></pre>
<pre><code>##   x  y  a    b
## 1 1  2 10    a
## 2 2  1 NA &lt;NA&gt;
## 3 3 NA 10    a</code></pre>
<p>The <em>left</em>, <em>right</em> and <em>full joins</em> are collectively known as <strong>outer joins</strong>. When a row from one table has no correspondence in the other table, in an <strong>outer join</strong>, new variables are filled with <em>missing values</em> (<code>NA</code>).</p>
<p>Although <em>mutating joins</em> exist to add new variables, in some cases they can generate new observations. If a match isn’t unique, a <em>join</em> will add rows for all possible combinations (Cartesian product) of matching observations. This is an important observation, because often when performing a join between two tables, we don’t understand why the table resulting from the <em>join</em> has more observations than the two original tables.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="example-1.html#cb400-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb400-2"><a href="example-1.html#cb400-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="at">z =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))</span>
<span id="cb400-3"><a href="example-1.html#cb400-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb400-4"><a href="example-1.html#cb400-4" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df2)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(x)`</code></pre>
<pre><code>## Warning in left_join(., df2): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 1 of `x` matches multiple rows in `y`.
## ℹ Row 1 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship = &quot;many-to-many&quot;` to silence this
##   warning.</code></pre>
<pre><code>##   x y z
## 1 1 1 a
## 2 1 1 b
## 3 1 2 a
## 4 1 2 b
## 5 2 3 a</code></pre>
</div>
</div>
<div id="filtering-joins" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> <em>Filtering joins</em><a href="example-1.html#filtering-joins" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Filtering joins</strong> “match” observations in the same way as <em>mutating joins</em>, but <strong>affect observations themselves and not variables</strong>. There are two types of <em>filtering joins</em>:</p>
<ul>
<li><code>semi_join()</code> <strong>KEEPS</strong> all observations in <code>x</code> that have correspondence in <code>y</code>;</li>
<li><code>anti_join()</code> <strong>REMOVES</strong> all observations in <code>x</code> that have correspondence in <code>y</code>.</li>
</ul>
<p>These joins are very useful for identifying “mismatches” between tables. For example, there are several flights in the <code>flights</code> dataset that don’t have matches regarding <code>tailnum</code> in the <code>planes</code> dataset:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="example-1.html#cb404-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb404-2"><a href="example-1.html#cb404-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(planes, <span class="at">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb404-3"><a href="example-1.html#cb404-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(tailnum, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 722 × 2
##    tailnum     n
##    &lt;chr&gt;   &lt;int&gt;
##  1 &lt;NA&gt;     2512
##  2 N725MQ    575
##  3 N722MQ    513
##  4 N723MQ    507
##  5 N713MQ    483
##  6 N735MQ    396
##  7 N0EGMQ    371
##  8 N534MQ    364
##  9 N542MQ    363
## 10 N531MQ    349
## # ℹ 712 more rows</code></pre>
<p>If you’re concerned about which observations our <em>join</em> will <em>match</em>, it’s suggested to start with a <code>semi_join()</code> or <code>anti_join()</code> for the following reason: these <em>joins</em> never duplicate observations, they only remove or keep them in the same number.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="example-1.html#cb406-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb406-2"><a href="example-1.html#cb406-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="at">z =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))</span>
<span id="cb406-3"><a href="example-1.html#cb406-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-4"><a href="example-1.html#cb406-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Four rows to start with:</span></span>
<span id="cb406-5"><a href="example-1.html#cb406-5" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="example-1.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="co"># And we get four rows after the join</span></span>
<span id="cb408-2"><a href="example-1.html#cb408-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(df2, <span class="at">by =</span> <span class="st">&quot;x&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code></pre></div>
<pre><code>## Warning in inner_join(., df2, by = &quot;x&quot;): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 1 of `x` matches multiple rows in `y`.
## ℹ Row 1 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship = &quot;many-to-many&quot;` to silence this
##   warning.</code></pre>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="example-1.html#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="co"># But only two rows actually match</span></span>
<span id="cb411-2"><a href="example-1.html#cb411-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">semi_join</span>(df2, <span class="at">by =</span> <span class="st">&quot;x&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Finally, it’s worth mentioning functions that would be useful if you had to work with 3 or more tables. Read about <code>purrr::reduce()</code> or <code>Reduce()</code>, as described in <em>“Advanced R”</em>, to iteratively combine and expand your knowledge of <em>two-table verbs</em> to handle a larger number of tables.</p>
<p>The content of this chapter was adapted from the <em>two-table verbs</em> vignette, available at <a href="http://dplyr.tidyverse.org/articles/two-table.html">http://dplyr.tidyverse.org/articles/two-table.html</a>.</p>
<hr />
</div>
<div id="section-references-1" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Section References<a href="example-1.html#section-references-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Wickham H.; François, R.; Henry, L.; Müller K. (2019). <em>dplyr: A Grammar of Data Manipulation</em>. R package version 0.8.1. URL <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.</p></li>
<li><p>Wickham H.; François, R.; Henry, L.; Müller K. (2020). <em>dplyr vignette: Two-table</em>. Article. Available at: <a href="http://dplyr.tidyverse.org/articles/two-table.html">http://dplyr.tidyverse.org/articles/two-table.html</a>.</p></li>
<li><p>Wickham, H.; Grolemund, G. (2016). <em>R for Data Science: Import, Tidy, Transform, Visualize, and Model Data</em>. O’Reilly Media. december 2016. 522 pages. Available at: <a href="https://www.r4ds.co.nz">https://www.r4ds.co.nz</a>.</p></li>
</ul>
</div>
<div id="exercises-3" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Exercises<a href="example-1.html#exercises-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Try to replicate each of the <em>joins</em> presented in this section using the <code>nycflights13</code> datasets. Practice joining <code>flights</code> with different tables like <code>airports</code>, <code>airlines</code>, <code>weather</code>, and <code>planes</code>.</p></li>
<li><p>Create your own small datasets and practice all four types of joins (<code>inner_join</code>, <code>left_join</code>, <code>right_join</code>, <code>full_join</code>). Pay attention to how each handles non-matching rows.</p></li>
<li><p>Use <code>anti_join()</code> to find flights in the <code>flights</code> dataset that don’t have weather information in the <code>weather</code> dataset.</p></li>
</ol>
<hr />
<hr />
</div>
</div>
<div id="geographic-data-analysis-in-r" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Geographic Data Analysis in <strong>R</strong><a href="example-1.html#geographic-data-analysis-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Introduction<a href="example-1.html#introduction" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In recent decades there has been a real revolution in geocomputation techniques. Thanks to this great advance, geographic data analysis is no longer restricted to those who have access to expensive hardware and software. In a way, we can say that <strong>R</strong> also contributed to this advance. Although the language had some limitations regarding geocomputation in the early years of language development, recently several <strong>R</strong> packages have taken geocomputation to a new level, especially regarding <strong>reproducibility</strong>.</p>
<p>While software based on Geographic Information Systems (GIS), which has Geography as its base discipline and focus on graphical interfaces, leaves something to be desired in the reproducibility of generated maps, <strong>R</strong>, which is based on Statistics and Computing through command line and programming, makes geographic data analysis much more fluid and capable of reproduction by other users and developers.</p>
<p>In this section, we’ll present some of the main packages and techniques used for map production using <strong>R</strong>.</p>
<div id="geographic-data-models-vector-vs-raster" class="section level4 hasAnchor" number="4.4.1.1">
<h4><span class="header-section-number">4.4.1.1</span> Geographic data models: <em>vector</em> vs <em>raster</em><a href="example-1.html#geographic-data-models-vector-vs-raster" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the field of geocomputation, we need to know how to differentiate the two main types of geographic data: <em>vector</em> and <em>raster</em>.</p>
<p>Geographic data in <strong>vector</strong> form uses <em>points</em>, <em>lines</em> and <em>polygons</em> to represent a map. In this case, object edges (e.g. States, Municipalities, Countries) are well defined.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-105"></span>
<img src="IADR-T_files/figure-html/unnamed-chunk-105-1.png" alt="Example of _vector_ plot" width="672" />
<p class="caption">
Figure 4.2: Example of <em>vector</em> plot
</p>
</div>
<p>Data in <strong>raster</strong> format divides a map’s surface into cells of constant sizes. Datasets in <em>raster</em> format are commonly used to generate maps as background images (<em>background</em>). <em>Raster</em> models have been used practically since the origin of Remote Sensing devices and satellites.</p>
<p>In this course, we’ll focus on geographic data models in <strong><em>vector</em></strong>, which is the predominant data model in Social Sciences. This is because spatial arrangements produced by humans tend to have discrete and well-defined boundaries. The <em>raster</em> model is more used in environmental or earth sciences due to the use of data from remote sensing.</p>
<p>Now that we know the conceptual differences between the main geographic data models, let’s get practical.</p>
</div>
</div>
<div id="map-production-in-r" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Map Production in R<a href="example-1.html#map-production-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="shapefiles" class="section level4 hasAnchor" number="4.4.2.1">
<h4><span class="header-section-number">4.4.2.1</span> <em>Shapefiles</em><a href="example-1.html#shapefiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><em>Shapefiles</em> are files that follow the geographic data model in <em>vector</em>, containing graphic elements in the format of <em>point</em>, <em>line</em> and/or <em>polygons</em> that can be worked together with geographic coordinates to describe a specific phenomenon, such as population size, disease incidence, unemployment rates, etc. From this information, it’s possible to construct a map.</p>
<p>A <em>shapefile</em> normally contains three main files <code>.shp</code>, <code>.shx</code>, <code>.dbf</code>. There are several places from which you can obtain <em>shapefiles</em> for map making.</p>
<p>If your goal is to obtain <em>shapefiles</em> for US territorial boundaries, you can get them from these sources:</p>
<ul>
<li><p><strong>US Census Bureau - TIGER/Line Shapefiles</strong>: <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html">https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html</a></p></li>
<li><p><strong>Natural Earth Data</strong>: <a href="https://www.naturalearthdata.com/downloads/">https://www.naturalearthdata.com/downloads/</a></p></li>
<li><p><strong>GADM</strong>: <a href="https://gadm.org/download_country_v3.html">https://gadm.org/download_country_v3.html</a></p></li>
</ul>
<p>In the case of <em>GADM</em>, the repository has both <em>shapefiles</em> and R files for importing the territorial mesh of various countries and their administrative subdivisions. It’s a quite complete repository and easier to navigate.</p>
<p><strong>TIP:</strong> The <code>spData</code> package already includes geographic data for US states, which makes our work easier for educational purposes.</p>
<p>We’ll focus on demonstrating how to work with <em>shapefiles</em> using the <code>spData</code> package that already has ready-made data. For any other data source, procedures will be practically the same.</p>
</div>
<div id="map-of-us-states" class="section level4 hasAnchor" number="4.4.2.2">
<h4><span class="header-section-number">4.4.2.2</span> Map of US States<a href="example-1.html#map-of-us-states" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="obtaining-and-reading-the-file" class="section level5 hasAnchor" number="4.4.2.2.1">
<h5><span class="header-section-number">4.4.2.2.1</span> Obtaining and reading the file<a href="example-1.html#obtaining-and-reading-the-file" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Let’s use the <code>spData</code> package which already contains the territorial mesh of US states. We’ll also need the <code>sf</code> package to work with spatial data.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="example-1.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading necessary packages</span></span>
<span id="cb413-2"><a href="example-1.html#cb413-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb413-3"><a href="example-1.html#cb413-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spData)</span>
<span id="cb413-4"><a href="example-1.html#cb413-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb413-5"><a href="example-1.html#cb413-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb413-6"><a href="example-1.html#cb413-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading US states data</span></span>
<span id="cb413-7"><a href="example-1.html#cb413-7" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;us_states&quot;</span>)</span>
<span id="cb413-8"><a href="example-1.html#cb413-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb413-9"><a href="example-1.html#cb413-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting to sf object (simple features)</span></span>
<span id="cb413-10"><a href="example-1.html#cb413-10" aria-hidden="true" tabindex="-1"></a>shp_us_states <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(us_states)</span>
<span id="cb413-11"><a href="example-1.html#cb413-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb413-12"><a href="example-1.html#cb413-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Viewing the data structure</span></span>
<span id="cb413-13"><a href="example-1.html#cb413-13" aria-hidden="true" tabindex="-1"></a>shp_us_states</span></code></pre></div>
<pre><code>## Simple feature collection with 49 features and 6 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -124.7042 ymin: 24.55868 xmax: -66.9824 ymax: 49.38436
## Geodetic CRS:  NAD83
## First 10 features:
##    GEOID        NAME   REGION             AREA total_pop_10 total_pop_15
## 1     01     Alabama    South 133709.27 [km^2]      4712651      4830620
## 2     04     Arizona     West 295281.25 [km^2]      6246816      6641928
## 3     08    Colorado     West 269573.06 [km^2]      4887061      5278906
## 4     09 Connecticut Norteast  12976.59 [km^2]      3545837      3593222
## 5     12     Florida    South 151052.01 [km^2]     18511620     19645772
## 6     13     Georgia    South 152725.21 [km^2]      9468815     10006693
## 7     16       Idaho     West 216512.66 [km^2]      1526797      1616547
## 8     18     Indiana  Midwest  93648.40 [km^2]      6417398      6568645
## 9     20      Kansas  Midwest 213037.08 [km^2]      2809329      2892987
## 10    22   Louisiana    South 122345.76 [km^2]      4429940      4625253
##                          geometry
## 1  MULTIPOLYGON (((-88.20006 3...
## 2  MULTIPOLYGON (((-114.7196 3...
## 3  MULTIPOLYGON (((-109.0501 4...
## 4  MULTIPOLYGON (((-73.48731 4...
## 5  MULTIPOLYGON (((-81.81169 2...
## 6  MULTIPOLYGON (((-85.60516 3...
## 7  MULTIPOLYGON (((-116.916 45...
## 8  MULTIPOLYGON (((-87.52404 4...
## 9  MULTIPOLYGON (((-102.0517 4...
## 10 MULTIPOLYGON (((-92.01783 2...</code></pre>
<p>Note that in addition to state names, region they belong to (<code>REGION</code>), area, total population and other variables, this special dataframe has a column called <code>geometry</code>. This column has the vector geometric elements for map making in the <em>vector</em> data model mentioned earlier.</p>
</div>
<div id="plotting-the-map" class="section level5 hasAnchor" number="4.4.2.2.2">
<h5><span class="header-section-number">4.4.2.2.2</span> Plotting the Map<a href="example-1.html#plotting-the-map" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>To plot the map, we’ll use the <code>tmap</code> package. First we must specify the base dataframe using the <code>tm_shape(dataframe_name)</code> function. Once done, plotting the polygons from the <code>geometry</code> column can already be done by adding the polygon layer with <code>tm_borders()</code> or <code>tm_polygons()</code>.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="example-1.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb415-2"><a href="example-1.html#cb415-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb415-3"><a href="example-1.html#cb415-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(shp_us_states) <span class="sc">+</span></span>
<span id="cb415-4"><a href="example-1.html#cb415-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>()</span></code></pre></div>
<p><img src="IADR-T_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<p>Very simple to make maps in <strong>R</strong>, right?</p>
</div>
<div id="adding-data-to-the-map" class="section level5 hasAnchor" number="4.4.2.2.3">
<h5><span class="header-section-number">4.4.2.2.3</span> Adding data to the map<a href="example-1.html#adding-data-to-the-map" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Normally, when doing geographic analyses, our goal is to represent some phenomenon occurring in the territory, such as unemployment rate behavior by state.</p>
<p>Let’s create simulated unemployment rate data for US states in the year 2020:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="example-1.html#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># for reproducibility</span></span>
<span id="cb416-2"><a href="example-1.html#cb416-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb416-3"><a href="example-1.html#cb416-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating unemployment rate data</span></span>
<span id="cb416-4"><a href="example-1.html#cb416-4" aria-hidden="true" tabindex="-1"></a>unemployment_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb416-5"><a href="example-1.html#cb416-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">NAME =</span> shp_us_states<span class="sc">$</span>NAME,</span>
<span id="cb416-6"><a href="example-1.html#cb416-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">unemployment_rate =</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="fu">nrow</span>(shp_us_states), <span class="at">min =</span> <span class="fl">3.5</span>, <span class="at">max =</span> <span class="fl">8.5</span>), <span class="dv">1</span>)</span>
<span id="cb416-7"><a href="example-1.html#cb416-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb416-8"><a href="example-1.html#cb416-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb416-9"><a href="example-1.html#cb416-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(unemployment_data)</span></code></pre></div>
<pre><code>##          NAME unemployment_rate
## 1     Alabama               4.9
## 2     Arizona               7.4
## 3    Colorado               5.5
## 4 Connecticut               7.9
## 5     Florida               8.2
## 6     Georgia               3.7</code></pre>
<p>Now we must join this data to the dataframe containing the boundaries of US states. Let’s use the <code>left_join()</code> function from <code>dplyr</code>. We’ll join the tables based on the column containing state names.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="example-1.html#cb418-1" aria-hidden="true" tabindex="-1"></a>shape_data_join <span class="ot">&lt;-</span> <span class="fu">left_join</span>(shp_us_states, </span>
<span id="cb418-2"><a href="example-1.html#cb418-2" aria-hidden="true" tabindex="-1"></a>                             unemployment_data, </span>
<span id="cb418-3"><a href="example-1.html#cb418-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">by =</span> <span class="st">&quot;NAME&quot;</span>)</span>
<span id="cb418-4"><a href="example-1.html#cb418-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-5"><a href="example-1.html#cb418-5" aria-hidden="true" tabindex="-1"></a>shape_data_join</span></code></pre></div>
<pre><code>## Simple feature collection with 49 features and 7 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -124.7042 ymin: 24.55868 xmax: -66.9824 ymax: 49.38436
## Geodetic CRS:  NAD83
## First 10 features:
##    GEOID        NAME   REGION             AREA total_pop_10 total_pop_15 unemployment_rate
## 1     01     Alabama    South 133709.27 [km^2]      4712651      4830620               4.9
## 2     04     Arizona     West 295281.25 [km^2]      6246816      6641928               7.4
## 3     08    Colorado     West 269573.06 [km^2]      4887061      5278906               5.5
## 4     09 Connecticut Norteast  12976.59 [km^2]      3545837      3593222               7.9
## 5     12     Florida    South 151052.01 [km^2]     18511620     19645772               8.2
## 6     13     Georgia    South 152725.21 [km^2]      9468815     10006693               3.7
## 7     16       Idaho     West 216512.66 [km^2]      1526797      1616547               6.1
## 8     18     Indiana  Midwest  93648.40 [km^2]      6417398      6568645               8.0
## 9     20      Kansas  Midwest 213037.08 [km^2]      2809329      2892987               6.3
## 10    22   Louisiana    South 122345.76 [km^2]      4429940      4625253               5.8
##                          geometry
## 1  MULTIPOLYGON (((-88.20006 3...
## 2  MULTIPOLYGON (((-114.7196 3...
## 3  MULTIPOLYGON (((-109.0501 4...
## 4  MULTIPOLYGON (((-73.48731 4...
## 5  MULTIPOLYGON (((-81.81169 2...
## 6  MULTIPOLYGON (((-85.60516 3...
## 7  MULTIPOLYGON (((-116.916 45...
## 8  MULTIPOLYGON (((-87.52404 4...
## 9  MULTIPOLYGON (((-102.0517 4...
## 10 MULTIPOLYGON (((-92.01783 2...</code></pre>
<p>Now we have practically everything ready to plot how unemployment rate was distributed across states in 2020. To make this information included in the map, we add a <em>layer</em> to the graph using the <code>tm_fill("unemployment_rate")</code> function.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="example-1.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(shape_data_join) <span class="sc">+</span></span>
<span id="cb420-2"><a href="example-1.html#cb420-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>() <span class="sc">+</span></span>
<span id="cb420-3"><a href="example-1.html#cb420-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">&quot;unemployment_rate&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device</code></pre>
<p><img src="IADR-T_files/figure-html/unnamed-chunk-110-1.png" width="672" /></p>
<p><strong>TIP:</strong> Once we add a new <em>layer</em> with <code>tm_fill()</code>, we can’t use <code>tm_polygons()</code> to draw borders, only <code>tm_borders()</code>.</p>
</div>
<div id="map-improvements" class="section level5 hasAnchor" number="4.4.2.2.4">
<h5><span class="header-section-number">4.4.2.2.4</span> Map improvements<a href="example-1.html#map-improvements" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We can further improve our maps by adding other <em>layers</em>. We can control the intensity of state borders, legend positioning with <code>tm_legend()</code>, map style, display a scale bar <code>tm_scale_bar()</code>, a compass rose with <code>tm_compass()</code> and much more.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="example-1.html#cb422-1" aria-hidden="true" tabindex="-1"></a>unemployment_map_2020 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(shape_data_join) <span class="sc">+</span></span>
<span id="cb422-2"><a href="example-1.html#cb422-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># border lines:</span></span>
<span id="cb422-3"><a href="example-1.html#cb422-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb422-4"><a href="example-1.html#cb422-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fill and legend title:</span></span>
<span id="cb422-5"><a href="example-1.html#cb422-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">&quot;unemployment_rate&quot;</span>, </span>
<span id="cb422-6"><a href="example-1.html#cb422-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">&quot;Unemployment Rate (%)&quot;</span>,</span>
<span id="cb422-7"><a href="example-1.html#cb422-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>) <span class="sc">+</span></span>
<span id="cb422-8"><a href="example-1.html#cb422-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># legend position:</span></span>
<span id="cb422-9"><a href="example-1.html#cb422-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>)) <span class="sc">+</span></span>
<span id="cb422-10"><a href="example-1.html#cb422-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># compass (position and type):</span></span>
<span id="cb422-11"><a href="example-1.html#cb422-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">type =</span> <span class="st">&quot;arrow&quot;</span>) <span class="sc">+</span></span>
<span id="cb422-12"><a href="example-1.html#cb422-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale bar:</span></span>
<span id="cb422-13"><a href="example-1.html#cb422-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;top&quot;</span>)) <span class="sc">+</span></span>
<span id="cb422-14"><a href="example-1.html#cb422-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># title outside plot area:</span></span>
<span id="cb422-15"><a href="example-1.html#cb422-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">&quot;Unemployment Rate by State, 2020&quot;</span>,</span>
<span id="cb422-16"><a href="example-1.html#cb422-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.2</span>,</span>
<span id="cb422-17"><a href="example-1.html#cb422-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb422-18"><a href="example-1.html#cb422-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># credits/source:</span></span>
<span id="cb422-19"><a href="example-1.html#cb422-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="at">text =</span> <span class="st">&quot;Source: Simulated Data for Educational Purposes&quot;</span>,</span>
<span id="cb422-20"><a href="example-1.html#cb422-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;bottom&quot;</span>))</span></code></pre></div>
<pre><code>## </code></pre>
<pre><code>## ── tmap v3 code detected ─────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## [v3-&gt;v4] `tm_borders()`: use `fill_alpha` instead of `alpha`.
## [v3-&gt;v4] `tm_fill()`: migrate the argument(s) related to the legend of the visual variable `fill`
## namely &#39;title&#39; to &#39;fill.legend = tm_legend(&lt;HERE&gt;)&#39;
## ! `tm_scale_bar()` is deprecated. Please use `tm_scalebar()` instead.
## [v3-&gt;v4] `tm_layout()`: use `tm_title()` instead of `tm_layout(main.title = )`</code></pre>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="example-1.html#cb426-1" aria-hidden="true" tabindex="-1"></a>unemployment_map_2020</span></code></pre></div>
<pre><code>## [cols4all] color palettes: use palettes from the R package cols4all. Run `cols4all::c4a_gui()` to
## explore them. The old palette name &quot;YlOrRd&quot; is named &quot;brewer.yl_or_rd&quot;
## Multiple palettes called &quot;yl_or_rd&quot; found: &quot;brewer.yl_or_rd&quot;, &quot;matplotlib.yl_or_rd&quot;. The first one, &quot;brewer.yl_or_rd&quot;, is returned.</code></pre>
<pre><code>## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device</code></pre>
<p><img src="IADR-T_files/figure-html/unnamed-chunk-111-1.png" width="960" /></p>
</div>
<div id="adding-more-data-to-the-map" class="section level5 hasAnchor" number="4.4.2.2.5">
<h5><span class="header-section-number">4.4.2.2.5</span> Adding more data to the map<a href="example-1.html#adding-more-data-to-the-map" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>With <code>tmap</code>, we can add one more data dimension to our map. Imagine, for example, that we wanted to plot, in addition to unemployment rate, the percentage of state GDP growth in 2020. This would provide better understanding of each state’s economic situation in that year.</p>
<p>First let’s create simulated GDP growth data:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="example-1.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb429-2"><a href="example-1.html#cb429-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-3"><a href="example-1.html#cb429-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating GDP growth data</span></span>
<span id="cb429-4"><a href="example-1.html#cb429-4" aria-hidden="true" tabindex="-1"></a>gdp_growth_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb429-5"><a href="example-1.html#cb429-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">NAME =</span> shp_us_states<span class="sc">$</span>NAME,</span>
<span id="cb429-6"><a href="example-1.html#cb429-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">gdp_growth =</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="fu">nrow</span>(shp_us_states), <span class="at">min =</span> <span class="sc">-</span><span class="dv">3</span>, <span class="at">max =</span> <span class="dv">5</span>), <span class="dv">1</span>)</span>
<span id="cb429-7"><a href="example-1.html#cb429-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb429-8"><a href="example-1.html#cb429-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-9"><a href="example-1.html#cb429-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gdp_growth_data)</span></code></pre></div>
<pre><code>##          NAME gdp_growth
## 1     Alabama       -2.3
## 2     Arizona       -1.3
## 3    Colorado        2.9
## 4 Connecticut        3.8
## 5     Florida        3.3
## 6     Georgia       -0.3</code></pre>
<p>Let’s perform the join of this new database with the <code>shape_data_join</code> dataset:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="example-1.html#cb431-1" aria-hidden="true" tabindex="-1"></a>shape_data_join2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(shape_data_join, </span>
<span id="cb431-2"><a href="example-1.html#cb431-2" aria-hidden="true" tabindex="-1"></a>                              gdp_growth_data, </span>
<span id="cb431-3"><a href="example-1.html#cb431-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by =</span> <span class="st">&quot;NAME&quot;</span>)</span>
<span id="cb431-4"><a href="example-1.html#cb431-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-5"><a href="example-1.html#cb431-5" aria-hidden="true" tabindex="-1"></a>shape_data_join2</span></code></pre></div>
<pre><code>## Simple feature collection with 49 features and 8 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -124.7042 ymin: 24.55868 xmax: -66.9824 ymax: 49.38436
## Geodetic CRS:  NAD83
## First 10 features:
##    GEOID        NAME   REGION             AREA total_pop_10 total_pop_15 unemployment_rate gdp_growth
## 1     01     Alabama    South 133709.27 [km^2]      4712651      4830620               4.9       -2.3
## 2     04     Arizona     West 295281.25 [km^2]      6246816      6641928               7.4       -1.3
## 3     08    Colorado     West 269573.06 [km^2]      4887061      5278906               5.5        2.9
## 4     09 Connecticut Norteast  12976.59 [km^2]      3545837      3593222               7.9        3.8
## 5     12     Florida    South 151052.01 [km^2]     18511620     19645772               8.2        3.3
## 6     13     Georgia    South 152725.21 [km^2]      9468815     10006693               3.7       -0.3
## 7     16       Idaho     West 216512.66 [km^2]      1526797      1616547               6.1       -2.3
## 8     18     Indiana  Midwest  93648.40 [km^2]      6417398      6568645               8.0       -0.7
## 9     20      Kansas  Midwest 213037.08 [km^2]      2809329      2892987               6.3       -1.1
## 10    22   Louisiana    South 122345.76 [km^2]      4429940      4625253               5.8        0.1
##                          geometry
## 1  MULTIPOLYGON (((-88.20006 3...
## 2  MULTIPOLYGON (((-114.7196 3...
## 3  MULTIPOLYGON (((-109.0501 4...
## 4  MULTIPOLYGON (((-73.48731 4...
## 5  MULTIPOLYGON (((-81.81169 2...
## 6  MULTIPOLYGON (((-85.60516 3...
## 7  MULTIPOLYGON (((-116.916 45...
## 8  MULTIPOLYGON (((-87.52404 4...
## 9  MULTIPOLYGON (((-102.0517 4...
## 10 MULTIPOLYGON (((-92.01783 2...</code></pre>
<p>With the proper adjustments made, we proceed to plot the map. Considering that we used <code>tm_fill()</code> for the <code>unemployment_rate</code> variable, we can use circles whose size will vary according to the state’s GDP growth intensity. We do this with the <code>tm_bubbles()</code> function, passing the variable name to the <code>size</code> argument.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="example-1.html#cb433-1" aria-hidden="true" tabindex="-1"></a>unemployment_gdp_map_2020 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(shape_data_join2) <span class="sc">+</span></span>
<span id="cb433-2"><a href="example-1.html#cb433-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># border lines:</span></span>
<span id="cb433-3"><a href="example-1.html#cb433-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb433-4"><a href="example-1.html#cb433-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fill and legend title (unemployment):</span></span>
<span id="cb433-5"><a href="example-1.html#cb433-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">&quot;unemployment_rate&quot;</span>, </span>
<span id="cb433-6"><a href="example-1.html#cb433-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">&quot;Unemployment (%)&quot;</span>,</span>
<span id="cb433-7"><a href="example-1.html#cb433-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>,</span>
<span id="cb433-8"><a href="example-1.html#cb433-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb433-9"><a href="example-1.html#cb433-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># inserting the layer depicting GDP growth</span></span>
<span id="cb433-10"><a href="example-1.html#cb433-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_bubbles</span>(<span class="at">size =</span> <span class="st">&quot;gdp_growth&quot;</span>, </span>
<span id="cb433-11"><a href="example-1.html#cb433-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb433-12"><a href="example-1.html#cb433-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb433-13"><a href="example-1.html#cb433-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">title.size =</span> <span class="st">&quot;GDP Growth (%)&quot;</span>,</span>
<span id="cb433-14"><a href="example-1.html#cb433-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">sizes.legend =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb433-15"><a href="example-1.html#cb433-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">scale =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb433-16"><a href="example-1.html#cb433-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># legend position:</span></span>
<span id="cb433-17"><a href="example-1.html#cb433-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>)) <span class="sc">+</span></span>
<span id="cb433-18"><a href="example-1.html#cb433-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># compass:</span></span>
<span id="cb433-19"><a href="example-1.html#cb433-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">type =</span> <span class="st">&quot;arrow&quot;</span>) <span class="sc">+</span></span>
<span id="cb433-20"><a href="example-1.html#cb433-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale bar:</span></span>
<span id="cb433-21"><a href="example-1.html#cb433-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;top&quot;</span>)) <span class="sc">+</span></span>
<span id="cb433-22"><a href="example-1.html#cb433-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># title:</span></span>
<span id="cb433-23"><a href="example-1.html#cb433-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">&quot;Unemployment Rate and GDP Growth by State, 2020&quot;</span>,</span>
<span id="cb433-24"><a href="example-1.html#cb433-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.1</span>,</span>
<span id="cb433-25"><a href="example-1.html#cb433-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb433-26"><a href="example-1.html#cb433-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># credits:</span></span>
<span id="cb433-27"><a href="example-1.html#cb433-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="at">text =</span> <span class="st">&quot;Source: Simulated Data&quot;</span>,</span>
<span id="cb433-28"><a href="example-1.html#cb433-28" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;bottom&quot;</span>))</span></code></pre></div>
<pre><code>## </code></pre>
<pre><code>## ── tmap v3 code detected ─────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## [v3-&gt;v4] `tm_borders()`: use `fill_alpha` instead of `alpha`.
## [v3-&gt;v4] `tm_fill()`: use `fill_alpha` instead of `alpha`.
## [v3-&gt;v4] `tm_fill()`: migrate the argument(s) related to the legend of the visual variable `fill`
## namely &#39;title&#39; to &#39;fill.legend = tm_legend(&lt;HERE&gt;)&#39;
## [v3-&gt;v4] `tm_bubbles()`: use `fill_alpha` instead of `alpha`.
## [v3-&gt;v4] `tm_tm_bubbles()`: migrate the argument(s) related to the scale of the visual variable
## `size` namely &#39;sizes.legend&#39; (rename to &#39;ticks&#39;), &#39;scale&#39; (rename to &#39;values.scale&#39;) to size.scale =
## tm_scale_continuous(&lt;HERE&gt;).
## ℹ For small multiples, specify a &#39;tm_scale_&#39; for each multiple, and put them in a list: &#39;size.scale =
##   list(&lt;scale1&gt;, &lt;scale2&gt;, ...)&#39;
## ! `tm_scale_bar()` is deprecated. Please use `tm_scalebar()` instead.
## [v3-&gt;v4] `tm_layout()`: use `tm_title()` instead of `tm_layout(main.title = )`</code></pre>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="example-1.html#cb437-1" aria-hidden="true" tabindex="-1"></a>unemployment_gdp_map_2020</span></code></pre></div>
<pre><code>## [cols4all] color palettes: use palettes from the R package cols4all. Run `cols4all::c4a_gui()` to
## explore them. The old palette name &quot;YlOrRd&quot; is named &quot;brewer.yl_or_rd&quot;
## Multiple palettes called &quot;yl_or_rd&quot; found: &quot;brewer.yl_or_rd&quot;, &quot;matplotlib.yl_or_rd&quot;. The first one, &quot;brewer.yl_or_rd&quot;, is returned.</code></pre>
<pre><code>## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device</code></pre>
<pre><code>## Warning in grid.Call.graphics(C_points, x$x, x$y, x$pch, x$size): semi-transparency is not supported
## on this device: reported only once per page</code></pre>
<p><img src="IADR-T_files/figure-html/unnamed-chunk-114-1.png" width="960" /></p>
</div>
<div id="focusing-on-a-specific-region-florida-and-neighboring-states" class="section level5 hasAnchor" number="4.4.2.2.6">
<h5><span class="header-section-number">4.4.2.2.6</span> Focusing on a specific region: Florida and neighboring states<a href="example-1.html#focusing-on-a-specific-region-florida-and-neighboring-states" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>As an additional example, let’s create a map focused on Florida and neighboring states (Georgia, Alabama, South Carolina). This is particularly relevant since this course is being taught at the University of North Florida (UNF).</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="example-1.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting Florida and neighboring states</span></span>
<span id="cb441-2"><a href="example-1.html#cb441-2" aria-hidden="true" tabindex="-1"></a>southeast_states <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Florida&quot;</span>, <span class="st">&quot;Georgia&quot;</span>, <span class="st">&quot;Alabama&quot;</span>, <span class="st">&quot;South Carolina&quot;</span>)</span>
<span id="cb441-3"><a href="example-1.html#cb441-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-4"><a href="example-1.html#cb441-4" aria-hidden="true" tabindex="-1"></a>shape_southeast <span class="ot">&lt;-</span> shape_data_join2 <span class="sc">%&gt;%</span></span>
<span id="cb441-5"><a href="example-1.html#cb441-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NAME <span class="sc">%in%</span> southeast_states)</span>
<span id="cb441-6"><a href="example-1.html#cb441-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-7"><a href="example-1.html#cb441-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating regional map</span></span>
<span id="cb441-8"><a href="example-1.html#cb441-8" aria-hidden="true" tabindex="-1"></a>southeast_map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(shape_southeast) <span class="sc">+</span></span>
<span id="cb441-9"><a href="example-1.html#cb441-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb441-10"><a href="example-1.html#cb441-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">&quot;unemployment_rate&quot;</span>, </span>
<span id="cb441-11"><a href="example-1.html#cb441-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">&quot;Unemployment (%)&quot;</span>,</span>
<span id="cb441-12"><a href="example-1.html#cb441-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">palette =</span> <span class="st">&quot;Blues&quot;</span>) <span class="sc">+</span></span>
<span id="cb441-13"><a href="example-1.html#cb441-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">&quot;NAME&quot;</span>, <span class="at">size =</span> <span class="fl">0.8</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb441-14"><a href="example-1.html#cb441-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb441-15"><a href="example-1.html#cb441-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>)) <span class="sc">+</span></span>
<span id="cb441-16"><a href="example-1.html#cb441-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">main.title =</span> <span class="st">&quot;Unemployment in Southeast US States, 2020&quot;</span>,</span>
<span id="cb441-17"><a href="example-1.html#cb441-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">main.title.size =</span> <span class="fl">1.2</span>,</span>
<span id="cb441-18"><a href="example-1.html#cb441-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb441-19"><a href="example-1.html#cb441-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">bg.color =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb441-20"><a href="example-1.html#cb441-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="at">text =</span> <span class="st">&quot;Focus: Florida and neighboring states&quot;</span>)</span></code></pre></div>
<pre><code>## </code></pre>
<pre><code>## ── tmap v3 code detected ─────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## [v3-&gt;v4] `tm_tm_fill()`: migrate the argument(s) related to the scale of the visual variable `fill`
## namely &#39;palette&#39; (rename to &#39;values&#39;) to fill.scale = tm_scale(&lt;HERE&gt;).
## [v3-&gt;v4] `tm_fill()`: migrate the argument(s) related to the legend of the visual variable `fill`
## namely &#39;title&#39; to &#39;fill.legend = tm_legend(&lt;HERE&gt;)&#39;
## ! `tm_scale_bar()` is deprecated. Please use `tm_scalebar()` instead.
## [v3-&gt;v4] `tm_layout()`: use `tm_title()` instead of `tm_layout(main.title = )`</code></pre>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="example-1.html#cb445-1" aria-hidden="true" tabindex="-1"></a>southeast_map</span></code></pre></div>
<pre><code>## [cols4all] color palettes: use palettes from the R package cols4all. Run `cols4all::c4a_gui()` to
## explore them. The old palette name &quot;Blues&quot; is named &quot;brewer.blues&quot;
## Multiple palettes called &quot;blues&quot; found: &quot;brewer.blues&quot;, &quot;matplotlib.blues&quot;. The first one, &quot;brewer.blues&quot;, is returned.</code></pre>
<pre><code>## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device
## Warning in grid.Call.graphics(C_path, x$x, x$y, index, switch(x$rule, winding = 1L, : Path drawing
## not available for this device</code></pre>
<p><img src="IADR-T_files/figure-html/unnamed-chunk-115-1.png" width="768" /></p>
</div>
<div id="other-packages-for-map-generation" class="section level5 hasAnchor" number="4.4.2.2.7">
<h5><span class="header-section-number">4.4.2.2.7</span> Other packages for map generation<a href="example-1.html#other-packages-for-map-generation" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Although <code>tmap</code> is a quite powerful and flexible package for map generation, there are several other alternatives in the <strong>R</strong> ecosystem for generating both static and interactive maps: <code>maptools</code>, <code>maps</code>, <code>ggmap</code> + <code>ggplot2</code>, <code>leaflet</code>, <code>plotly</code>, among others.</p>
<p>For interactive maps, <code>leaflet</code> is particularly popular:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="example-1.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example with leaflet (not run)</span></span>
<span id="cb448-2"><a href="example-1.html#cb448-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb448-3"><a href="example-1.html#cb448-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-4"><a href="example-1.html#cb448-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a simple interactive map centered on Florida</span></span>
<span id="cb448-5"><a href="example-1.html#cb448-5" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb448-6"><a href="example-1.html#cb448-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb448-7"><a href="example-1.html#cb448-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">81.5158</span>, <span class="at">lat =</span> <span class="fl">30.3322</span>, <span class="at">zoom =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb448-8"><a href="example-1.html#cb448-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">81.5158</span>, <span class="at">lat =</span> <span class="fl">30.3322</span>, </span>
<span id="cb448-9"><a href="example-1.html#cb448-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">popup =</span> <span class="st">&quot;Jacksonville, FL - UNF&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="exporting-geographic-data" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Exporting geographic data<a href="example-1.html#exporting-geographic-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="writing-vector-data-files" class="section level4 hasAnchor" number="4.4.3.1">
<h4><span class="header-section-number">4.4.3.1</span> Writing vector data files<a href="example-1.html#writing-vector-data-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Just as in reading vector data, the recommended package for writing data is <code>sf</code>. The function equivalent to <code>st_read()</code> regarding data writing is <code>st_write()</code>. There are several types of vector files that can be written: <code>ESRI Shapefile</code> the most common (file extension <code>shp</code>), <code>GPX</code>, <code>KML</code>, <code>GeoJSON</code> and <code>GPKG</code>.</p>
<p>See an example, writing a <em>shapefile</em> <code>.shp</code>:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="example-1.html#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saving as shapefile</span></span>
<span id="cb449-2"><a href="example-1.html#cb449-2" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(<span class="at">obj =</span> shape_data_join2, </span>
<span id="cb449-3"><a href="example-1.html#cb449-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">dsn =</span> <span class="st">&quot;us_states_unemployment.shp&quot;</span>,</span>
<span id="cb449-4"><a href="example-1.html#cb449-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">delete_dsn =</span> <span class="cn">TRUE</span>) <span class="co"># overwrites if it already exists</span></span></code></pre></div>
</div>
<div id="writing-image-files" class="section level4 hasAnchor" number="4.4.3.2">
<h4><span class="header-section-number">4.4.3.2</span> Writing image files<a href="example-1.html#writing-image-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To save maps as images:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="example-1.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using base R function</span></span>
<span id="cb450-2"><a href="example-1.html#cb450-2" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;us_unemployment_map.png&quot;</span>, </span>
<span id="cb450-3"><a href="example-1.html#cb450-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">800</span>, <span class="at">height =</span> <span class="dv">600</span>, <span class="at">res =</span> <span class="dv">100</span>)</span>
<span id="cb450-4"><a href="example-1.html#cb450-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(unemployment_map_2020)</span>
<span id="cb450-5"><a href="example-1.html#cb450-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb450-6"><a href="example-1.html#cb450-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-7"><a href="example-1.html#cb450-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Or using tmap_save</span></span>
<span id="cb450-8"><a href="example-1.html#cb450-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_save</span>(<span class="at">tm =</span> unemployment_map_2020, </span>
<span id="cb450-9"><a href="example-1.html#cb450-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">filename =</span> <span class="st">&quot;us_unemployment_tmap.png&quot;</span>,</span>
<span id="cb450-10"><a href="example-1.html#cb450-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code></pre></div>
<p>You can also save maps in different formats:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="example-1.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as PDF</span></span>
<span id="cb451-2"><a href="example-1.html#cb451-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_save</span>(<span class="at">tm =</span> unemployment_map_2020, </span>
<span id="cb451-3"><a href="example-1.html#cb451-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">filename =</span> <span class="st">&quot;us_unemployment_map.pdf&quot;</span>)</span>
<span id="cb451-4"><a href="example-1.html#cb451-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-5"><a href="example-1.html#cb451-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as HTML (interactive)</span></span>
<span id="cb451-6"><a href="example-1.html#cb451-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>) <span class="co"># switch to interactive mode</span></span>
<span id="cb451-7"><a href="example-1.html#cb451-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_save</span>(<span class="at">tm =</span> unemployment_map_2020, </span>
<span id="cb451-8"><a href="example-1.html#cb451-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">filename =</span> <span class="st">&quot;us_unemployment_interactive.html&quot;</span>)</span>
<span id="cb451-9"><a href="example-1.html#cb451-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>) <span class="co"># switch back to static mode</span></span></code></pre></div>
</div>
</div>
<div id="section-references-2" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Section References<a href="example-1.html#section-references-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Lovelace, R.; Nowosad, J.; Muenchow, J. (2019). <em>Geocomputation with R</em>. CRC Press. Available at: <a href="https://geocompr.robinlovelace.net/">https://geocompr.robinlovelace.net/</a></p></li>
<li><p>Pebesma, E. (2018). Simple Features for R: Standardized Support for Spatial Vector Data. <em>The R Journal</em> 10 (1), 439-446, <a href="https://doi.org/10.32614/RJ-2018-009">https://doi.org/10.32614/RJ-2018-009</a>.</p></li>
<li><p>Tennekes, M. (2018). <em>tmap: Thematic Maps in R</em>. <em>Journal of Statistical Software</em>, <em>84</em>(6), 1-39. <a href="doi:10.18637/jss.v084.i06" class="uri">doi:10.18637/jss.v084.i06</a> (URL:<a href="https://doi.org/10.18637/jss.v084.i06">https://doi.org/10.18637/jss.v084.i06</a>).</p></li>
<li><p>Bivand, R. S., Pebesma, E., &amp; Gomez-Rubio, V. (2013). <em>Applied spatial data analysis with R</em> (Vol. 2, pp. 1-405). New York: Springer.</p></li>
<li><p>Wickham, H., &amp; Grolemund, G. (2016). <em>R for data science: import, tidy, transform, visualize, and model data</em>. O’Reilly Media, Inc. Available at: <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a></p></li>
</ul>
</div>
<div id="exercises-4" class="section level3 hasAnchor" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Exercises<a href="example-1.html#exercises-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li></li>
</ol>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Explore the <code>us_states</code> dataset from the <code>spData</code> package and identify other available variables (population, area, median income, etc).</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Create a map showing population density (population/area) of US states.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Make an interactive map using the <code>leaflet</code> package or <code>tmap</code> in “view” mode (<code>tmap_mode("view")</code>).</li>
</ol></li>
<li><ol start="4" style="list-style-type: lower-alpha">
<li>Download real unemployment data from the Bureau of Labor Statistics (<a href="https://www.bls.gov/data/">https://www.bls.gov/data/</a>) and create a map with real data.</li>
</ol></li>
<li><ol start="5" style="list-style-type: lower-alpha">
<li>Create a map focused only on the Southern region states of the United States.</li>
</ol></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><strong>Challenge</strong>: Create a map showing multiple variables using different visualization techniques:
<ul>
<li>Use color to show one variable (e.g., unemployment rate)</li>
<li>Use bubble size to show another variable (e.g., total population)</li>
<li>Add text labels for state abbreviations</li>
<li>Include a proper legend, title, and data source</li>
</ul></li>
<li><strong>Florida Focus</strong>: Since this course is at UNF in Jacksonville, Florida:
<ul>
<li>Create a detailed map of Florida counties</li>
<li>Add a marker for Jacksonville</li>
<li>Show a demographic or economic variable by county</li>
<li>Save the map as both a static PNG and an interactive HTML file</li>
</ul></li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="install.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="m4.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "sepia",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
